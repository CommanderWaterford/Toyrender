<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>
      Toyrender AI Photo Generator – Turn Photos into Collectible Figures
    </title>

    <!-- SEO Meta Tags -->
    <meta
      name="description"
      content="Transform your photos into collectible figurines or photorealistic images using advanced AI technology. Create 1:7 scale figurine designs in seconds. AI Profile Photos perfect for social media and professional use."
    />
    <meta
      name="keywords"
      content="AI figurine, collectible figurines, photo to figurine, 3D figurine, custom figurines, AI art, digital collectibles, personalized figurines, toy render, figurine design"
    />
    <meta name="author" content="Toyrender.com" />
    <meta name="robots" content="index, follow" />
    <meta name="language" content="en" />
    <meta name="revisit-after" content="7 days" />

    <!-- Canonical URL -->
    <link rel="canonical" href="https://toyrender.com/" />
    <!-- Language Alternates -->
    <link rel="alternate" hreflang="en" href="https://toyrender.com/" />
    <link rel="alternate" hreflang="es" href="https://toyrender.com/es/" />
    <link rel="alternate" hreflang="x-default" href="https://toyrender.com/" />

    <!-- Open Graph Meta Tags -->
    <meta property="og:type" content="website" />
    <meta property="og:title" content="Toyrender.com - AI Photo Generator" />
    <meta
      property="og:description"
      content="Transform your photos into collectible figurines using advanced AI technology. Create 1:7 scale figurine designs in seconds."
    />
    <meta property="og:url" content="https://toyrender.com/" />
    <meta property="og:site_name" content="Toyrender" />
    <meta property="og:image" content="https://toyrender.com/og-image.jpg" />
    <meta property="og:image:width" content="1200" />
    <meta property="og:image:height" content="630" />
    <meta
      property="og:image:alt"
      content="AI-powered figurine transformation service"
    />
    <meta property="og:locale" content="en_US" />
    <meta name="msvalidate.01" content="F4F1FB69A98B092B32B64CAE7FA3EE25" />

    <!-- Twitter Card Meta Tags -->
    <meta name="twitter:card" content="summary_large_image" />
    <meta
      name="twitter:title"
      content="Toyrender.com - Transform Your Photos into Collectible Figurines"
    />
    <meta
      name="twitter:description"
      content="Transform your photos into stunning collectible figurines using advanced AI technology. Create 1:7 scale figurine designs in seconds."
    />
    <meta name="twitter:image" content="https://toyrender.com/og-image.jpg" />
    <meta
      name="twitter:image:alt"
      content="AI-powered figurine transformation service"
    />

    <!-- Additional SEO Meta Tags -->
    <meta name="theme-color" content="#9333ea" />
    <meta name="msapplication-TileColor" content="#9333ea" />
    <meta name="apple-mobile-web-app-capable" content="yes" />
    <meta
      name="apple-mobile-web-app-status-bar-style"
      content="black-translucent"
    />
    <meta name="apple-mobile-web-app-title" content="Toyrender" />

    <!-- Preload Critical Resources -->
    <link rel="preload" href="https://cdn.tailwindcss.com" as="script" />
    <link
      rel="preload"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css"
      as="style"
    />

    <!-- JSON-LD Structured Data -->
    <script type="application/ld+json">
      {
        "@context": "https://schema.org",
        "@graph": [
          {
            "@type": "Organization",
            "@id": "https://toyrender.com/#organization",
            "name": "Toyrender",
            "url": "https://toyrender.com",
            "logo": {
              "@type": "ImageObject",
              "url": "https://toyrender.com/logo.png",
              "width": 200,
              "height": 200
            },
            "description": "AI-powered service that transforms photos into collectible figurines",
            "foundingDate": "2024",
            "sameAs": [
              "https://twitter.com/toyrender",
              "https://facebook.com/toyrender"
            ]
          },
          {
            "@type": "WebApplication",
            "@id": "https://toyrender.com/#webapp",
            "name": "Toyrender Figurine Generator",
            "url": "https://toyrender.com",
            "description": "Transform your photos into collectible figurines using advanced AI technology",
            "applicationCategory": "MultimediaApplication",
            "operatingSystem": "Web Browser",
            "offers": [
              {
                "@type": "Offer",
                "name": "Free Trial",
                "price": "0",
                "priceCurrency": "USD",
                "description": "2 Free Figurine Generations with High-Resolution Downloads"
              },
              {
                "@type": "Offer",
                "name": "Pro Pack",
                "price": "4.99",
                "priceCurrency": "USD",
                "description": "50 Credits to create photos with Priority Processing and Commercial Use License"
              }
            ],
            "featureList": [
              "AI-Powered Design",
              "Instant Generation",
              "High-Resolution Downloads",
              "Multiple Styles",
              "Commercial Use License"
            ]
          },
          {
            "@type": "Product",
            "@id": "https://toyrender.com/#product",
            "name": "AI Figurine Generation Service",
            "description": "Transform photos into collectible figurines using advanced AI technology",
            "brand": {
              "@type": "Brand",
              "name": "Toyrender"
            },
            "category": "Digital Art Service",
            "offers": {
              "@type": "AggregateOffer",
              "lowPrice": "0",
              "highPrice": "4.99",
              "priceCurrency": "USD",
              "offerCount": "2"
            }
          },
          {
            "@type": "WebSite",
            "@id": "https://toyrender.com/#website",
            "url": "https://toyrender.com",
            "name": "Toyrender",
            "description": "AI-powered figurine transformation service",
            "publisher": {
              "@id": "https://toyrender.com/#organization"
            },
            "potentialAction": {
              "@type": "SearchAction",
              "target": "https://toyrender.com/search?q={search_term_string}",
              "query-input": "required name=search_term_string"
            }
          }
        ]
      }
    </script>

    <!-- FAQ JSON-LD Structured Data -->
    <script type="application/ld+json">
      {
        "@context": "https://schema.org",
        "@type": "FAQPage",
        "mainEntity": [
          {
            "@type": "Question",
            "name": "Do I own the generated figurine design?",
            "acceptedAnswer": {
              "@type": "Answer",
              "text": "Yes. With the Pro Pack you receive a commercial-use license for your outputs. Free Trial results are for personal, non-commercial use."
            }
          },
          {
            "@type": "Question",
            "name": "How long does generation take?",
            "acceptedAnswer": {
              "@type": "Answer",
              "text": "Usually under a minute; during busy periods it can take a bit longer. You'll see a live status while we create your figurine."
            }
          },
          {
            "@type": "Question",
            "name": "What image formats and sizes are supported?",
            "acceptedAnswer": {
              "@type": "Answer",
              "text": "JPG and PNG up to 10 MB work best. For the best results, upload a clear, well-lit photo with your face visible."
            }
          },
          {
            "@type": "Question",
            "name": "What do I receive after generation?",
            "acceptedAnswer": {
              "@type": "Answer",
              "text": "A high-resolution image preview of your figurine design with a download option. We don't ship physical figurines at this time."
            }
          },
          {
            "@type": "Question",
            "name": "Can I choose styles or themes?",
            "acceptedAnswer": {
              "@type": "Answer",
              "text": "Yes, of course. We'll render your photo in seven pre-defined styles with the pro Pack."
            }
          },
          {
            "@type": "Question",
            "name": "Are my photos private?",
            "acceptedAnswer": {
              "@type": "Answer",
              "text": "Absolutely. We never publicly share your uploads. Photos are used to create your result in line with our Privacy Policy. Please avoid uploading sensitive images."
            }
          },
          {
            "@type": "Question",
            "name": "Can I use outputs commercially?",
            "acceptedAnswer": {
              "@type": "Answer",
              "text": "Yes with the Pro Pack license. Please don't use outputs in a way that infringes third-party rights (e.g., logos, branded costumes) or impersonates others."
            }
          },
          {
            "@type": "Question",
            "name": "Do credits expire? What if something goes wrong?",
            "acceptedAnswer": {
              "@type": "Answer",
              "text": "Credits are tied to your account. If you run into any issue with a generation, contact support and we'll help fix it."
            }
          },
          {
            "@type": "Question",
            "name": "Can I 3D-print the result?",
            "acceptedAnswer": {
              "@type": "Answer",
              "text": "We currently provide high-resolution images (not STL files). You can use the image as reference for a 3D artist or printer."
            }
          },
          {
            "@type": "Question",
            "name": "Can I upload photos of children or multiple people?",
            "acceptedAnswer": {
              "@type": "Answer",
              "text": "Works best with a single person but groups are possible as well. For minors, only a parent or legal guardian may upload photos. "
            }
          },
          {
            "@type": "Question",
            "name": "Any content restrictions?",
            "acceptedAnswer": {
              "@type": "Answer",
              "text": "We don't allow nudity, hateful, or illegal content. Right now Babies and little Children are also not allowed. Don't upload images or prompts that violate rights or our Terms."
            }
          },
          {
            "@type": "Question",
            "name": "What is the AI Figure Generator?",
            "acceptedAnswer": {
              "@type": "Answer",
              "text": "Our AI Figure Generator (powered by Gemini's Nano Banana model) turns a single photo into a stylized collectible-style figurine concept with realistic lighting, proportions, and presentation mockup. It adds packaging / display flair so you can visualize a premium figure instantly."
            }
          },
          {
            "@type": "Question",
            "name": "What are the technical requirements?",
            "acceptedAnswer": {
              "@type": "Answer",
              "text": "Just a modern browser (Chrome, Firefox, Safari, Edge) with JavaScript enabled. Upload a clear, well‑lit image at least 512x512px showing the subject fully. No plugins or installs needed."
            }
          },
          {
            "@type": "Question",
            "name": "How is my data and imagery protected?",
            "acceptedAnswer": {
              "@type": "Answer",
              "text": "Uploads are transmitted over encrypted HTTPS, processed securely, and routinely purged after generation. We don't resell or train custom models on your private photos without explicit consent."
            }
          },
          {
            "@type": "Question",
            "name": "Are there usage or plan limits?",
            "acceptedAnswer": {
              "@type": "Answer",
              "text": "Free tier includes a daily cap; Max / Pro plans lift most limits and add priority processing. All tiers must follow our content and copyright policies (no celebrity likeness misuse or unlicensed IP)."
            }
          },
          {
            "@type": "Question",
            "name": "Do you offer refunds on AI generations?",
            "acceptedAnswer": {
              "@type": "Answer",
              "text": "Completed generations consume significant GPU + API cost, so refunds aren't issued after a successful render. Try the free tier first to ensure quality meets expectations before upgrading."
            }
          }
        ]
      }
    </script>

    <script src="https://cdn.tailwindcss.com"></script>
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css"
    />
    <style>
      @keyframes float {
        0%,
        100% {
          transform: translateY(0px) rotate(0deg);
        }
        50% {
          transform: translateY(-20px) rotate(5deg);
        }
      }
      @keyframes pulse-glow {
        0%,
        100% {
          box-shadow: 0 0 20px rgba(147, 51, 234, 0.5);
        }
        50% {
          box-shadow: 0 0 40px rgba(147, 51, 234, 0.8);
        }
      }
      .float-animation {
        animation: float 6s ease-in-out infinite;
      }
      .pulse-glow {
        animation: pulse-glow 2s ease-in-out infinite;
      }
      .gradient-text {
        background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
        -webkit-background-clip: text;
        -webkit-text-fill-color: transparent;
        background-clip: text;
      }
      .blob {
        position: absolute;
        border-radius: 50%;
        filter: blur(70px);
        opacity: 0.6;
        animation: float 20s ease-in-out infinite;
      }
      /* Testimonials horizontal scroll */
      @keyframes marquee {
        0% {
          transform: translateX(0);
        }
        100% {
          transform: translateX(-50%);
        }
      }
      .scroll-container {
        will-change: transform;
        animation: marquee 40s linear infinite;
      }
      .scroll-container:hover {
        animation-play-state: paused;
      }
      @media (prefers-reduced-motion: reduce) {
        .scroll-container {
          animation: none;
        }
      }

      /* Hide scrollbar but keep scrollability */
      .no-scrollbar::-webkit-scrollbar {
        display: none;
      }
      .no-scrollbar {
        -ms-overflow-style: none;
        scrollbar-width: none;
      }

      .section-title {
        color: white;
        font-size: clamp(2rem, 5vw, 3.5rem);
        font-weight: 700;
        text-align: center;
        margin-bottom: 60px;
        line-height: 1.2;
      }

      .stars {
        display: flex;
        gap: 4px;
        margin-bottom: 20px;
      }

      .star {
        font-size: 20px;
        color: #ffd700;
      }

      .star.empty {
        color: #4a4a5e;
      }

      .customer-info {
        display: flex;
        align-items: center;
        justify-content: space-between;
        margin-top: auto;
      }

      .customer-name {
        color: white;
        font-size: 18px;
        font-weight: 600;
      }

      .verified-badge {
        display: flex;
        align-items: center;
        gap: 6px;
        background: rgba(76, 175, 80, 0.15);
        padding: 5px 12px;
        border-radius: 20px;
        border: 1px solid rgba(76, 175, 80, 0.3);
      }

      .verified-icon {
        width: 14px;
        height: 14px;
        background: #4caf50;
        border-radius: 50%;
        display: flex;
        align-items: center;
        justify-content: center;
        color: white;
        font-size: 10px;
        font-weight: bold;
      }

      .verified-text {
        color: #4caf50;
        font-size: 11px;
        font-weight: 600;
        text-transform: uppercase;
        letter-spacing: 0.5px;
      }

      .google-auth-btn {
        display: flex;
        align-items: center;
        justify-content: center;
        width: 100%;
        padding: 12px 16px;
        background: white;
        border: 1px solid #dadce0;
        border-radius: 8px;
        color: #3c4043;
        font-size: 14px;
        font-weight: 500;
        cursor: pointer;
        transition: background-color 0.2s, box-shadow 0.2s;
      }

      .google-auth-btn:hover {
        background-color: #f8f9fa;
        box-shadow: 0 1px 2px 0 rgba(60, 64, 67, 0.3);
      }
      .style-option {
        display: flex;
        flex-direction: column;
        align-items: center;
        justify-content: center;
        padding: 1rem;
        background: rgba(71, 85, 105, 0.3);
        border: 2px solid rgba(147, 51, 234, 0.3);
        border-radius: 0.75rem;
        color: #e9d5ff;
        transition: all 0.3s ease;
        cursor: pointer;
        min-height: 80px;
      }

      .style-option:hover {
        background: rgba(147, 51, 234, 0.2);
        border-color: rgba(147, 51, 234, 0.6);
        transform: translateY(-2px);
      }

      .style-option.active {
        background: linear-gradient(
          135deg,
          rgba(147, 51, 234, 0.4),
          rgba(236, 72, 153, 0.4)
        );
        border-color: #9333ea;
        color: white;
        box-shadow: 0 4px 15px rgba(147, 51, 234, 0.3);
      }

      .style-option i {
        font-size: 1.5rem;
        margin-bottom: 0.5rem;
      }

      .style-option span {
        font-size: 0.875rem;
        text-align: center;
      }

      @media (max-width: 768px) {
        .style-option {
          padding: 0.75rem;
          min-height: 70px;
        }

        .style-option i {
          font-size: 1.25rem;
        }

        .style-option span {
          font-size: 0.75rem;
        }
      }

      .pack-results-viewer {
        width: 100%;
        max-width: 600px;
        margin: 0 auto;
      }

      .pack-thumb {
        border: 2px solid transparent;
        border-radius: 0.5rem;
        overflow: hidden;
        transition: all 0.3s ease;
        opacity: 0.7;
      }

      .pack-thumb:hover {
        opacity: 1;
        transform: scale(1.1);
      }

      .pack-thumb.active {
        border-color: #9333ea;
        opacity: 1;
      }

      .pack-progress-dot {
        transition: all 0.3s ease;
      }

      /* Gallery Grid Styles */
      .gallery-section {
        padding: 3rem 1.5rem;
        max-width: 1400px;
        margin: 0 auto;
      }

      .gallery-grid {
        display: grid;
        grid-template-columns: repeat(auto-fill, minmax(200px, 1fr));
        gap: 1rem;
        margin-top: 2rem;
      }

      .gallery-item {
        position: relative;
        aspect-ratio: 1;
        overflow: hidden;
        border-radius: 0.75rem;
        cursor: pointer;
        transition: transform 0.3s ease, box-shadow 0.3s ease;
        background: rgba(30, 30, 45, 0.6);
        border: 2px solid rgba(147, 51, 234, 0.3);
      }

      .gallery-item:hover {
        transform: scale(1.05);
        box-shadow: 0 10px 30px rgba(147, 51, 234, 0.4);
        border-color: rgba(147, 51, 234, 0.6);
      }

      .gallery-item img {
        width: 100%;
        height: 100%;
        object-fit: cover;
      }

      .gallery-item-overlay {
        position: absolute;
        bottom: 0;
        left: 0;
        right: 0;
        background: linear-gradient(to top, rgba(0, 0, 0, 0.8), transparent);
        padding: 1rem;
        transform: translateY(100%);
        transition: transform 0.3s ease;
      }

      .gallery-item:hover .gallery-item-overlay {
        transform: translateY(0);
      }

      .gallery-item-title {
        color: white;
        font-size: 0.875rem;
        font-weight: 600;
      }

      /* Lightbox Styles */
      .lightbox {
        display: none;
        position: fixed;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        background: rgba(0, 0, 0, 0.95);
        z-index: 1000;
        animation: fadeIn 0.3s ease;
      }

      .lightbox.active {
        display: flex;
        align-items: center;
        justify-content: center;
      }

      @keyframes fadeIn {
        from {
          opacity: 0;
        }
        to {
          opacity: 1;
        }
      }

      .lightbox-content {
        position: relative;
        max-width: 90%;
        max-height: 90%;
        display: flex;
        align-items: center;
        justify-content: center;
      }

      .lightbox-image {
        max-width: 100%;
        max-height: 85vh;
        object-fit: contain;
        border-radius: 0.5rem;
        box-shadow: 0 20px 60px rgba(0, 0, 0, 0.5);
        animation: zoomIn 0.3s ease;
      }

      @keyframes zoomIn {
        from {
          transform: scale(0.9);
          opacity: 0;
        }
        to {
          transform: scale(1);
          opacity: 1;
        }
      }

      .lightbox-caption {
        position: absolute;
        bottom: -40px;
        left: 0;
        right: 0;
        text-align: center;
        color: white;
        font-size: 1rem;
        padding: 0.5rem;
        background: rgba(0, 0, 0, 0.7);
        border-radius: 0.5rem;
      }

      .lightbox-close {
        position: absolute;
        top: 20px;
        right: 40px;
        font-size: 2.5rem;
        color: white;
        cursor: pointer;
        background: rgba(0, 0, 0, 0.5);
        border: none;
        width: 50px;
        height: 50px;
        border-radius: 50%;
        display: flex;
        align-items: center;
        justify-content: center;
        transition: all 0.3s ease;
        z-index: 1001;
      }

      .lightbox-close:hover {
        background: rgba(147, 51, 234, 0.8);
        transform: rotate(90deg);
      }

      .lightbox-nav {
        position: absolute;
        top: 50%;
        transform: translateY(-50%);
        font-size: 3rem;
        color: white;
        cursor: pointer;
        background: rgba(0, 0, 0, 0.5);
        border: none;
        padding: 1rem;
        border-radius: 0.5rem;
        transition: all 0.3s ease;
        z-index: 1001;
      }

      .lightbox-nav:hover {
        background: rgba(147, 51, 234, 0.8);
      }

      .lightbox-prev {
        left: 20px;
      }

      .lightbox-next {
        right: 20px;
      }

      .lightbox-counter {
        position: absolute;
        top: 20px;
        left: 20px;
        color: white;
        background: rgba(0, 0, 0, 0.7);
        padding: 0.5rem 1rem;
        border-radius: 0.5rem;
        font-size: 0.875rem;
      }

      /* Thumbnail strip at bottom of lightbox */
      .lightbox-thumbnails {
        position: absolute;
        bottom: 20px;
        left: 50%;
        transform: translateX(-50%);
        display: flex;
        gap: 0.5rem;
        padding: 0.5rem;
        background: rgba(0, 0, 0, 0.7);
        border-radius: 0.5rem;
        max-width: 80%;
        overflow-x: auto;
      }

      .lightbox-thumbnail {
        width: 60px;
        height: 60px;
        object-fit: cover;
        border-radius: 0.25rem;
        cursor: pointer;
        opacity: 0.6;
        transition: all 0.3s ease;
        border: 2px solid transparent;
      }

      .lightbox-thumbnail:hover {
        opacity: 1;
        transform: scale(1.1);
      }

      .lightbox-thumbnail.active {
        opacity: 1;
        border-color: #9333ea;
      }

      /* Responsive adjustments */
      @media (max-width: 768px) {
        .gallery-grid {
          grid-template-columns: repeat(auto-fill, minmax(150px, 1fr));
          gap: 0.75rem;
        }

        .lightbox-nav {
          font-size: 2rem;
          padding: 0.5rem;
        }

        .lightbox-close {
          top: 10px;
          right: 10px;
          width: 40px;
          height: 40px;
          font-size: 1.5rem;
        }

        .lightbox-thumbnails {
          bottom: 10px;
          max-width: 95%;
        }

        .lightbox-thumbnail {
          width: 40px;
          height: 40px;
        }
      }

      /* Loading spinner for images */
      .gallery-item.loading::after {
        content: "";
        position: absolute;
        top: 50%;
        left: 50%;
        transform: translate(-50%, -50%);
        width: 30px;
        height: 30px;
        border: 3px solid rgba(147, 51, 234, 0.3);
        border-top-color: #9333ea;
        border-radius: 50%;
        animation: spin 1s linear infinite;
      }

      @keyframes spin {
        to {
          transform: translate(-50%, -50%) rotate(360deg);
        }
      }
    </style>
    <script
      src="https://analytics.ahrefs.com/analytics.js"
      data-key="nbbMIaMmoBy8I696zAoHgw"
      async
    ></script>
    <!-- Google tag (gtag.js) -->
    <script
      async
      src="https://www.googletagmanager.com/gtag/js?id=G-78RSLH46CX"
    ></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag() {
        dataLayer.push(arguments);
      }
      gtag("js", new Date());

      gtag("config", "G-78RSLH46CX");
    </script>
    <script src="https://js.stripe.com/v3"></script>
    <script src="/config.js"></script>
  </head>
  <body
    class="bg-gradient-to-br from-purple-900 via-slate-900 to-indigo-900 min-h-screen text-white overflow-x-hidden"
  >
    <!-- Animated Background Blobs -->
    <div class="fixed inset-0 overflow-hidden pointer-events-none">
      <div class="blob w-96 h-96 bg-purple-600 -top-48 -left-48"></div>
      <div
        class="blob w-96 h-96 bg-indigo-600 top-1/2 -right-48"
        style="animation-delay: 5s"
      ></div>
      <div
        class="blob w-96 h-96 bg-pink-600 -bottom-48 left-1/3"
        style="animation-delay: 10s"
      ></div>
    </div>

    <!-- Navigation -->
    <nav
      class="relative z-10 px-6 py-4 lg:px-12"
      role="navigation"
      aria-label="Main navigation"
    >
      <div class="max-w-7xl mx-auto flex justify-between items-center">
        <!-- Left: Brand -->
        <div class="flex items-center space-x-2">
          <i
            class="fas fa-cube text-3xl text-purple-400"
            aria-hidden="true"
          ></i>
          <span class="text-2xl font-bold gradient-text">Toyrender</span>
        </div>

        <!-- Right: Credits + Mini Nav + Auth -->
        <div class="flex items-center gap-3">
          <!-- Credits -->
          <button
            id="creditsBtn"
            class="px-4 py-2 bg-purple-600/30 backdrop-blur-sm rounded-lg border border-purple-500/50 hover:bg-purple-600/50 transition-all"
            aria-label="View available credits"
          >
            <i class="fas fa-coins mr-2" aria-hidden="true"></i>
            <span id="creditsCount">0</span>
            <span id="creditsLabel">Credits</span>
          </button>

          <!-- Tiny Nav (shows from sm and up) -->
          <nav
            class="hidden sm:flex items-center gap-2 text-sm text-purple-200/90"
            aria-label="Quick links"
          >
            <a
              href="/gallery"
              class="px-3 py-1 rounded-md hover:text-white hover:bg-white/10 focus:outline-none focus:ring-2 focus:ring-purple-500"
              >Figurine Gallery</a
            >
            <a
              href="/dating-photos-gallery"
              class="px-3 py-1 rounded-md hover:text-white hover:bg-white/10 focus:outline-none focus:ring-2 focus:ring-purple-500"
              >Dating Photo Gallery</a
            >
            <a
              href="/dating-photos"
              class="px-4 py-2 bg-gradient-to-r from-pink-600 to-red-600 rounded-lg hover:from-pink-700 hover:to-red-700 transition-all transform hover:scale-105 flex items-center"
            >
              <i class="fas fa-heart mr-2"></i>
              <span>Dating Photos</span>
            </a>
            <a
              href="/blog"
              class="px-3 py-1 rounded-md hover:text-white hover:bg-white/10 focus:outline-none focus:ring-2 focus:ring-purple-500"
              >Blog</a
            >
            <a
              href="/faq"
              class="px-3 py-1 rounded-md hover:text-white hover:bg-white/10 focus:outline-none focus:ring-2 focus:ring-purple-500"
              >FAQ</a
            >
            <a
              href="#pricing-title"
              class="px-3 py-1 rounded-md hover:text-white hover:bg-white/10 focus:outline-none focus:ring-2 focus:ring-purple-500"
              >Pricing</a
            >
          </nav>

          <!-- Auth -->
          <button
            id="signInBtn"
            class="px-4 py-2 bg-gradient-to-r from-purple-600 to-pink-600 rounded-lg hover:from-purple-700 hover:to-pink-700 transition-all transform hover:scale-105"
            aria-label="Sign in to your account"
          >
            <i class="fas fa-user-circle mr-2" aria-hidden="true"></i>
            <span id="authBtnText">Sign In</span>
          </button>

          <button
            id="logoutBtn"
            class="hidden px-4 py-2 bg-slate-700 rounded-lg hover:bg-slate-600 transition-all"
            aria-label="Sign out"
          >
            <i class="fas fa-right-from-bracket mr-2"></i><span>Logout</span>
          </button>
        </div>
      </div>
    </nav>

    <!-- Main Content -->
    <main
      class="relative z-10 max-w-7xl mx-auto px-6 lg:px-12 py-12"
      role="main"
    >
      <!-- Hero Section -->
      <section class="text-center mb-16" aria-labelledby="hero-title">
        <h1 id="hero-title" class="text-5xl lg:text-7xl font-bold mb-6">
          <span>Transform Yourself into a</span>
          <span class="gradient-text">Collectible Figurine</span>
        </h1>
        <p class="text-xl text-purple-200 mb-8 max-w-3xl mx-auto">
          Powered by the latest AI Imaging Models, we turn your photos into
          stunning 1:7 scale figurine designs or amazing AI Headshots in
          seconds. Perfect for collectors, gifts, or just for fun!
        </p>
        <div
          class="flex flex-wrap justify-center gap-4 mb-8"
          role="list"
          aria-label="Key features"
        >
          <div
            class="px-6 py-3 bg-purple-800/30 backdrop-blur-sm rounded-full border border-purple-500/50"
            role="listitem"
          >
            <i class="fas fa-bolt mr-2 text-yellow-400" aria-hidden="true"></i
            ><span>Instant Generation</span>
          </div>
          <div
            class="px-6 py-3 bg-purple-800/30 backdrop-blur-sm rounded-full border border-purple-500/50"
            role="listitem"
          >
            <i class="fas fa-magic mr-2 text-purple-400" aria-hidden="true"></i
            ><span>AI-Powered Design</span>
          </div>
          <div
            class="px-6 py-3 bg-purple-800/30 backdrop-blur-sm rounded-full border border-purple-500/50"
            role="listitem"
          >
            <i
              class="fas fa-download mr-2 text-green-400"
              aria-hidden="true"
            ></i
            ><span>High-Res Download</span>
          </div>
        </div>
      </section>

      <!-- Upload Section -->
      <section class="max-w-4xl mx-auto" aria-labelledby="upload-title">
        <div
          class="bg-slate-800/50 backdrop-blur-xl rounded-3xl p-8 lg:p-12 border border-purple-500/30 pulse-glow"
        >
          <div
            id="uploadArea"
            class="border-3 border-dashed border-purple-500/50 rounded-2xl p-12 text-center hover:border-purple-400 transition-all cursor-pointer bg-purple-900/20 hover:bg-purple-900/30"
            role="button"
            tabindex="0"
            aria-label="Upload photo area - click or drag and drop to upload"
          >
            <input
              type="file"
              id="fileInput"
              accept="image/*"
              class="hidden"
              aria-label="Select image file"
            />
            <div class="float-animation inline-block mb-6">
              <i
                class="fas fa-camera text-6xl text-purple-400"
                aria-hidden="true"
              ></i>
            </div>
            <h3 id="upload-title" class="text-2xl font-bold mb-4">
              Upload Your Photo
            </h3>
            <p class="text-purple-300 mb-6">
              Drag & drop your photo here or click to browse
            </p>
            <button
              class="px-8 py-4 bg-gradient-to-r from-purple-600 to-pink-600 rounded-xl text-lg font-semibold hover:from-purple-700 hover:to-pink-700 transition-all transform hover:scale-105 shadow-xl"
              aria-label="Choose photo to upload"
            >
              <i class="fas fa-upload mr-2" aria-hidden="true"></i
              ><span>Choose Photo</span>
            </button>
            <p class="text-sm text-purple-400 mt-4">
              Supports JPG, PNG up to 10MB
            </p>
          </div>

          <!-- Preview Section (Hidden by default) -->
          <div id="previewSection" class="hidden">
            <div class="grid lg:grid-cols-2 gap-8">
              <div>
                <h4 class="text-lg font-semibold mb-3 text-purple-300">
                  Original Photo
                </h4>
                <div class="rounded-xl overflow-hidden bg-black/30">
                  <img
                    id="originalPreview"
                    src=""
                    alt="Original photo uploaded by user"
                    class="max-w-full max-h-full object-contain"
                  />
                </div>
              </div>
              <div>
                <h4 class="text-lg font-semibold mb-3 text-purple-300">
                  Generated Image
                </h4>
                <div
                  id="resultContainer"
                  class="rounded-xl overflow-hidden bg-black/30 h-64 flex items-center justify-center"
                >
                  <div id="loadingSpinner" class="hidden">
                    <i
                      class="fas fa-spinner fa-spin text-4xl text-purple-400"
                    ></i>
                    <p class="mt-4 text-purple-300">Creating your image...</p>
                  </div>
                  <img
                    id="resultPreview"
                    src=""
                    alt="AI-generated figurine design result"
                    class="w-full h-64 object-cover hidden"
                  />
                </div>
              </div>
            </div>
            <div class="mt-8 flex gap-4 justify-center">
              <button
                id="generateBtn"
                class="px-8 py-4 bg-gradient-to-r from-purple-600 to-pink-600 rounded-xl text-lg font-semibold hover:from-purple-700 hover:to-pink-700 transition-all transform hover:scale-105 disabled:opacity-50 disabled:cursor-not-allowed"
              >
                <i class="fas fa-magic mr-2"></i><span>Generate Image(s)</span>
              </button>
              <button
                id="downloadBtn"
                class="hidden px-8 py-4 bg-green-600 rounded-xl text-lg font-semibold hover:bg-green-700 transition-all transform hover:scale-105"
              >
                <i class="fas fa-download mr-2"></i><span>Download</span>
              </button>
              <button
                id="resetBtn"
                class="px-8 py-4 bg-slate-700 rounded-xl text-lg font-semibold hover:bg-slate-600 transition-all"
              >
                <i class="fas fa-redo mr-2"></i><span>Try Another</span>
              </button>
            </div>
          </div>
        </div>
      </section>

      <div id="styleSelectionSection" class="hidden max-w-4xl mx-auto mt-8">
        <div
          class="bg-slate-800/50 backdrop-blur-xl rounded-3xl p-8 border border-purple-500/30"
        >
          <h3 class="text-2xl font-bold mb-2 text-center">Choose Your Style</h3>
          <p class="text-purple-300 text-center mb-6">
            Select how you want your image to be generated
          </p>

          <!-- Style Categories -->
          <div class="space-y-6">
            <!-- Figurine Styles -->
            <div>
              <h4 class="text-lg font-semibold mb-3 text-purple-300">
                <i class="fas fa-cube mr-2"></i>Figurine Styles
              </h4>
              <div class="grid grid-cols-2 md:grid-cols-5 gap-3">
                <button class="style-option active" data-style="figurine1">
                  <i class="fas fa-coffee"></i>
                  <span>Lifestyle Shot</span>
                </button>
                <button class="style-option" data-style="figurine2">
                  <i class="fas fa-desktop"></i>
                  <span>Desk Display</span>
                </button>
                <button class="style-option" data-style="figurine3">
                  <i class="fas fa-flask"></i>
                  <span>Workshop Setup</span>
                </button>
                <button class="style-option" data-style="figurine4">
                  <i class="fas fa-building-columns"></i>
                  <span>Museum Quality</span>
                </button>
                <button class="style-option" data-style="figurine5">
                  <i class="fas fa-store"></i>
                  <span>Retail Window</span>
                </button>
                <button class="style-option" data-style="figurine6">
                  <i class="fas fa-th-large"></i>
                  <span>Display Cabinet</span>
                </button>
                <button class="style-option" data-style="figurine7">
                  <i class="fas fa-video"></i>
                  <span>Unboxing Setup</span>
                </button>
                <button class="style-option" data-style="figurine8">
                  <i class="fas fa-palette"></i>
                  <span>Color Check</span>
                </button>
                <button class="style-option" data-style="figurine9">
                  <i class="fas fa-drafting-compass"></i>
                  <span>Architect Desk</span>
                </button>
                <button class="style-option" data-style="figurine10">
                  <i class="fas fa-broadcast-tower"></i>
                  <span>Livestream Studio</span>
                </button>
              </div>
            </div>

            <!-- Dating Photo Styles -->
            <div>
              <h4 class="text-lg font-semibold mb-3 text-purple-300">
                <i class="fas fa-heart mr-2"></i>Dating Photo Styles
              </h4>
              <div class="grid grid-cols-3 gap-3">
                <button class="style-option" data-style="dating1">
                  <i class="fas fa-bed"></i>
                  <span>Morning Glow</span>
                </button>
                <button class="style-option" data-style="dating2">
                  <i class="fas fa-smile-wink"></i>
                  <span>Playful Charm</span>
                </button>
                <button class="style-option" data-style="dating3">
                  <i class="fas fa-gem"></i>
                  <span>Evening Elegance</span>
                </button>
                <button class="style-option" data-style="dating4">
                  <i class="fas fa-sun"></i>
                  <span>Carefree Summer</span>
                </button>
                <button class="style-option" data-style="dating5">
                  <i class="fas fa-spa"></i>
                  <span>Artistic Sensual</span>
                </button>
                <button class="style-option" data-style="dating6">
                  <i class="fas fa-moon"></i>
                  <span>Confident Intimate</span>
                </button>
              </div>

              <div
                class="mt-4 p-4 bg-gradient-to-r from-pink-900/30 to-red-900/30 rounded-xl border border-pink-500/30"
              >
                <button
                  id="dating9PackBtn"
                  class="w-full style-option"
                  data-style="dating-pack"
                >
                  <div class="flex items-center justify-center gap-3">
                    <i class="fas fa-fire-flame-curved text-2xl"></i>
                    <div>
                      <span class="block text-base font-bold"
                        >Dating Photo Pack</span
                      >
                      <span class="block text-xs text-purple-300 mt-1"
                        >Generate all 6 dating styles at once (uses 6
                        credits)</span
                      >
                    </div>
                    <span
                      class="px-3 py-1 bg-pink-600/50 rounded-full text-sm font-bold"
                      >BEST VALUE</span
                    >
                  </div>
                </button>
              </div>
            </div>

            <!-- Business Headshot Styles -->
            <div>
              <h4 class="text-lg font-semibold mb-3 text-purple-300">
                <i class="fas fa-briefcase mr-2"></i>Business Headshot Styles
              </h4>
              <div class="grid grid-cols-3 gap-3">
                <button class="style-option" data-style="business1">
                  <i class="fas fa-user-tie"></i>
                  <span>Corporate Pro</span>
                </button>
                <button class="style-option" data-style="business2">
                  <i class="fas fa-chart-line"></i>
                  <span>Executive</span>
                </button>
                <button class="style-option" data-style="business3">
                  <i class="fas fa-handshake"></i>
                  <span>Approachable</span>
                </button>
              </div>
            </div>
          </div>

          <!-- Continue Button -->
          <div class="flex justify-center mt-8">
            <button
              id="continueToPreview"
              class="px-8 py-4 bg-gradient-to-r from-purple-600 to-pink-600 rounded-xl text-lg font-semibold hover:from-purple-700 hover:to-pink-700 transition-all transform hover:scale-105"
            >
              <i class="fas fa-arrow-right mr-2"></i>Continue
            </button>
          </div>
        </div>
      </div>

      <!-- Testimonials Examples-->
      <section id="testimonials" class="gallery-section">
        <h2 class="text-2xl font-semibold mb-4 px-6" style="color: white">
          See What Others Created
        </h2>

        <div class="gallery-grid" id="galleryGrid">
          <!-- Gallery items will be populated here -->
        </div>

        <!-- Gallery CTA Buttons -->
        <div class="w-full flex justify-center mt-6 pb-2">
          <div class="flex flex-col sm:flex-row gap-4">
            <a
              href="/gallery"
              class="px-6 py-3 bg-gradient-to-r from-purple-600 to-pink-600 rounded-full font-semibold text-sm tracking-wide hover:from-purple-700 hover:to-pink-700 transition-colors shadow-lg"
            >
              More Figurine Examples →
            </a>
            <a
              href="/dating-photos-gallery"
              class="px-6 py-3 bg-gradient-to-r from-pink-600 to-red-600 rounded-full font-semibold text-sm tracking-wide hover:from-pink-700 hover:to-red-700 transition-colors shadow-lg"
            >
              View Dating Photo Gallery →
            </a>
          </div>
        </div>
      </section>

      <!-- Lightbox Modal -->
      <div id="lightbox" class="lightbox">
        <button class="lightbox-close" onclick="closeLightbox()">
          &times;
        </button>
        <button
          class="lightbox-nav lightbox-prev"
          onclick="navigateLightbox(-1)"
        >
          ‹
        </button>
        <button
          class="lightbox-nav lightbox-next"
          onclick="navigateLightbox(1)"
        >
          ›
        </button>

        <div class="lightbox-counter">
          <span id="currentIndex">1</span> / <span id="totalImages">8</span>
        </div>

        <div class="lightbox-content">
          <img id="lightboxImage" class="lightbox-image" src="" alt="" />
          <div id="lightboxCaption" class="lightbox-caption"></div>
        </div>

        <div class="lightbox-thumbnails" id="lightboxThumbnails">
          <!-- Thumbnails will be populated here -->
        </div>
      </div>

      <!-- Dating Photos CTA Section -->
      <section class="mt-20 text-center max-w-4xl mx-auto">
        <div
          class="bg-gradient-to-br from-pink-900/50 to-red-900/50 backdrop-blur-xl rounded-3xl p-8 lg:p-12 border border-pink-500/30"
        >
          <div class="flex justify-center mb-6">
            <div class="p-4 bg-pink-600/20 rounded-full">
              <i class="fas fa-heart text-5xl text-pink-400"></i>
            </div>
          </div>
          <h2 class="text-3xl lg:text-4xl font-bold mb-4">
            <span class="gradient-text">Level Up Your Dating Game</span>
          </h2>
          <p class="text-xl text-purple-200 mb-8 max-w-2xl mx-auto">
            Transform your dating profile with AI-generated photos that get
            matches. Professional quality images optimized for Tinder, Bumble,
            and Hinge.
          </p>
          <div class="flex flex-wrap justify-center gap-4 mb-8">
            <div
              class="px-4 py-2 bg-pink-800/30 backdrop-blur-sm rounded-full border border-pink-500/50"
            >
              <i class="fas fa-fire mr-2 text-orange-400"></i>
              <span>Tinder Optimized</span>
            </div>
            <div
              class="px-4 py-2 bg-pink-800/30 backdrop-blur-sm rounded-full border border-pink-500/50"
            >
              <i class="fas fa-bee mr-2 text-yellow-400"></i>
              <span>Bumble Ready</span>
            </div>
            <div
              class="px-4 py-2 bg-pink-800/30 backdrop-blur-sm rounded-full border border-pink-500/50"
            >
              <i class="fas fa-link mr-2 text-blue-400"></i>
              <span>Hinge Perfect</span>
            </div>
          </div>
          <a
            href="/dating-photos.html"
            class="inline-flex items-center px-10 py-4 bg-gradient-to-r from-pink-600 to-red-600 rounded-xl text-lg font-semibold hover:from-pink-700 hover:to-red-700 transition-all transform hover:scale-105 shadow-xl"
          >
            <i class="fas fa-camera mr-2"></i>
            <span>Create Your Dating Photos Now</span>
            <i class="fas fa-arrow-right ml-2"></i>
          </a>
          <p class="mt-6 text-sm text-purple-300">
            <i class="fas fa-check-circle mr-2 text-green-400"></i>
            Multiple styles • High-resolution • Instant generation
          </p>
        </div>
      </section>

      <!-- Pricing Section -->
      <section class="mt-20 text-center" aria-labelledby="pricing-title">
        <h2 id="pricing-title" class="text-3xl font-bold mb-12">
          Simple Pricing
        </h2>
        <div
          class="max-w-2xl mx-auto grid md:grid-cols-2 gap-8"
          role="list"
          aria-label="Pricing plans"
        >
          <article
            class="bg-slate-800/50 backdrop-blur-xl rounded-2xl p-8 border border-purple-500/30 flex flex-col"
            role="listitem"
          >
            <h3 class="text-2xl font-bold mb-4">Free Trial</h3>
            <p class="text-4xl font-bold mb-4">$0</p>
            <ul
              class="space-y-3 mb-8 text-left flex-grow"
              role="list"
              aria-label="Free trial features"
            >
              <li role="listitem">
                <i
                  class="fas fa-check text-green-400 mr-2"
                  aria-hidden="true"
                ></i
                ><span>2 Free Generations</span>
              </li>
              <li role="listitem">
                <i
                  class="fas fa-check text-green-400 mr-2"
                  aria-hidden="true"
                ></i
                ><span>High-Resolution Downloads</span>
              </li>
              <li role="listitem">
                <i
                  class="fas fa-check text-green-400 mr-2"
                  aria-hidden="true"
                ></i
                ><span>Watermarked Images</span>
              </li>
            </ul>
            <button
              class="w-full py-3 bg-slate-700 rounded-lg hover:bg-slate-600 transition-all mt-auto"
              aria-label="Start with free trial"
            >
              Get Started
            </button>
          </article>
          <article
            class="bg-gradient-to-br from-purple-800/50 to-pink-800/50 backdrop-blur-xl rounded-2xl p-8 border border-purple-400/50 transform scale-105 flex flex-col"
            role="listitem"
          >
            <div
              class="bg-yellow-500 text-black text-sm font-bold px-3 py-1 rounded-full inline-block mb-4"
            >
              POPULAR
            </div>
            <h3 class="text-2xl font-bold mb-4">Pro Pack</h3>
            <p class="text-4xl font-bold mb-4">$4.99</p>
            <ul
              class="space-y-3 mb-8 text-left flex-grow"
              role="list"
              aria-label="Pro pack features"
            >
              <li role="listitem">
                <i
                  class="fas fa-check text-green-400 mr-2"
                  aria-hidden="true"
                ></i
                ><span>50 Credits to create photos</span>
              </li>
              <li role="listitem">
                <i
                  class="fas fa-check text-green-400 mr-2"
                  aria-hidden="true"
                ></i
                ><span>Priority Processing</span>
              </li>
              <li role="listitem">
                <i
                  class="fas fa-check text-green-400 mr-2"
                  aria-hidden="true"
                ></i
                ><span>Multiple Styles</span>
              </li>
              <li role="listitem">
                <i
                  class="fas fa-check text-green-400 mr-2"
                  aria-hidden="true"
                ></i
                ><span>Commercial Use License</span>
              </li>
            </ul>
            <button
              id="buyCreditsBtn"
              class="w-full py-3 bg-gradient-to-r from-purple-600 to-pink-600 rounded-lg hover:from-purple-700 hover:to-pink-700 transition-all transform hover:scale-105 mt-auto"
              aria-label="Purchase pro pack credits"
            >
              Buy Credits
            </button>
          </article>
        </div>
      </section>
    </main>

    <!-- Payment Modal (Hidden by default) -->
    <div
      id="paymentModal"
      class="hidden fixed inset-0 bg-black/70 backdrop-blur-sm z-50 flex items-center justify-center p-6"
    >
      <div
        class="bg-slate-800 rounded-2xl p-8 max-w-md w-full border border-purple-500/30"
      >
        <h3 class="text-2xl font-bold mb-6">Complete Your Purchase</h3>
        <div class="bg-purple-900/30 rounded-lg p-4 mb-6">
          <p class="text-sm text-purple-300 mb-2">You're purchasing:</p>
          <p class="text-xl font-bold">50 Photo Credits - $4.99</p>
        </div>
        <form id="paymentForm">
          <div class="mb-4">
            <label class="block text-sm font-medium mb-2">Card Number</label>
            <input
              type="text"
              placeholder="1234 5678 9012 3456"
              class="w-full px-4 py-3 bg-slate-700 rounded-lg focus:outline-none focus:ring-2 focus:ring-purple-500"
            />
          </div>
          <div class="grid grid-cols-2 gap-4 mb-4">
            <div>
              <label class="block text-sm font-medium mb-2">Expiry</label>
              <input
                type="text"
                placeholder="MM/YY"
                class="w-full px-4 py-3 bg-slate-700 rounded-lg focus:outline-none focus:ring-2 focus:ring-purple-500"
              />
            </div>
            <div>
              <label class="block text-sm font-medium mb-2">CVV</label>
              <input
                type="text"
                placeholder="123"
                class="w-full px-4 py-3 bg-slate-700 rounded-lg focus:outline-none focus:ring-2 focus:ring-purple-500"
              />
            </div>
          </div>
          <div class="flex gap-4">
            <button
              type="submit"
              class="flex-1 py-3 bg-gradient-to-r from-purple-600 to-pink-600 rounded-lg hover:from-purple-700 hover:to-pink-700 transition-all"
            >
              Pay $4.99
            </button>
            <button
              type="button"
              id="cancelPayment"
              class="flex-1 py-3 bg-slate-700 rounded-lg hover:bg-slate-600 transition-all"
            >
              Cancel
            </button>
          </div>
        </form>
        <p class="text-xs text-purple-400 mt-4 text-center">
          <i class="fas fa-lock mr-1"></i
          ><span>Secure payment powered by Stripe</span>
        </p>
      </div>
    </div>

    <!-- Auth Modal (Sign In / Register) -->
    <!-- Add this to your index.html in the auth modal section (replace the existing authModal div around line 2800) -->

    <!-- Auth Modal (Sign In / Register) -->
    <div
      id="authModal"
      class="hidden fixed inset-0 bg-black/70 backdrop-blur-sm z-50 flex items-center justify-center p-6"
    >
      <div
        class="bg-slate-800 rounded-2xl p-8 max-w-md w-full border border-purple-500/30"
      >
        <h3 class="text-2xl font-bold mb-6" id="authTitle">Sign in</h3>

        <!-- Google Sign-in Button -->
        <button
          id="googleSignInBtn"
          type="button"
          class="google-auth-btn mb-4"
          onclick="window.location.href='/auth/google'"
        >
          <svg
            width="18"
            height="18"
            viewBox="0 0 18 18"
            style="margin-right: 8px"
          >
            <path
              fill="#4285F4"
              d="M17.64 9.2c0-.637-.057-1.251-.164-1.84H9v3.481h4.844c-.209 1.125-.843 2.078-1.796 2.717v2.258h2.908c1.702-1.567 2.684-3.875 2.684-6.615z"
            />
            <path
              fill="#34A853"
              d="M9 18c2.43 0 4.467-.806 5.956-2.18l-2.908-2.259c-.806.54-1.837.86-3.048.86-2.344 0-4.328-1.584-5.036-3.711H.957v2.332C2.438 15.983 5.482 18 9 18z"
            />
            <path
              fill="#FBBC05"
              d="M3.964 10.71c-.18-.54-.282-1.117-.282-1.71s.102-1.17.282-1.71V4.958H.957C.347 6.173 0 7.548 0 9s.348 2.827.957 4.042l3.007-2.332z"
            />
            <path
              fill="#EA4335"
              d="M9 3.58c1.321 0 2.508.454 3.44 1.345l2.582-2.58C13.463.891 11.426 0 9 0 5.482 0 2.438 2.017.957 4.958L3.964 7.29C4.672 5.163 6.656 3.58 9 3.58z"
            />
          </svg>
          Sign in with Google
        </button>

        <!-- Divider -->
        <div class="relative my-6">
          <div class="absolute inset-0 flex items-center">
            <div class="w-full border-t border-slate-600"></div>
          </div>
          <div class="relative flex justify-center text-sm">
            <span class="px-4 bg-slate-800 text-slate-400"
              >Or continue with email</span
            >
          </div>
        </div>

        <form id="authForm" class="space-y-4">
          <div>
            <label class="block text-sm font-medium mb-2">Email</label>
            <input
              id="authEmail"
              type="email"
              required
              class="w-full px-4 py-3 bg-slate-700 rounded-lg focus:outline-none focus:ring-2 focus:ring-purple-500"
            />
          </div>
          <div>
            <label class="block text-sm font-medium mb-2">Password</label>
            <input
              id="authPassword"
              type="password"
              required
              minlength="6"
              class="w-full px-4 py-3 bg-slate-700 rounded-lg focus:outline-none focus:ring-2 focus:ring-purple-500"
            />
          </div>

          <div class="flex gap-3">
            <button
              id="authSubmit"
              type="submit"
              class="flex-1 py-3 bg-gradient-to-r from-purple-600 to-pink-600 rounded-lg hover:from-purple-700 hover:to-pink-700 transition-all"
            >
              Continue
            </button>
            <button
              type="button"
              id="authCancel"
              class="flex-1 py-3 bg-slate-700 rounded-lg hover:bg-slate-600 transition-all"
            >
              Cancel
            </button>
          </div>
        </form>

        <p class="text-sm text-purple-300 mt-4">
          <span id="authToggleText">New here?</span>
          <button id="authToggleBtn" class="underline hover:text-purple-200">
            Create an account
          </button>
        </p>

        <!-- Privacy note -->
        <p class="text-xs text-slate-500 mt-4 text-center">
          By continuing, you agree to our Terms of Service and Privacy Policy
        </p>
      </div>
    </div>

    <!-- Update the JavaScript section to handle Google auth callbacks -->
    <script>
      // Add this to your existing JavaScript section, after the auth modal code

      // Check for Google auth success/error on page load
      window.addEventListener("DOMContentLoaded", async () => {
        const urlParams = new URLSearchParams(window.location.search);

        // Handle Google auth callbacks
        if (urlParams.get("auth_status") === "success") {
          await refreshSession();
          toast("Successfully signed in with Google!");
          // Clean up URL
          window.history.replaceState(
            {},
            document.title,
            window.location.pathname
          );
        } else if (urlParams.get("auth_error") === "google_failed") {
          toast("Google sign-in failed. Please try again.");
          // Clean up URL
          window.history.replaceState(
            {},
            document.title,
            window.location.pathname
          );
        }

        // Handle Stripe checkout cancellation
        if (urlParams.get("checkout_status") === "cancel") {
          toast("Checkout cancelled.");
          window.history.replaceState(
            {},
            document.title,
            window.location.pathname
          );
        }
      });

      // Update the updateAuthUI function to show auth method
      function updateAuthUI() {
        const total = totalCredits();
        $("#creditsCount").textContent = total;
        $("#creditsLabel").textContent = "Credits";

        if (sessionUser) {
          // Check if Google user (you might want to add this info from backend)
          const displayText =
            sessionUser.authMethod === "google"
              ? `${sessionUser.email} (Google)`
              : sessionUser.email;

          $("#authBtnText").textContent = displayText;
          $("#logoutBtn").classList.remove("hidden");
          $("#signInBtn").classList.add("bg-slate-700", "hover:bg-slate-600");
          $("#signInBtn").classList.remove(
            "bg-gradient-to-r",
            "from-purple-600",
            "to-pink-600",
            "hover:from-purple-700",
            "hover:to-pink-700"
          );
        } else {
          $("#authBtnText").textContent = "Sign In";
          $("#logoutBtn").classList.add("hidden");
          $("#signInBtn").classList.remove(
            "bg-slate-700",
            "hover:bg-slate-600"
          );
          $("#signInBtn").classList.add(
            "bg-gradient-to-r",
            "from-purple-600",
            "to-pink-600",
            "hover:from-purple-700",
            "hover:to-pink-700"
          );
        }

        // Visual state if out of credits
        const creditsBtn = $("#creditsBtn");
        if (total <= 0) {
          creditsBtn.classList.add("bg-red-600/30", "border-red-500/50");
          creditsBtn.classList.remove(
            "bg-purple-600/30",
            "border-purple-500/50"
          );
        } else {
          creditsBtn.classList.remove("bg-red-600/30", "border-red-500/50");
          creditsBtn.classList.add("bg-purple-600/30", "border-purple-500/50");
        }
      }

      // Update the credits display to show Google users differently
      $("#creditsBtn").addEventListener("click", () => {
        if (!sessionUser) {
          openAuth("login");
          return;
        }
        const c = credits || {};
        const free = Number(c.free_remaining || 0);
        const paid = Number(c.paid_remaining || 0);
        const total = totalCredits();
        const authType =
          sessionUser.authMethod === "google" ? " (Google Account)" : "";

        toast(
          `Credits${authType} — Total: ${total}${
            free || paid ? ` (free: ${free}, paid: ${paid})` : ""
          }`
        );
      });
    </script>

    <!-- How it works-->
    <!-- Indexable Content Section -->
    <section
      id="how-it-works"
      class="relative z-10 max-w-7xl mx-auto px-6 lg:px-12 mt-16"
    >
      <h2 class="text-3xl lg:text-4xl font-bold mb-6">
        <span class="gradient-text">How Toyrender Works</span> — From Photo to
        Collectible Figurine
      </h2>
      <p class="text-purple-200 max-w-3xl">
        Turn any clear portrait into a stylish figurine concept in seconds.
        Whether you’re into cosplay, gifting, you need some stunning dating
        photos or just want a unique avatar, our AI - Google latest AI Image
        Model Nano Banana - renders a high-resolution design that looks ready
        for display.
      </p>

      <!-- How It Works -->
      <section
        id="learn"
        class="relative z-10 max-w-7xl mx-auto px-6 lg:px-12 mt-16"
      >
        <div class="text-center">
          <h2 class="text-3xl lg:text-4xl font-bold mb-4">
            <span class="gradient-text">How It Works</span> in 3 Simple Steps
          </h2>
          <p class="text-purple-200 max-w-3xl mx-auto">
            Turn any clear portrait into a stylish figurine concept in seconds.
            Our process is designed to be fast, easy, and fun.
          </p>
        </div>

        <!-- Horizontal Step-by-Step Guide -->
        <div class="relative mt-12 grid grid-cols-1 md:grid-cols-3 gap-8">
          <!-- Arrow connecting Step 1 and 2 -->
          <div
            class="hidden md:block absolute top-1/2 left-1/3 transform -translate-x-1/2 -translate-y-1/2 -mt-16 text-purple-500/50"
          >
            <i class="fas fa-arrow-right text-4xl"></i>
          </div>
          <!-- Arrow connecting Step 2 and 3 -->
          <div
            class="hidden md:block absolute top-1/2 right-1/3 transform translate-x-1/2 -translate-y-1/2 -mt-16 text-purple-500/50"
          >
            <i class="fas fa-arrow-right text-4xl"></i>
          </div>

          <!-- Step 1 -->
          <div
            class="bg-slate-800/50 border border-purple-500/30 rounded-xl p-6 flex flex-col items-center text-center"
          >
            <div
              class="flex items-center justify-center w-16 h-16 mb-4 bg-purple-600 rounded-full text-2xl font-bold ring-4 ring-purple-600/30"
            >
              1
            </div>
            <h3 class="text-xl font-semibold mb-2">Upload Photo</h3>
            <p class="text-purple-300 text-sm mb-4">
              Choose a clear, forward-facing photo. JPG or PNG files work best.
            </p>
            <img
              src="/images/PortraitExampleStep1.jpg"
              alt="Upload a clear portrait photo"
              class="rounded-lg w-full bg-black/20"
            />
          </div>

          <!-- Step 2 -->
          <div
            class="bg-slate-800/50 border border-purple-500/30 rounded-xl p-6 flex flex-col items-center text-center"
          >
            <div
              class="flex items-center justify-center w-16 h-16 mb-4 bg-purple-600 rounded-full text-2xl font-bold ring-4 ring-purple-600/30"
            >
              2
            </div>
            <h3 class="text-xl font-semibold mb-2">Generate Design</h3>
            <p class="text-purple-300 text-sm mb-4">
              Our AI gets to work, transforming your image into a figurine
              concept.
            </p>
            <img
              src="/images/PortraitExampleStep3.jpg"
              alt="AI generating the figurine design"
              class="rounded-lg w-full bg-black/20"
            />
          </div>

          <!-- Step 3 -->
          <div
            class="bg-slate-800/50 border border-purple-500/30 rounded-xl p-6 flex flex-col items-center text-center"
          >
            <div
              class="flex items-center justify-center w-16 h-16 mb-4 bg-purple-600 rounded-full text-2xl font-bold ring-4 ring-purple-600/30"
            >
              3
            </div>
            <h3 class="text-xl font-semibold mb-2">Download Result</h3>
            <p class="text-purple-300 text-sm mb-4">
              Save your high-resolution image for personal or commercial use.
            </p>
            <img
              src="/images/PortraitExampleStep2.jpeg"
              alt="Downloading the final high-resolution image"
              class="rounded-lg w-full bg-black/20"
            />
          </div>
        </div>

        <!-- "Styles & Use Cases" and "Licensing" sections would follow here -->
      </section>

      <!-- Styles & Use Cases -->
      <section
        id="styles"
        class="relative z-10 max-w-7xl mx-auto px-6 lg:px-12 mt-16"
      >
        <header class="mb-6">
          <h2 class="text-3xl lg:text-4xl font-bold">
            <span class="gradient-text">Styles &amp; Use Cases</span> — Ideas to
            Try
          </h2>
          <p class="text-purple-200 max-w-3xl mt-2">
            Explore popular themes and practical ways to use your AI figurine
            concept. Click a style, generate your preview, then
            <a href="#pricing-title" class="underline hover:text-purple-300"
              >download in high-res</a
            >.
          </p>
        </header>

        <!-- Use Case Cards -->
        <div class="grid sm:grid-cols-2 lg:grid-cols-3 gap-6 mt-8">
          <!-- Cosplay -->
          <article
            class="bg-slate-800/50 border border-purple-500/30 rounded-xl overflow-hidden"
          >
            <img
              src="/images/CosplayExample.jpg"
              alt="Cosplay AI figurine styles like anime hero, ninja, and mecha"
              class="w-full h-auto object-contain"
              loading="lazy"
              decoding="async"
              width="640"
              height="384"
            />
            <div class="p-5">
              <h3 class="text-xl font-semibold mb-2">
                Cosplay figurine from photo
              </h3>
              <p class="text-purple-200 text-sm">
                Turn your portrait into an <strong>anime hero</strong>, stealthy
                <strong>ninja</strong>, or towering <strong>mecha</strong>.
                Great for con badges, profile art, or posters.
              </p>
            </div>
          </article>

          <!-- Graduation -->
          <article
            class="bg-slate-800/50 border border-purple-500/30 rounded-xl overflow-hidden"
          >
            <img
              src="/images/GraduationExample.jpg"
              alt="Graduation-themed AI figurine concept with cap and gown"
              class="w-full h-auto object-contain"
              loading="lazy"
              decoding="async"
              width="640"
              height="384"
            />
            <div class="p-5">
              <h3 class="text-xl font-semibold mb-2">
                Graduation figurine concept
              </h3>
              <p class="text-purple-200 text-sm">
                Celebrate milestones with a cap-and-gown figurine look. Perfect
                for announcements, thank-you cards, and keepsake prints.
              </p>
            </div>
          </article>

          <!-- Business / LinkedIn -->
          <article
            class="bg-slate-800/50 border border-purple-500/30 rounded-xl overflow-hidden"
          >
            <img
              src="/images/LinkedinBusinessExample.jpg"
              alt="Business or LinkedIn avatar styled as a professional figurine"
              class="w-full h-auto object-contain"
              loading="lazy"
              decoding="async"
              width="640"
              height="384"
            />
            <div class="p-5">
              <h3 class="text-xl font-semibold mb-2">
                Business / LinkedIn avatar
              </h3>
              <p class="text-purple-200 text-sm">
                A polished, brand-friendly figurine avatar for profiles, speaker
                bios, pitch decks, and team pages.
              </p>
            </div>
          </article>

          <!-- Streamer / Gamer -->
          <article
            class="bg-slate-800/50 border border-purple-500/30 rounded-xl overflow-hidden"
          >
            <img
              src="/images/StreamerExample.jpg"
              alt="Streamer or gamer channel art figurine concept"
              class="w-full h-auto object-contain"
              loading="lazy"
              decoding="async"
              width="640"
              height="384"
            />
            <div class="p-5">
              <h3 class="text-xl font-semibold mb-2">
                Streamer / gamer channel art
              </h3>
              <p class="text-purple-200 text-sm">
                Create standout channel art, emotes, and banners with a themed
                figurine concept that matches your vibe.
              </p>
            </div>
          </article>

          <!-- Gift Ideas -->
          <article
            class="bg-slate-800/50 border border-purple-500/30 rounded-xl overflow-hidden"
          >
            <img
              src="/images/GiftIdeasExample.jpg"
              alt="Gift ideas such as anniversaries, birthdays, weddings using AI figurine concepts"
              class="w-full h-auto object-contain"
              loading="lazy"
              decoding="async"
              width="640"
              height="384"
            />
            <div class="p-5">
              <h3 class="text-xl font-semibold mb-2">Gift ideas</h3>
              <p class="text-purple-200 text-sm">
                Thoughtful visuals for <strong>anniversaries</strong>,
                <strong>birthdays</strong>, and <strong>weddings</strong>.
                Print, frame, or share digitally.
              </p>
            </div>
          </article>

          <!-- 3D Printing References -->
          <article
            class="bg-slate-800/50 border border-purple-500/30 rounded-xl overflow-hidden"
          >
            <img
              src="/images/3DPrinterExample.jpg"
              alt="3D printing reference concept derived from AI figurine image"
              class="w-full h-auto object-contain"
              loading="lazy"
              decoding="async"
              width="640"
              height="384"
            />
            <div class="p-5">
              <h3 class="text-xl font-semibold mb-2">3D-printing references</h3>
              <p class="text-purple-200 text-sm">
                We deliver high-resolution <strong>images</strong> (not STL
                files). Use the art as a reference for a 3D artist or printing
                service to model your piece.
              </p>
            </div>
          </article>
        </div>

        <!-- Testimonials-->

        <div class="testimonials-section">
          <h2 class="section-title">
            Customers talking about their figurines images
          </h2>

          <div class="testimonials-grid">
            <div class="testimonial-card">
              <div class="stars">
                <span class="star">★</span>
                <span class="star">★</span>
                <span class="star">★</span>
                <span class="star">★</span>
                <span class="star">★</span>
              </div>
              <p class="testimonial-text">
                "Toyrender is absolutely incredible! I transformed photos of my
                family into collectible figurines that look professional. As a
                designer, I use it to prototype character designs before
                commissioning 3D models. Game changer!"
              </p>
              <div class="customer-info">
                <span class="customer-name">Marcus Chen</span>
                <div class="verified-badge">
                  <div class="verified-icon">✓</div>
                  <span class="verified-text">Verified Purchase</span>
                </div>
              </div>
            </div>

            <div class="testimonial-card">
              <div class="stars">
                <span class="star">★</span>
                <span class="star">★</span>
                <span class="star">★</span>
                <span class="star">★</span>
                <span class="star">★</span>
              </div>
              <p class="testimonial-text">
                "Best gift idea ever! Created figurines of me and my boyfriend
                in different themes - superhero, medieval, cyberpunk. The
                quality blew us away. All our friends want their own now. Worth
                every penny!"
              </p>
              <div class="customer-info">
                <span class="customer-name">Sofia Martinez</span>
                <div class="verified-badge">
                  <div class="verified-icon">✓</div>
                  <span class="verified-text">Verified Purchase</span>
                </div>
              </div>
            </div>

            <div class="testimonial-card">
              <div class="stars">
                <span class="star">★</span>
                <span class="star">★</span>
                <span class="star">★</span>
                <span class="star">★</span>
                <span class="star empty">★</span>
              </div>
              <p class="testimonial-text">
                "Good quality = great results. Initially struggled with lighting
                in my photos, but once I followed the tips, the figurines came
                out stunning. The AI is surprisingly accurate with facial
                features. Support team was very helpful!"
              </p>
              <div class="customer-info">
                <span class="customer-name">Alex Thompson</span>
                <div class="verified-badge">
                  <div class="verified-icon">✓</div>
                  <span class="verified-text">Verified Purchase</span>
                </div>
              </div>
            </div>
          </div>
        </div>

        <!-- Quality Tips -->
        <div class="mt-12">
          <h3 class="text-2xl font-semibold mb-3">Quality Tips</h3>
          <div class="grid md:grid-cols-2 gap-6">
            <div
              class="bg-slate-800/50 border border-green-500/30 rounded-xl p-6"
            >
              <h4 class="font-semibold mb-2">Do this for best results</h4>
              <ul class="list-disc list-inside text-purple-200 space-y-1">
                <li>
                  Good lighting (natural or soft indoor), avoid harsh shadows.
                </li>
                <li>
                  Camera at arm’s length; keep your face centered and sharp.
                </li>
                <li>Face fully visible; neutral or simple background.</li>
                <li>Upload a clear JPG/PNG up to 10&nbsp;MB.</li>
              </ul>
            </div>
            <div
              class="bg-slate-800/50 border border-red-500/30 rounded-xl p-6"
            >
              <h4 class="font-semibold mb-2">What to avoid</h4>
              <ul class="list-disc list-inside text-purple-200 space-y-1">
                <li>Backlight (window behind you) and dim rooms.</li>
                <li>Motion blur or heavy filters/beauty effects.</li>
                <li>Busy backgrounds that hide your outline.</li>
                <li>Shots with little children (currently not allowed).</li>
              </ul>
            </div>
          </div>
          <p class="text-purple-200 mt-6">
            New here? See
            <a href="#how-it-works" class="underline hover:text-purple-300"
              >how it works</a
            >
            or jump to
            <a href="#pricing-title" class="underline hover:text-purple-300"
              >pricing</a
            >.
          </p>
        </div>
      </section>

      <!-- Licensing & Privacy -->
      <div class="mt-12">
        <h3 class="text-2xl font-semibold mb-4">Licensing & privacy</h3>
        <p class="text-purple-200">
          <strong>Ownership:</strong> You own the outputs you generate. The Pro
          Pack includes a commercial-use license; Free Trial results are for
          personal, non-commercial use.
        </p>
        <p class="text-purple-200 mt-3">
          <strong>Rights & restrictions:</strong> Please avoid content that
          infringes on third-party rights (e.g., logos, branded costumes) or
          violates our Terms. For minors, only a parent or legal guardian may
          upload photos.
        </p>
        <p class="text-purple-200 mt-3">
          <strong>Privacy:</strong> Your photos are processed to create the
          render and handled in line with our
          <a href="/privacy.html" class="underline hover:text-purple-300"
            >Privacy Policy</a
          >. We don't publicly share uploads. Avoid submitting sensitive
          imagery.
        </p>
        <p class="text-purple-200 mt-3">
          Have questions? Check our
          <a href="/faq" class="underline hover:text-purple-300">FAQ</a> or
          <a href="/contact" class="underline hover:text-purple-300"
            >contact us</a
          >.
        </p>
      </div>
    </section>

    <!-- FAQ Section-->
    <section
      id="faq"
      class="mt-24 max-w-4xl mx-auto"
      aria-labelledby="faq-title"
    >
      <h2 id="faq-title" class="text-3xl font-bold mb-8">
        Frequently Asked Questions
      </h2>

      <div class="space-y-4">
        <details
          class="group bg-slate-800/50 border border-purple-500/30 rounded-xl p-5"
        >
          <summary class="flex cursor-pointer items-center justify-between">
            <span class="text-lg font-semibold"
              >Do I own the generated figurine design?</span
            >
            <span
              class="ml-4 transition-transform group-open:rotate-180"
              aria-hidden="true"
              >⌄</span
            >
          </summary>
          <div class="mt-3 text-purple-200">
            Yes. With the Pro Pack you receive a commercial-use license for your
            outputs. Free Trial results are for personal, non-commercial use.
          </div>
        </details>

        <details
          class="group bg-slate-800/50 border border-purple-500/30 rounded-xl p-5"
        >
          <summary class="flex cursor-pointer items-center justify-between">
            <span class="text-lg font-semibold"
              >How long does generation take?</span
            >
            <span
              class="ml-4 transition-transform group-open:rotate-180"
              aria-hidden="true"
              >⌄</span
            >
          </summary>
          <div class="mt-3 text-purple-200">
            Usually under a minute; during busy periods it can take a bit
            longer. You’ll see a live status while we create your figurine.
          </div>
        </details>

        <details
          class="group bg-slate-800/50 border border-purple-500/30 rounded-xl p-5"
        >
          <summary class="flex cursor-pointer items-center justify-between">
            <span class="text-lg font-semibold"
              >What image formats and sizes are supported?</span
            >
            <span
              class="ml-4 transition-transform group-open:rotate-180"
              aria-hidden="true"
              >⌄</span
            >
          </summary>
          <div class="mt-3 text-purple-200">
            JPG and PNG up to 10&nbsp;MB work best. For the best results, upload
            a clear, well-lit photo with your face visible.
          </div>
        </details>

        <details
          class="group bg-slate-800/50 border border-purple-500/30 rounded-xl p-5"
        >
          <summary class="flex cursor-pointer items-center justify-between">
            <span class="text-lg font-semibold"
              >What do I receive after generation?</span
            >
            <span
              class="ml-4 transition-transform group-open:rotate-180"
              aria-hidden="true"
              >⌄</span
            >
          </summary>
          <div class="mt-3 text-purple-200">
            A high-resolution image preview of your figurine design with a
            download option. We don’t ship physical figurines at this time.
          </div>
        </details>

        <details
          class="group bg-slate-800/50 border border-purple-500/30 rounded-xl p-5"
        >
          <summary class="flex cursor-pointer items-center justify-between">
            <span class="text-lg font-semibold"
              >Can I choose styles or themes?</span
            >
            <span
              class="ml-4 transition-transform group-open:rotate-180"
              aria-hidden="true"
              >⌄</span
            >
          </summary>
          <div class="mt-3 text-purple-200">
            Yes—pick from preset styles or add your own prompt (e.g., “anime
            hero”, “space explorer”, “graduation outfit”, “cyberpunk”). We’ll
            render your photo in that theme.
          </div>
        </details>

        <details
          class="group bg-slate-800/50 border border-purple-500/30 rounded-xl p-5"
        >
          <summary class="flex cursor-pointer items-center justify-between">
            <span class="text-lg font-semibold">Are my photos private?</span>
            <span
              class="ml-4 transition-transform group-open:rotate-180"
              aria-hidden="true"
              >⌄</span
            >
          </summary>
          <div class="mt-3 text-purple-200">
            We never publicly share your uploads. Photos are used to create your
            result in line with our Privacy Policy. Please avoid uploading
            sensitive images.
          </div>
        </details>

        <details
          class="group bg-slate-800/50 border border-purple-500/30 rounded-xl p-5"
        >
          <summary class="flex cursor-pointer items-center justify-between">
            <span class="text-lg font-semibold"
              >Can I use outputs commercially?</span
            >
            <span
              class="ml-4 transition-transform group-open:rotate-180"
              aria-hidden="true"
              >⌄</span
            >
          </summary>
          <div class="mt-3 text-purple-200">
            Yes with the Pro Pack license. Please don’t use outputs in a way
            that infringes third-party rights (e.g., logos, branded costumes) or
            impersonates others.
          </div>
        </details>

        <details
          class="group bg-slate-800/50 border border-purple-500/30 rounded-xl p-5"
        >
          <summary class="flex cursor-pointer items-center justify-between">
            <span class="text-lg font-semibold"
              >Do credits expire? What if something goes wrong?</span
            >
            <span
              class="ml-4 transition-transform group-open:rotate-180"
              aria-hidden="true"
              >⌄</span
            >
          </summary>
          <div class="mt-3 text-purple-200">
            Credits are tied to your account. If you run into any issue with a
            generation, contact support and we’ll help fix it.
          </div>
        </details>
        <details
          class="group bg-slate-800/50 border border-purple-500/30 rounded-xl p-5"
        >
          <summary class="flex cursor-pointer items-center justify-between">
            <span class="text-lg font-semibold"
              >Do you really use the latest AI Imaging Models? Always?</span
            >
            <span
              class="ml-4 transition-transform group-open:rotate-180"
              aria-hidden="true"
              >⌄</span
            >
          </summary>
          <div class="mt-3 text-purple-200">
            Absolutely! We do adjust our AI Photo Imaging to the best models
            currently vailable.
          </div>
        </details>

        <details
          class="group bg-slate-800/50 border border-purple-500/30 rounded-xl p-5"
        >
          <summary class="flex cursor-pointer items-center justify-between">
            <span class="text-lg font-semibold"
              >Can I 3D-print the result?</span
            >
            <span
              class="ml-4 transition-transform group-open:rotate-180"
              aria-hidden="true"
              >⌄</span
            >
          </summary>
          <div class="mt-3 text-purple-200">
            We currently provide high-resolution images (not STL files). You can
            use the image as reference for a 3D artist or printer. You can
            further upscale the image with AI Image Upscaler.
          </div>
        </details>

        <details
          class="group bg-slate-800/50 border border-purple-500/30 rounded-xl p-5"
        >
          <summary class="flex cursor-pointer items-center justify-between">
            <span class="text-lg font-semibold"
              >Can I upload photos of children or multiple people?</span
            >
            <span
              class="ml-4 transition-transform group-open:rotate-180"
              aria-hidden="true"
              >⌄</span
            >
          </summary>
          <div class="mt-4 text-purple-300">
            Very young Children are currently not possible due to Restriction of
            Google AI Nano Banana Model. Group of Persons are no problem.
          </div>
        </details>

        <details
          class="group bg-slate-800/50 border border-purple-500/30 rounded-xl p-5"
        >
          <summary class="flex cursor-pointer items-center justify-between">
            <span class="text-lg font-semibold">Any content restrictions?</span>
            <span
              class="ml-4 transition-transform group-open:rotate-180"
              aria-hidden="true"
              >⌄</span
            >
          </summary>
          <div class="mt-3 text-purple-200">
            The AI Model does not allow nudity, hateful, or illegal content nor
            young Children. Don’t upload images or prompts that violate rights
            or our Terms.
          </div>
        </details>

        <!-- Newly added extended FAQ items -->
        <details
          class="group bg-slate-800/50 border border-purple-500/30 rounded-xl p-5"
        >
          <summary class="flex cursor-pointer items-center justify-between">
            <span class="text-lg font-semibold"
              >What is the AI Figure Generator?</span
            >
            <span
              class="ml-4 transition-transform group-open:rotate-180"
              aria-hidden="true"
              >⌄</span
            >
          </summary>
          <div class="mt-3 text-purple-200">
            It's our advanced pipeline (powered by Gemini's Nano Banana model)
            that converts a single photo into a collectible-style figurine
            concept with realistic lighting, stylized proportions, and
            presentation packaging mockup.
          </div>
        </details>

        <details
          class="group bg-slate-800/50 border border-purple-500/30 rounded-xl p-5"
        >
          <summary class="flex cursor-pointer items-center justify-between">
            <span class="text-lg font-semibold"
              >What are the technical requirements?</span
            >
            <span
              class="ml-4 transition-transform group-open:rotate-180"
              aria-hidden="true"
              >⌄</span
            >
          </summary>
          <div class="mt-3 text-purple-200">
            Just a modern browser (Chrome, Firefox, Safari, Edge). Enable
            JavaScript and upload a sharp, well‑lit image at least 512×512px. No
            installs or plugins required.
          </div>
        </details>

        <details
          class="group bg-slate-800/50 border border-purple-500/30 rounded-xl p-5"
        >
          <summary class="flex cursor-pointer items-center justify-between">
            <span class="text-lg font-semibold">How is my data protected?</span>
            <span
              class="ml-4 transition-transform group-open:rotate-180"
              aria-hidden="true"
              >⌄</span
            >
          </summary>
          <div class="mt-3 text-purple-200">
            All uploads travel over HTTPS, are processed securely, and are
            periodically purged after generation. We don't sell, publicly
            display, or train custom models on your private photos without
            explicit consent.
          </div>
        </details>

        <details
          class="group bg-slate-800/50 border border-purple-500/30 rounded-xl p-5"
        >
          <summary class="flex cursor-pointer items-center justify-between">
            <span class="text-lg font-semibold"
              >Are there plan or usage limits?</span
            >
            <span
              class="ml-4 transition-transform group-open:rotate-180"
              aria-hidden="true"
              >⌄</span
            >
          </summary>
          <div class="mt-3 text-purple-200">
            Free tier includes a daily generation cap. Upgrading to Max / Pro
            unlocks priority processing and higher (or no) limits. All usage
            must respect our content guidelines—no unlicensed IP or disallowed
            subjects.
          </div>
        </details>

        <details
          class="group bg-slate-800/50 border border-purple-500/30 rounded-xl p-5"
        >
          <summary class="flex cursor-pointer items-center justify-between">
            <span class="text-lg font-semibold"
              >What is your refund policy?</span
            >
            <span
              class="ml-4 transition-transform group-open:rotate-180"
              aria-hidden="true"
              >⌄</span
            >
          </summary>
          <div class="mt-3 text-purple-200">
            Because each successful generation consumes real GPU/API cost,
            completed renders are non-refundable. Please try the free tier first
            to ensure quality matches expectations before upgrading.
          </div>
        </details>
      </div>
    </section>

    <!-- Footer -->
    <footer
      class="relative z-10 mt-20 px-6 py-12 lg:px-12 border-t border-purple-800/30"
      role="contentinfo"
    >
      <div class="max-w-7xl mx-auto text-center">
        <div class="flex items-center justify-center space-x-2 mb-6">
          <i
            class="fas fa-cube text-2xl text-purple-400"
            aria-hidden="true"
          ></i>
          <span class="text-xl font-bold gradient-text">Toyrender</span>
        </div>
        <p class="text-purple-300 mb-6">
          © 2025 Toyrender.com. All rights reserved.
        </p>
        <nav
          class="flex justify-center space-x-6 text-purple-400"
          role="navigation"
          aria-label="Footer navigation"
        >
          <a href="/gallery" class="hover:text-purple-300 transition-colors"
            >Figurine Gallery</a
          >
          <a
            href="/ai-background-remover"
            class="hover:text-purple-300 transition-colors"
            >AI Background Remover</a
          >
          <a
            href="/dating-photos-gallery"
            class="hover:text-purple-300 transition-colors"
            >Dating Photo Gallery</a
          >
          <a href="/blog" class="hover:text-purple-300 transition-colors"
            >Blog</a
          >
          <a href="/terms" class="hover:text-purple-300 transition-colors"
            >Terms</a
          >
          <a href="/privacy" class="hover:text-purple-300 transition-colors"
            >Privacy</a
          >
          <a href="/contact" class="hover:text-purple-300 transition-colors"
            >Contact</a
          >
          <a href="/faq" class="hover:text-purple-300 transition-colors">FAQ</a>
          <a
            href="https://bananabatch.com"
            rel="noopener"
            target="_blank"
            class="hover:text-purple-300 transition-colors"
            >bananabatch.com - batch creating with Nano Banana</a
          >
        </nav>
      </div>
    </footer>

    <script>
      /* ----------------------- Helpers ----------------------- */
      const $ = (sel) => document.querySelector(sel);
      const fetchJSON = async (url, opts = {}) => {
        const res = await fetch(url, { credentials: "include", ...opts });
        let data = null;
        try {
          data = await res.json();
        } catch {}
        if (!res.ok) {
          const msg =
            (data && (data.error || data.message)) ||
            res.statusText ||
            "Request failed";
          const err = new Error(msg);
          err.status = res.status;
          err.data = data;
          throw err;
        }
        return data;
      };
      function toast(msg) {
        alert(msg);
      }

      let selectedStyle = "figurine1";

      // Variable to track if we're doing a pack generation
      let isPackGeneration = false;
      let packResults = [];
      let currentPackIndex = 0;

      // Updated style prompts mapping - 19 total options (10 figurine, 6 dating, 3 business)
      const stylePrompts = {
        // 10 Figurine Styles
        figurine1:
          "Create a 1/7-scale figurine of the person in a coffee-table lifestyle shoot. The figure stands on a round transparent acrylic base (no text) on a terrazzo tabletop. Soft morning light, plants and a book stack in the background. The packaging with flat 2D art sits casually next to it. Editorial, magazine-style composition.",

        figurine2:
          "Create a 1/7 scale commercialized figurine of the characters in the picture, in a realistic style, in a real environment. The figurine is placed on a computer desk. The figurine has a round transparent acrylic base, with no text on the base. The content on the computer screen is a 3D modeling process of this figurine. Next to the computer screen is a toy packaging box, designed in a style reminiscent of high-quality collectible figures, printed with original artwork. The packaging features two-dimensional flat illustrations.",

        figurine3:
          "A professional, hyperrealistic photograph of a meticulously crafted 1/7-scale collectible figurine of this person in a livestream studio. Shotgun mic, key + fill + backlight, chat window blurred on a side monitor. The other monitor shows the 3D sculpt viewport. Box with flat 2D art against an acoustic panel.",

        figurine4:
          "A stunning, cinematic photograph of a 1/7-scale premium collectible figurine of this person showcased within a sleek, high-end boutique retail window at dusk. The figurine is dramatically spotlighted on an elevated, minimalist matte black plinth. The polished window glass reflects blurred, vibrant city lights and upscale architectural details, adding dynamic background texture. A fine, almost invisible antitheft wire secures the figurine, adding a touch of realism. Behind and to the side, a perfectly symmetrical pyramid stack of boxed collectible units, each featuring eye-catching, original flat 2D art, reinforces the product line. The overall lighting is dramatic and luxurious, with strong contrasts and a sophisticated color palette, designed to catch the eye of passersby.",

        figurine5:
          "A professional, hyperrealistic photograph of a meticulously crafted 1/7-scale collectible figurine, positioned centrally on a sleek round transparent acrylic base (no text), resting elegantly on a polished terrazzo tabletop. The scene is bathed in warm, golden hour soft morning light, creating gentle shadows. In the soft-focused background, a lush arrangement of houseplants and a curated stack of hardcover books add depth. The figurine's premium collectible packaging, featuring striking, original flat 2D art, lies artfully and casually next to the base. The overall composition is clean, airy, and high-end editorial, akin to a luxury magazine spread, with a shallow depth of field.",

        figurine6:
          "Create a 1/7-scale figurine of the person in a collector's Detolf cabinet. LED strips top and bottom, other figures blurred on neighboring shelves. One packaging box with flat 2D art sits centered behind.",

        figurine7:
          "A vibrant, nostalgic photograph of a 1/7-scale stylized collectible figurine of the person, standing heroically atop a meticulously crafted, working miniature arcade cabinet from the 1980s. The figurine is positioned on its round transparent acrylic base (no text). The arcade cabinet's screen flickers with bright, pixelated retro game graphics, casting a dynamic, colorful glow onto the figurine and the surrounding area. The setting is a dimly lit, authentic retro arcade environment, with faint reflections of other cabinet screens visible in the background. Scattered around the base of the arcade cabinet are a few vintage arcade tokens and a half-eaten bag of classic candy. A specially designed, retro-themed packaging box, featuring bold, era-appropriate flat 2D art, leans casually against the side of the arcade machine, blending seamlessly with the nostalgic aesthetic. The composition is dynamic, energetic, and rich with period detail, evoking pure 80s/90s nostalgia.",

        figurine8:
          "Create a 1/7-scale figurine of this person on a color-checker backdrop. Include swatch cards, gray card, and a spectrophotometer. Monitor shows node-based look-dev graph of the figurine materials. Packaging stands upright to the right.",

        figurine9: `Prompt: A dramatic, hyperrealistic photograph of a pristine 1/7-scale rare collectible figurine of this person (preserving fur color/markings), presented under focused, museum-style spot lighting in an exclusive auction house preview. The figurine stands on its round transparent acrylic base (no text) atop a dark, polished mahogany display table. Surrounding it are other blurred, high-value collectibles in glass cases, and a subtle velvet rope demarcation. A crisp, minimalist auction catalog, open to the figurine's entry (no legible text), lies nearby. In the deep, soft-focused background, discerning collectors in elegant attire are subtly visible. The lighting is sophisticated and theatrical, emphasizing exclusivity and the figurine's prestige.\nNegatives: "extra limbs, duplicate heads, text, watermark, brand logos, cheap display, messy background, blurred figurine, harsh reflections."\nOptions: "A small, engraved brass lot number tag (digital/printable)", "Subtle, shimmering light reflecting off the figurine's surface."`,

        dating1: `Prompt: A professional, hyperrealistic photograph capturing the person (preserving hair color/style, eye color), lounging intimately on luxurious, slightly rumpled white silk sheets. Her body is artfully draped and partially covered by a soft, oversized white button-down shirt or silk robe, revealing a bare shoulder or leg. She gazes softly towards the camera with a tender, inviting, and slightly playful expression, as if just waking up. Soft, warm, diffused morning sunlight streams through a sheer window, creating a luminous, ethereal glow and gentle highlights on her skin. A single, long-stemmed red rose lies casually on the pillow nearby. The composition is clean, airy, and deeply intimate, evoking a feeling of romantic connection and sensuality, with a shallow depth-of-field.\nNegatives: "extra limbs, duplicate heads, text, watermark, brand logos, messy or dirty sheets, harsh or artificial lighting, aggressive or stressed expression, explicit nudity, unrealistic proportions, visible tattoos (unless specified)."\nOptions: "Woman wearing underwear", "A personalized, handwritten 'love note' (blurred text) casually folded on the bedside table", "A steaming cup of gourmet coffee on a nearby minimalist nightstand."`,

        dating2: `Prompt: An adorable and heartwarming photograph of the person (preserving hair color/style, eye color), with a sweet, playful smile and a hint of charm, playfully peeking over the top of a fluffy, oversized comforter in a brightly lit, cozy bedroom. She is dressed in comfortable yet charming loungewear (e.g., silk camisole, soft knit top). Her eyes sparkle with warmth and affection as she looks directly at the camera. Soft, warm, diffused natural light fills the room, creating an inviting and comfortable atmosphere. Scattered lightly on the comforter are a few delicate rose petals. The background is a tastefully blurred, homey bedroom, perhaps with a sunbeam on a nearby wall. The image conveys affection, tenderness, and a charming playfulness, perfect for a social media share or a personal gift. Negatives: "extra limbs, duplicate heads, text, watermark, brand logos, messy background (beyond soft comfort), harsh lighting, anxious or aggressive expression, unrealistic proportions, visible tattoos (unless specified)." Options: Woman gently blowing a kiss towards the camera (blurred motion); a personalized, small framed photo (blurred image) on a nearby nightstand; a stack of favorite books and a warm beverage nearby.`,

        dating3: `Prompt: A professional, hyperrealistic photograph of the person (preserving hair color/style, eye color), captured in a moment of elegant preparation for an evening out. She is seated or standing gracefully at a luxurious vanity table or in a chic dressing area, perhaps delicately applying lipstick or adjusting a piece of fine jewelry. She wears a sophisticated silk robe or a form-fitting, elegant dress that subtly accentuates her. Her gaze is confident and alluring, meeting her reflection in a softly lit mirror or looking thoughtfully towards the camera. The background features blurred, upscale decor like shimmering perfume bottles, delicate floral arrangements, and rich textures. Soft, warm, indirect lighting (like a vanity light or evening lamp) creates a luxurious glow and intimate highlights, evoking anticipation, with a shallow depth-of-field. Negatives: "extra limbs, duplicate heads, text, watermark, brand logos, messy or cluttered vanity, harsh or unflattering lighting, aggressive or crude pose, unrealistic proportions, visible tattoos (unless specified)." Options: Woman holding a delicate clutch purse; a subtle reflection of a cityscape at dusk in the background mirror; a personalized, elegant note card (blurred text) lying on the vanity.`,

        dating4: `Prompt: An energetic and enchanting photograph of the person (preserving hair color/style, eye color), captured in a moment of playful, lighthearted motion, perhaps twirling gently, tossing her hair back with a laugh, or playfully reaching out towards the camera. She is dressed in a light, flowing summer dress or a soft, denim-and-lace ensemble that moves with her, hinting at her form. The setting is a vibrant, sun-drenched outdoor location, like a blooming garden, a pristine beach with gentle waves, or a cheerful, airy patio. Bright, natural daylight creates sparkling highlights and a joyous, carefree atmosphere. Her expression is genuinely happy, with a flirty smile and sparkling eyes. The background is beautifully blurred, adding to the dynamic and inviting feel, with subtle motion blur on her hair or dress to emphasize movement.\nNegatives: "extra limbs, duplicate heads, text, watermark, brand logos, stiff pose, harsh shadows, explicit nudity, aggressive or crude gestures, unrealistic proportions, visible tattoos (unless specified)."\nOptions: "Woman holding a delicate wildflower bouquet," "Subtle sun flare effect in the background," "A tiny, barely visible anklet or bracelet accessory."`,

        dating5: `Prompt: A sensual and artistic photograph of the person (preserving hair color/style, eye color), captured in an intimate moment of self-reflection or gentle touch. She is sitting or kneeling gracefully, perhaps with her back partially turned, subtly revealing the curve of her back, shoulder, or the delicate line of her neck. Her hair is artfully styled to highlight these areas, perhaps partially undone or swept to one side. She is dressed in a soft, luxurious silk slip or a delicate, unfastened robe. The setting is minimalist and elegant, like a high-end bedroom or a spa-like bathroom, with a large, antique-style mirror in the soft-focused background or as a framing element. Soft, ambient lighting creates gentle contrasts and emphasizes skin texture. The mood is one of serene introspection, quiet beauty, and sophisticated sensuality, with a shallow depth-of-field.\nNegatives: "extra limbs, duplicate heads, text, watermark, brand logos, cluttered background, harsh lighting, aggressive or crude pose, unrealistic proportions, visible tattoos (unless specified)."\nOptions: "A delicate string of pearls or a simple necklace resting on her back," "Subtle steam effect in a bathroom setting," "A single, flickering candle creating a warm glow."`,

        dating6: `Prompt: An intimately captivating, hyperrealistic photograph of a woman (preserving hair color/style, eye color), seated casually yet gracefully on the edge of a bed, dressed in an oversized, soft cotton shirt or a man's unbuttoned dress shirt, subtly revealing a bare shoulder, a glimpse of her back, or the graceful line of her leg. Her hair is beautifully disheveled, as if just woken, and she turns her head slightly towards the camera with a confident, slightly mischievous, and warmly inviting smile. One hand might be playfully running through her hair or resting on her thigh. The luxurious bedding (silk or high-thread-count cotton) is slightly rumpled around her. The scene is bathed in soft, warm, diffused morning light, creating a dreamy, intimate glow. The background is a tastefully blurred bedroom, emphasizing comfort and personal space. The mood is one of relaxed sensuality, approachable charm, and confident vulnerability, with a shallow depth-of-field.\nNegatives: "extra limbs, duplicate heads, text, watermark, brand logos, messy or dirty bedding, harsh or cold lighting, aggressive or crude pose,unrealistic proportions, visible tattoos (unless specified)."\nOptions: "Woman wearing a delicate, minimalist necklace," "A personalized, sleek mug of coffee on a nearby nightstand," "A glimpse of a luxurious robe casually draped over a chair."`,

        // Business Headshot Styles
        business1:
          "Corporate professional headshot. Formal business attire, confident direct gaze, neutral office background, perfect lighting. LinkedIn-optimized portrait. Clean, trustworthy appearance ideal for corporate profiles and professional networking.",

        business2:
          "Executive leadership headshot. Premium suit, authoritative yet approachable expression, modern office or cityscape background. Power pose with crossed arms or thoughtful gesture. High-end photography style for C-suite and senior management profiles.",

        business3:
          "Approachable business headshot. Business casual attire, warm genuine smile, bright modern workspace background. Friendly and collaborative vibe. Perfect for consultants, freelancers, and client-facing professionals on LinkedIn and company websites.",
      };

      // Initialize style selection
      function initStyleSelection() {
        // Handle style option clicks
        document.querySelectorAll(".style-option").forEach((button) => {
          button.addEventListener("click", function () {
            // Remove active from all buttons
            document
              .querySelectorAll(".style-option")
              .forEach((btn) => btn.classList.remove("active"));
            // Add active to clicked button
            this.classList.add("active");
            // Update selected style
            selectedStyle = this.dataset.style;
          });
        });

        document
          .getElementById("dating9PackBtn")
          ?.addEventListener("click", function () {
            // Remove active from all buttons
            document
              .querySelectorAll(".style-option")
              .forEach((btn) => btn.classList.remove("active"));
            // Add active to pack button
            this.classList.add("active");
            selectedStyle = "dating-pack";
            isPackGeneration = true;
          });

        // Handle continue button
        const continueBtn = document.getElementById("continueToPreview");
        if (continueBtn) {
          continueBtn.addEventListener("click", function () {
            document
              .getElementById("styleSelectionSection")
              .classList.add("hidden");
            previewSection.classList.remove("hidden");
          });
        }
      }

      /* ----------------------- Auth & Credits UI ----------------------- */
      let sessionUser = null;
      let credits = {
        free_remaining: 0,
        paid_remaining: 0,
        free_renew_utc: null,
      };

      async function refreshSession() {
        try {
          const r = await fetchJSON("/auth/me");
          sessionUser = r.user;
          credits = r.credits || { remaining: 0 };
        } catch {
          sessionUser = null;
          credits = {
            free_remaining: 0,
            paid_remaining: 0,
            free_renew_utc: null,
          };
        }
        updateAuthUI();
      }

      function totalCredits() {
        const c = credits || {};
        // support all shapes: {remaining} OR {free_remaining, paid_remaining}
        if (typeof c.remaining === "number") return c.remaining;
        const free = Number(c.free_remaining || 0);
        const paid = Number(c.paid_remaining || 0);
        return free + paid;
      }

      // (Removed duplicate updateAuthUI definition; primary version earlier includes Google account labeling)

      /* ----------------------- Auth modal logic ----------------------- */
      const authModal = $("#authModal");
      const authTitle = $("#authTitle");
      const authForm = $("#authForm");
      const authEmail = $("#authEmail");
      const authPass = $("#authPassword");
      const authToggleBtn = $("#authToggleBtn");
      const authToggleText = $("#authToggleText");
      const authCancel = $("#authCancel");

      let authMode = "login"; // or "register"

      function openAuth(mode = "login") {
        authMode = mode;
        authTitle.textContent = mode === "login" ? "Sign in" : "Create account";
        authToggleText.textContent =
          mode === "login" ? "New here?" : "Already have an account?";
        authToggleBtn.textContent =
          mode === "login" ? "Create an account" : "Sign in";
        authEmail.value = "";
        authPass.value = "";
        authModal.classList.remove("hidden");
      }
      function closeAuth() {
        authModal.classList.add("hidden");
      }

      $("#signInBtn").addEventListener("click", () => openAuth("login"));
      $("#logoutBtn").addEventListener("click", async () => {
        try {
          await fetchJSON("/auth/logout", { method: "POST" });
        } catch {}
        await refreshSession();
        toast("Signed out");
      });
      authCancel.addEventListener("click", closeAuth);
      authModal.addEventListener("click", (e) => {
        if (e.target === authModal) closeAuth();
      });
      authToggleBtn.addEventListener("click", () =>
        openAuth(authMode === "login" ? "register" : "login")
      );

      authForm.addEventListener("submit", async (e) => {
        e.preventDefault();
        const payload = {
          email: authEmail.value.trim(),
          password: authPass.value,
        };
        if (!payload.email || !payload.password) return;

        try {
          if (authMode === "login") {
            await fetchJSON("/auth/login", {
              method: "POST",
              headers: { "Content-Type": "application/json" },
              body: JSON.stringify(payload),
            });
            toast("Welcome back!");
          } else {
            await fetchJSON("/auth/register", {
              method: "POST",
              headers: { "Content-Type": "application/json" },
              body: JSON.stringify(payload),
            });
            toast("Account created.");
          }
          closeAuth();
          await refreshSession();
        } catch (err) {
          toast(err.message || "Authentication failed");
        }
      });

      /* ----------------------- Upload & Generate ----------------------- */
      const uploadArea = $("#uploadArea");
      const fileInput = $("#fileInput");
      const previewSection = $("#previewSection");
      const originalPreview = $("#originalPreview");
      const resultPreview = $("#resultPreview");
      const loadingSpinner = $("#loadingSpinner");
      const generateBtn = $("#generateBtn");
      const downloadBtn = $("#downloadBtn");
      const resetBtn = $("#resetBtn");

      let currentFile = null;

      uploadArea.addEventListener("click", () => fileInput.click());
      uploadArea.addEventListener("dragover", (e) => {
        e.preventDefault();
        uploadArea.classList.add("border-purple-400", "bg-purple-900/40");
      });
      uploadArea.addEventListener("dragleave", () => {
        uploadArea.classList.remove("border-purple-400", "bg-purple-900/40");
      });
      uploadArea.addEventListener("drop", (e) => {
        e.preventDefault();
        uploadArea.classList.remove("border-purple-400", "bg-purple-900/40");
        const files = e.dataTransfer.files;
        if (files.length > 0) handleFile(files[0]);
      });
      fileInput.addEventListener("change", (e) => {
        if (e.target.files.length > 0) handleFile(e.target.files[0]);
      });

      function handleFile(file) {
        if (!file.type.startsWith("image/")) {
          toast("Please upload an image file.");
          return;
        }
        if (file.size > 10 * 1024 * 1024) {
          toast("File size must be less than 10MB.");
          return;
        }
        currentFile = file;
        const reader = new FileReader();
        reader.onload = (e) => {
          originalPreview.src = e.target.result;
          uploadArea.classList.add("hidden");
          const styleSection = document.getElementById("styleSelectionSection");
          if (styleSection) styleSection.classList.remove("hidden");
          previewSection.classList.add("hidden");
        };
        reader.readAsDataURL(file);
      }

      // Generate button handler (restored wrapper)

      generateBtn.addEventListener("click", async () => {
        if (!currentFile) {
          toast("Please choose a file first.");
          return;
        }
        if (!sessionUser) {
          openAuth("login");
          return;
        }

        // Check credits based on selection
        const requiredCredits = selectedStyle === "dating-pack" ? 6 : 1;
        if (totalCredits() < requiredCredits) {
          toast(
            `Not enough credits. You need ${requiredCredits} credits for this option.`
          );
          return;
        }

        if (selectedStyle === "dating-pack") {
          // Generate pack of 6 dating photos
          await generateDatingPack();
        } else {
          // Regular single generation
          await generateSingle();
        }
      });

      // Add the missing generateSingle function
      async function generateSingle() {
        // Loading UI
        generateBtn.disabled = true;
        resetBtn.disabled = true;
        loadingSpinner.classList.remove("hidden");
        resultPreview.classList.add("hidden");
        downloadBtn.classList.add("hidden");

        const formData = new FormData();
        formData.append("photo", currentFile);

        // Use the selected style's prompt
        const prompt = stylePrompts[selectedStyle];
        if (!prompt) {
          toast("Selected style not available yet. Please choose another.");
          loadingSpinner.classList.add("hidden");
          generateBtn.disabled = false;
          resetBtn.disabled = false;
          return;
        }
        formData.append("prompt", prompt);

        try {
          const res = await fetch("/api/generate", {
            method: "POST",
            body: formData,
            credentials: "include",
          });

          const data = await res.json().catch(() => ({}));

          if (!res.ok) {
            if (res.status === 401) {
              openAuth("login");
              throw new Error("Please sign in.");
            }
            if (res.status === 402) {
              await refreshSession();
              throw new Error(data.message || "Out of credits.");
            }
            if (res.status === 413) {
              throw new Error("File too large.");
            }
            if (res.status === 429) {
              throw new Error(data.error || "Rate limited or duplicate image.");
            }
            throw new Error(data.error || `HTTP ${res.status}`);
          }

          // Success
          if (data.imageUrl) {
            resultPreview.src = data.imageUrl;
            resultPreview.classList.remove("hidden");
            downloadBtn.classList.remove("hidden");
            // Track which style was used (check if gtag exists)
            if (typeof gtag !== "undefined") {
              gtag("event", "generate_success", {
                style: selectedStyle,
                category: selectedStyle.startsWith("figurine")
                  ? "figurine"
                  : selectedStyle.startsWith("dating")
                  ? "dating"
                  : "business",
              });
            }
          }
          await refreshSession();
        } catch (err) {
          console.error(err);
          toast(err.message || "Generation failed");
        } finally {
          loadingSpinner.classList.add("hidden");
          generateBtn.disabled = false;
          resetBtn.disabled = false;
        }
      }

      // (Removed duplicate generation logic block)

      downloadBtn.addEventListener("click", () => {
        const link = document.createElement("a");
        link.href = resultPreview.src;
        link.download = "toyrender-figurine.png";
        link.click();
      });

      function getStyleName(style) {
        const names = {
          dating1: "Morning Glow",
          dating2: "Playful Charm",
          dating3: "Evening Elegance",
          dating4: "Carefree Summer",
          dating5: "Artistic Sensual",
          dating6: "Confident Intimate",
        };
        return names[style] || style;
      }

      resetBtn.addEventListener("click", () => {
        uploadArea.classList.remove("hidden");
        previewSection.classList.add("hidden");
        document
          .getElementById("styleSelectionSection")
          .classList.add("hidden");

        // Remove pack results container if it exists
        const packContainer = document.getElementById("packResultsContainer");
        if (packContainer) {
          packContainer.remove();
        }

        fileInput.value = "";
        currentFile = null;
        originalPreview.src = "";
        resultPreview.src = "";

        // Reset pack state
        isPackGeneration = false;
        packResults = [];
        currentPackIndex = 0;

        // Reset style selection to figurine1
        selectedStyle = "figurine1";
        document.querySelectorAll(".style-option").forEach((button) => {
          button.classList.remove("active");
          if (button.dataset.style === "figurine1") {
            button.classList.add("active");
          }
        });
      });

      async function generateDatingPack() {
        const datingStyles = [
          "dating1",
          "dating2",
          "dating3",
          "dating4",
          "dating5",
          "dating6",
        ];
        packResults = [];

        // Update UI for pack generation
        generateBtn.disabled = true;
        resetBtn.disabled = true;
        loadingSpinner.classList.remove("hidden");
        resultPreview.classList.add("hidden");
        downloadBtn.classList.add("hidden");

        // Add pack progress indicator
        const progressDiv = document.createElement("div");
        progressDiv.id = "packProgress";
        progressDiv.className = "text-center mt-4";
        progressDiv.innerHTML = `
              <p class="text-purple-300 mb-2">Generating Dating Photo Pack...</p>
              <div class="flex justify-center gap-2">
                ${datingStyles
                  .map(
                    (_, i) =>
                      `<div class="w-8 h-8 rounded-full bg-slate-700 pack-progress-dot" data-index="${i}"></div>`
                  )
                  .join("")}
              </div>
              <p class="text-sm text-purple-400 mt-2">This will use 6 credits total</p>
            `;
        loadingSpinner.appendChild(progressDiv);

        try {
          // Generate each style
          for (let i = 0; i < datingStyles.length; i++) {
            const style = datingStyles[i];
            const dot = progressDiv.querySelector(`[data-index="${i}"]`);
            dot.classList.add("bg-yellow-500", "animate-pulse");

            const formData = new FormData();
            formData.append("photo", currentFile);
            // Use the actual prompt for each style, not the style name
            formData.append("prompt", stylePrompts[style]);

            const res = await fetch("/api/generate", {
              method: "POST",
              body: formData,
              credentials: "include",
            });

            const data = await res.json().catch(() => ({}));

            if (res.ok && data.imageUrl) {
              packResults.push({
                style: style,
                url: data.imageUrl,
                name: getStyleName(style),
              });
              dot.classList.remove("bg-yellow-500", "animate-pulse");
              dot.classList.add("bg-green-500");
            } else {
              dot.classList.remove("bg-yellow-500", "animate-pulse");
              dot.classList.add("bg-red-500");
              // Log error but continue with other generations
              console.error(
                `Failed to generate ${style}:`,
                data.error || res.statusText
              );
            }
          }

          // Show pack results viewer
          if (packResults.length > 0) {
            showPackResults();
          } else {
            toast("Pack generation failed. Please try again.");
          }
          await refreshSession();
        } catch (err) {
          console.error(err);
          toast(err.message || "Pack generation failed");
        } finally {
          loadingSpinner.classList.add("hidden");
          generateBtn.disabled = false;
          resetBtn.disabled = false;
          progressDiv?.remove();
        }
      }

      // COMPLETE REPLACEMENT - This goes in your showPackResults() function

      // Replace your showPackResults() function with this version that matches heights:

      function showPackResults() {
        if (packResults.length === 0) return;

        // Hide spinner and single image elements
        loadingSpinner.classList.add("hidden");
        resultPreview.classList.add("hidden");
        downloadBtn.classList.add("hidden");
        generateBtn.classList.add("hidden");

        // Get the result container
        const resultContainer = document.getElementById("resultContainer");

        // Get the height of the original preview container for matching
        const originalContainer = originalPreview.parentElement;
        const originalHeight = originalContainer.offsetHeight;

        // Set matching height and remove the h-64 class
        resultContainer.classList.remove("h-64");
        resultContainer.className =
          "rounded-xl overflow-hidden bg-black/30 flex flex-col";
        resultContainer.style.height = originalHeight + "px";

        // Build the pack viewer with flex layout to fill the height
        resultContainer.innerHTML = `
    <div class="flex flex-col h-full p-4">
      <!-- Title -->
      <div class="text-center mb-2 flex-shrink-0">
        <h4 class="text-purple-300 font-semibold">Your Dating Photo Pack</h4>
        <p class="text-xs text-purple-400">6 photos generated</p>
      </div>
      
      <!-- Main Image - flex-grow to fill available space -->
      <div class="flex-grow flex items-center justify-center mb-2 min-h-0">
        <img id="packMainImage" 
             src="${packResults[0].url}" 
             alt="${packResults[0].name}"
             class="max-w-full max-h-full object-contain rounded-lg">
      </div>
      
      <!-- Image Name -->
      <div class="text-center mb-2 flex-shrink-0">
        <span id="packImageName" class="text-sm text-purple-300">${
          packResults[0].name
        }</span>
      </div>
      
      <!-- Thumbnails -->
      <div class="grid grid-cols-6 gap-1 flex-shrink-0">
        ${packResults
          .map(
            (r, i) => `
          <button onclick="switchPackImage(${i})" 
                  class="border-2 ${
                    i === 0 ? "border-purple-500" : "border-transparent"
                  } rounded overflow-hidden hover:border-purple-400 transition-colors"
                  data-index="${i}">
            <img src="${r.url}" alt="${i + 1}" class="w-full h-10 object-cover">
          </button>
        `
          )
          .join("")}
      </div>
    </div>
  `;

        // Remove existing pack buttons if any
        const existingButtons = document.getElementById("packDownloadButtons");
        if (existingButtons) existingButtons.remove();

        // Create download buttons
        const packButtons = document.createElement("div");
        packButtons.id = "packDownloadButtons";
        packButtons.className = "flex gap-4 justify-center";
        packButtons.innerHTML = `
    <button onclick="downloadCurrentImage()" 
            class="px-8 py-4 bg-green-600 rounded-xl text-lg font-semibold hover:bg-green-700 transition-all">
      <i class="fas fa-download mr-2"></i>Download Current
    </button>
    <button onclick="downloadAllImages()" 
            class="px-8 py-4 bg-gradient-to-r from-purple-600 to-pink-600 rounded-xl text-lg font-semibold hover:from-purple-700 hover:to-pink-700 transition-all">
      <i class="fas fa-download mr-2"></i>Download All (6)
    </button>
  `;

        generateBtn.parentElement.insertBefore(packButtons, resetBtn);
      }

      // Update the switch function to use Tailwind classes
      window.switchPackImage = function (index) {
        currentPackIndex = index;

        document.querySelectorAll("[data-index]").forEach((btn, i) => {
          if (i === index) {
            btn.classList.add("border-purple-500");
            btn.classList.remove("border-transparent");
          } else {
            btn.classList.remove("border-purple-500");
            btn.classList.add("border-transparent");
          }
        });

        document.getElementById("packMainImage").src = packResults[index].url;
        document.getElementById("packImageName").textContent =
          packResults[index].name;
      };

      window.downloadCurrentImage = function () {
        const current = packResults[currentPackIndex];
        const a = document.createElement("a");
        a.href = current.url;
        a.download = `dating-photo-${currentPackIndex + 1}.png`;
        a.click();
      };

      window.downloadAllImages = async function () {
        for (let i = 0; i < packResults.length; i++) {
          const a = document.createElement("a");
          a.href = packResults[i].url;
          a.download = `dating-photo-${i + 1}.png`;
          a.click();
          await new Promise((r) => setTimeout(r, 300));
        }
      };

      resetBtn.addEventListener("click", () => {
        // Reset file input and current file
        fileInput.value = "";
        currentFile = null;
        originalPreview.src = "";

        // Hide preview section and style selection
        previewSection.classList.add("hidden");
        const styleSection = document.getElementById("styleSelectionSection");
        if (styleSection) {
          styleSection.classList.add("hidden");
        }

        // Show upload area
        uploadArea.classList.remove("hidden");

        // Remove pack download buttons if they exist
        const packButtons = document.getElementById("packDownloadButtons");
        if (packButtons) {
          packButtons.remove();
        }

        // IMPORTANT: Restore the result container to its original state
        const resultContainer = document.getElementById("resultContainer");
        resultContainer.className =
          "rounded-xl overflow-hidden bg-black/30 h-64 flex items-center justify-center";
        resultContainer.style.height = ""; // Clear any inline height
        resultContainer.innerHTML = `
    <div id="loadingSpinner" class="hidden">
      <i class="fas fa-spinner fa-spin text-4xl text-purple-400"></i>
      <p class="mt-4 text-purple-300">Creating your image...</p>
    </div>
    <img id="resultPreview" src="" alt="AI-generated figurine design result" 
         class="w-full h-64 object-cover hidden" />
  `;

        // CRITICAL: Re-get references to the newly created elements
        loadingSpinner = document.getElementById("loadingSpinner");
        resultPreview = document.getElementById("resultPreview");

        // Reset button states
        generateBtn.classList.remove("hidden");
        generateBtn.disabled = false;
        downloadBtn.classList.add("hidden");

        // Reset pack state
        isPackGeneration = false;
        packResults = [];
        currentPackIndex = 0;

        // Reset style selection to default
        selectedStyle = "figurine1";
        document.querySelectorAll(".style-option").forEach((button) => {
          button.classList.remove("active");
          if (button.dataset.style === "figurine1") {
            button.classList.add("active");
          }
        });
      });

      /* ----------------------- Init ----------------------- */
      // Initialize on DOM load
      document.addEventListener("DOMContentLoaded", function () {
        initStyleSelection();
      });
      refreshSession();

      /* ----------------- Testimonials drag code ----------------- */
      const galleryData = [
        {
          src: "/images/Example1.jpg",
          alt: "Customer figurine example 1",
          caption:
            '"Amazing quality! Turned my photo with my grandma into a figurine that looks simply awesome. My family loves it!" — Sarah M.',
        },
        {
          src: "/images/Example2.jpg",
          alt: "Young Woman creating a Figurine of herself",
          caption:
            '"Creating a figurine of myself! Crazy, isnt it?! Super fast generation!" — Mia R.',
        },
        {
          src: "/images/Example3.jpg",
          alt: "Customer figurine example 3",
          caption:
            '"Used this for my LinkedIn profile makeover. The business pro figurine gives my profile a unique, memorable touch!" — Jennifer L.',
        },
        {
          src: "/images/Example4.jpg",
          alt: "Customer figurine example 4",
          caption:
            '"Best gift ever for my birthday! My wife loved the figurine design. It\'s now framed in our living room!" — David K.',
        },
        {
          src: "/images/Example5.jpg",
          alt: "Customer figurine example 5",
          caption:
            '"Created a set of Figurines of myself in shape for my girl friend. She went immediately to a 3D Publisher with the image! Great quality output." — Robert H.',
        },
        {
          src: "/images/Example6.jpg",
          alt: "Marriage figurine example image",
          caption:
            '"Our Marriage Photo figurines turned out incredible! Worth every penny!" — Emily R.',
        },
        {
          src: "/images/Example7.jpg",
          alt: "Flamenco Dancer figurine example",
          caption: '"Olé! Viva el Flamenco y los Figurines!" — Maria L.',
        },
        {
          src: "/images/Example8.jpg",
          alt: "Party Woman in Bikini figurine example",
          caption:
            '"Amazing photo of me in Bikini - used it in Tinder and Bumble!" — Jenny A.',
        },
        {
          src: "/images/Example9.jpg",
          alt: "Couple in summer clothes as AI Figurine",
          caption:
            '"Perfect for our anniversary! Good summer vibes memories was exactly what I was looking for. Super fast generation too!" — Mike T.',
        },
        {
          src: "/images/Example10.jpg",
          alt: "Woman in White Dress as Figurine in an Art Museum",
          caption:
            '"Amazing photo of me exposed in an art museum! Stunning! — Elisa A.',
        },
        {
          src: "/images/Example11.jpg",
          alt: "",
          caption:
            '"Amazing photo of me exposed in an art museum! Stunning! — Elisa A.',
        },
        {
          src: "/images/Example12.jpg",
          alt: "",
          caption:
            '"Amazing photo of me exposed in an art museum! Stunning! — Elisa A.',
        },
        {
          src: "/images/Example13.jpg",
          alt: "",
          caption:
            '"Amazing photo of me exposed in an art museum! Stunning! — Elisa A.',
        },
        {
          src: "/images/Example14.jpg",
          alt: "",
          caption:
            '"Amazing photo of me exposed in an art museum! Stunning! — Elisa A.',
        },
        {
          src: "/images/Example15.jpg",
          alt: "",
          caption:
            '"Amazing photo of me exposed in an art museum! Stunning! — Elisa A.',
        },
      ];

      let currentImageIndex = 0;

      // Initialize gallery
      function initGallery() {
        const galleryGrid = document.getElementById("galleryGrid");

        galleryData.forEach((item, index) => {
          const galleryItem = document.createElement("div");
          galleryItem.className = "gallery-item loading";
          galleryItem.onclick = () => openLightbox(index);

          const img = document.createElement("img");
          img.src = item.src;
          img.alt = item.alt;
          img.loading = "lazy";
          img.onload = () => galleryItem.classList.remove("loading");

          const overlay = document.createElement("div");
          overlay.className = "gallery-item-overlay";
          overlay.innerHTML = `<div class="gallery-item-title">Example ${
            index + 1
          }</div>`;

          galleryItem.appendChild(img);
          galleryItem.appendChild(overlay);
          galleryGrid.appendChild(galleryItem);
        });

        // Initialize lightbox thumbnails
        const thumbnailsContainer =
          document.getElementById("lightboxThumbnails");
        galleryData.forEach((item, index) => {
          const thumb = document.createElement("img");
          thumb.src = item.src;
          thumb.alt = item.alt;
          thumb.className = "lightbox-thumbnail";
          thumb.onclick = () => goToImage(index);
          thumbnailsContainer.appendChild(thumb);
        });
      }

      // Lightbox functions
      function openLightbox(index) {
        currentImageIndex = index;
        updateLightbox();
        document.getElementById("lightbox").classList.add("active");
        document.body.style.overflow = "hidden";
      }

      function closeLightbox() {
        document.getElementById("lightbox").classList.remove("active");
        document.body.style.overflow = "";
      }

      function navigateLightbox(direction) {
        currentImageIndex += direction;
        if (currentImageIndex < 0) currentImageIndex = galleryData.length - 1;
        if (currentImageIndex >= galleryData.length) currentImageIndex = 0;
        updateLightbox();
      }

      function goToImage(index) {
        currentImageIndex = index;
        updateLightbox();
      }

      function updateLightbox() {
        const current = galleryData[currentImageIndex];
        document.getElementById("lightboxImage").src = current.src;
        document.getElementById("lightboxImage").alt = current.alt;
        document.getElementById("lightboxCaption").textContent =
          current.caption;
        document.getElementById("currentIndex").textContent =
          currentImageIndex + 1;
        document.getElementById("totalImages").textContent = galleryData.length;

        // Update thumbnail highlights
        const thumbs = document.querySelectorAll(".lightbox-thumbnail");
        thumbs.forEach((thumb, index) => {
          thumb.classList.toggle("active", index === currentImageIndex);
        });
      }

      // Keyboard navigation
      document.addEventListener("keydown", (e) => {
        if (document.getElementById("lightbox").classList.contains("active")) {
          if (e.key === "Escape") closeLightbox();
          if (e.key === "ArrowLeft") navigateLightbox(-1);
          if (e.key === "ArrowRight") navigateLightbox(1);
        }
      });

      // Click outside to close
      document.getElementById("lightbox").addEventListener("click", (e) => {
        if (e.target === e.currentTarget) closeLightbox();
      });

      // Initialize on load
      document.addEventListener("DOMContentLoaded", initGallery);

      // ---- Stripe init (must come before using `stripe`) ----
      if (!window.Stripe) {
        console.error("Stripe.js failed to load");
      }
      if (!window.STRIPE_PK) {
        console.error("Missing publishable key from /config.js");
      }
      const stripe = Stripe(window.STRIPE_PK);

      // STRIPE INTEGRATION

      document
        .getElementById("buyCreditsBtn")
        .addEventListener("click", async () => {
          try {
            if (!sessionUser) {
              openAuth("login");
              return;
            }
            const data = await fetchJSON("/api/payments/checkout", {
              method: "POST",
            });

            // Prefer the hosted URL (bypasses any Stripe.js issues/ad-blockers)
            if (data?.url) {
              window.location.assign(data.url);
              return;
            }
            // Fallback to Stripe.js
            if (data?.id) {
              const { error } = await stripe.redirectToCheckout({
                sessionId: data.id,
              });
              if (error)
                throw new Error(error.message || "Checkout could not start.");
              return;
            }

            throw new Error("No checkout URL or session id from server.");
          } catch (e) {
            console.error("Checkout failed:", e);
            toast(e.message || "Failed to start checkout.");
          }
        });
    </script>
  </body>
</html>
