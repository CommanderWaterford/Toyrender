<!DOCTYPE html>
<html lang="es">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>
      Generador de Figuras con IA – Convierte Fotos en Figuras Coleccionables
    </title>

    <!-- SEO Meta Tags -->
    <meta
      name="description"
      content="Transforma tus fotos en impresionantes figuras coleccionables usando tecnología avanzada de IA. Crea diseños de figuras a escala 1:7 en segundos. Perfecto para coleccionistas, regalos y uso personal."
    />
    <meta
      name="keywords"
      content="figura IA, figuras coleccionables, foto a figura, figura 3D, figuras personalizadas, arte IA, coleccionables digitales, figuras personalizadas, render de juguete, diseño de figura"
    />
    <meta name="author" content="Toyrender.com" />
    <meta name="robots" content="index, follow" />
    <meta name="language" content="es" />
    <meta name="revisit-after" content="7 days" />

    <!-- Canonical URL -->
    <link rel="canonical" href="https://toyrender.com/es/" />
    <!-- Language Alternates -->
    <link rel="alternate" hreflang="es" href="https://toyrender.com/es/" />
    <link rel="alternate" hreflang="en" href="https://toyrender.com/" />
    <link rel="alternate" hreflang="x-default" href="https://toyrender.com/" />

    <!-- Open Graph Meta Tags -->
    <meta property="og:type" content="website" />
    <meta
      property="og:title"
      content="Toyrender.com - Transforma Tus Fotos en Figuras Coleccionables"
    />
    <meta
      property="og:description"
      content="Transforma tus fotos en impresionantes figuras coleccionables usando tecnología avanzada de IA. Crea diseños de figuras a escala 1:7 en segundos."
    />
    <meta property="og:url" content="https://toyrender.com/es/" />
    <meta property="og:site_name" content="Toyrender" />
    <meta property="og:image" content="https://toyrender.com/og-image.jpg" />
    <meta property="og:image:width" content="1200" />
    <meta property="og:image:height" content="630" />
    <meta
      property="og:image:alt"
      content="Servicio de transformación de figuras impulsado por IA"
    />
    <meta property="og:locale" content="es_ES" />
    <meta name="msvalidate.01" content="F4F1FB69A98B092B32B64CAE7FA3EE25" />

    <!-- Twitter Card Meta Tags -->
    <meta name="twitter:card" content="summary_large_image" />
    <meta
      name="twitter:title"
      content="Toyrender.com - Transforma Tus Fotos en Figuras Coleccionables"
    />
    <meta
      name="twitter:description"
      content="Transforma tus fotos en impresionantes figuras coleccionables usando tecnología avanzada de IA. Crea diseños de figuras a escala 1:7 en segundos."
    />
    <meta name="twitter:image" content="https://toyrender.com/og-image.jpg" />
    <meta
      name="twitter:image:alt"
      content="Servicio de transformación de figuras impulsado por IA"
    />

    <!-- Additional SEO Meta Tags -->
    <meta name="theme-color" content="#9333ea" />
    <meta name="msapplication-TileColor" content="#9333ea" />
    <meta name="apple-mobile-web-app-capable" content="yes" />
    <meta
      name="apple-mobile-web-app-status-bar-style"
      content="black-translucent"
    />
    <meta name="apple-mobile-web-app-title" content="Toyrender" />

    <!-- Preload Critical Resources -->
    <link rel="preload" href="https://cdn.tailwindcss.com" as="script" />
    <link
      rel="preload"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css"
      as="style"
    />

    <!-- JSON-LD Structured Data -->
    <script type="application/ld+json">
      {
        "@context": "https://schema.org",
        "@graph": [
          {
            "@type": "Organization",
            "@id": "https://toyrender.com/#organization",
            "name": "Toyrender",
            "url": "https://toyrender.com/es/",
            "logo": {
              "@type": "ImageObject",
              "url": "https://toyrender.com/logo.png",
              "width": 200,
              "height": 200
            },
            "description": "Servicio impulsado por IA que transforma fotos en figuras coleccionables",
            "foundingDate": "2024",
            "sameAs": [
              "https://twitter.com/toyrender",
              "https://facebook.com/toyrender"
            ]
          },
          {
            "@type": "WebApplication",
            "@id": "https://toyrender.com/es/#webapp",
            "name": "Generador de Figuras Toyrender",
            "url": "https://toyrender.com/es/",
            "description": "Transforma tus fotos en impresionantes figuras coleccionables usando tecnología avanzada de IA",
            "applicationCategory": "MultimediaApplication",
            "operatingSystem": "Web Browser",
            "offers": [
              {
                "@type": "Offer",
                "name": "Prueba Gratuita",
                "price": "0",
                "priceCurrency": "USD",
                "description": "2 Generaciones de Figuras Gratis con Descargas en Alta Resolución"
              },
              {
                "@type": "Offer",
                "name": "Paquete Pro",
                "price": "5",
                "priceCurrency": "USD",
                "description": "10 Generaciones de Figuras con Procesamiento Prioritario y Licencia de Uso Comercial"
              }
            ],
            "featureList": [
              "Diseño Impulsado por IA",
              "Generación Instantánea",
              "Descargas en Alta Resolución",
              "Múltiples Estilos",
              "Licencia de Uso Comercial"
            ]
          },
          {
            "@type": "Product",
            "@id": "https://toyrender.com/es/#product",
            "name": "Servicio de Generación de Figuras con IA",
            "description": "Transforma fotos en figuras coleccionables usando tecnología avanzada de IA",
            "brand": {
              "@type": "Brand",
              "name": "Toyrender"
            },
            "category": "Servicio de Arte Digital",
            "offers": {
              "@type": "AggregateOffer",
              "lowPrice": "0",
              "highPrice": "7.99",
              "priceCurrency": "USD",
              "offerCount": "2"
            }
          },
          {
            "@type": "WebSite",
            "@id": "https://toyrender.com/es/#website",
            "url": "https://toyrender.com/es/",
            "name": "Toyrender",
            "description": "Servicio de transformación de figuras impulsado por IA",
            "publisher": {
              "@id": "https://toyrender.com/#organization"
            },
            "potentialAction": {
              "@type": "SearchAction",
              "target": "https://toyrender.com/es/search?q={search_term_string}",
              "query-input": "required name=search_term_string"
            }
          }
        ]
      }
    </script>

    <!-- FAQ JSON-LD Structured Data -->
    <script type="application/ld+json">
      {
        "@context": "https://schema.org",
        "@type": "FAQPage",
        "mainEntity": [
          {
            "@type": "Question",
            "name": "¿Soy dueño del diseño de la figura generada?",
            "acceptedAnswer": {
              "@type": "Answer",
              "text": "Sí. Con el Paquete Pro recibes una licencia de uso comercial para tus creaciones. Los resultados de la Prueba Gratuita son para uso personal y no comercial."
            }
          },
          {
            "@type": "Question",
            "name": "¿Cuánto tarda la generación?",
            "acceptedAnswer": {
              "@type": "Answer",
              "text": "Normalmente menos de un minuto; durante periodos de alta demanda puede tardar un poco más. Verás un estado en tiempo real mientras creamos tu figura."
            }
          },
          {
            "@type": "Question",
            "name": "¿Qué formatos y tamaños de imagen se admiten?",
            "acceptedAnswer": {
              "@type": "Answer",
              "text": "JPG y PNG de hasta 10 MB funcionan mejor. Para obtener los mejores resultados, sube una foto nítida y bien iluminada con tu rostro visible."
            }
          },
          {
            "@type": "Question",
            "name": "¿Qué recibo después de la generación?",
            "acceptedAnswer": {
              "@type": "Answer",
              "text": "Una vista previa en alta resolución del diseño de tu figura con una opción de descarga. No enviamos figuras físicas por el momento."
            }
          },
          {
            "@type": "Question",
            "name": "¿Puedo elegir estilos o temas?",
            "acceptedAnswer": {
              "@type": "Answer",
              "text": "Sí, por supuesto. Renderizaremos tu foto en siete estilos predefinidos con el Paquete Pro."
            }
          },
          {
            "@type": "Question",
            "name": "¿Son privadas mis fotos?",
            "acceptedAnswer": {
              "@type": "Answer",
              "text": "Absolutamente. Nunca compartimos públicamente tus subidas. Las fotos se utilizan para crear tu resultado de acuerdo con nuestra Política de Privacidad. Por favor, evita subir imágenes sensibles."
            }
          },
          {
            "@type": "Question",
            "name": "¿Puedo usar las creaciones comercialmente?",
            "acceptedAnswer": {
              "@type": "Answer",
              "text": "Sí, con la licencia del Paquete Pro. Por favor, no utilices las creaciones de una manera que infrinja los derechos de terceros (p. ej., logotipos, disfraces de marca) o suplante a otros."
            }
          },
          {
            "@type": "Question",
            "name": "¿Expiran los créditos? ¿Qué pasa si algo sale mal?",
            "acceptedAnswer": {
              "@type": "Answer",
              "text": "Los créditos están vinculados a tu cuenta. Si tienes algún problema con una generación, contacta con soporte y te ayudaremos a solucionarlo."
            }
          },
          {
            "@type": "Question",
            "name": "¿Puedo imprimir el resultado en 3D?",
            "acceptedAnswer": {
              "@type": "Answer",
              "text": "Actualmente proporcionamos imágenes de alta resolución (no archivos STL). Puedes usar la imagen como referencia para un artista o impresora 3D."
            }
          },
          {
            "@type": "Question",
            "name": "¿Puedo subir fotos de niños o de varias personas?",
            "acceptedAnswer": {
              "@type": "Answer",
              "text": "Funciona mejor con una sola persona, pero los grupos también son posibles. Para menores, solo un padre o tutor legal puede subir fotos."
            }
          },
          {
            "@type": "Question",
            "name": "¿Hay restricciones de contenido?",
            "acceptedAnswer": {
              "@type": "Answer",
              "text": "No permitimos desnudez, contenido de odio o ilegal. Por el momento, tampoco se permiten bebés y niños pequeños. No subas imágenes o prompts que violen derechos o nuestros Términos."
            }
          }
        ]
      }
    </script>

    <script src="https://cdn.tailwindcss.com"></script>
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css"
    />
    <style>
      @keyframes float {
        0%,
        100% {
          transform: translateY(0px) rotate(0deg);
        }
        50% {
          transform: translateY(-20px) rotate(5deg);
        }
      }
      @keyframes pulse-glow {
        0%,
        100% {
          box-shadow: 0 0 20px rgba(147, 51, 234, 0.5);
        }
        50% {
          box-shadow: 0 0 40px rgba(147, 51, 234, 0.8);
        }
      }
      .float-animation {
        animation: float 6s ease-in-out infinite;
      }
      .pulse-glow {
        animation: pulse-glow 2s ease-in-out infinite;
      }
      .gradient-text {
        background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
        -webkit-background-clip: text;
        -webkit-text-fill-color: transparent;
        background-clip: text;
      }
      .blob {
        position: absolute;
        border-radius: 50%;
        filter: blur(70px);
        opacity: 0.6;
        animation: float 20s ease-in-out infinite;
      }
      /* Testimonials horizontal scroll */
      @keyframes marquee {
        0% {
          transform: translateX(0);
        }
        100% {
          transform: translateX(-50%);
        }
      }
      .scroll-container {
        will-change: transform;
        animation: marquee 40s linear infinite;
      }
      .scroll-container:hover {
        animation-play-state: paused;
      }
      @media (prefers-reduced-motion: reduce) {
        .scroll-container {
          animation: none;
        }
      }

      /* Hide scrollbar but keep scrollability */
      .no-scrollbar::-webkit-scrollbar {
        display: none;
      }
      .no-scrollbar {
        -ms-overflow-style: none;
        scrollbar-width: none;
      }

      /* Make native scrolling feel snappy & momentum-y */
      .testimonial-track {
        scroll-behavior: smooth;
        -webkit-overflow-scrolling: touch;
        overscroll-behavior-x: contain;
        will-change: scroll-position;
      }
      .testimonial-track.dragging {
        cursor: grabbing !important;
      }

      .testimonial-track.auto-scrolling {
        scroll-snap-type: none;
      }

      .testimonials-section {
        width: 100%;
        max-width: 1400px;
        margin: 0 auto;
      }

      .section-title {
        color: white;
        font-size: clamp(2rem, 5vw, 3.5rem);
        font-weight: 700;
        text-align: center;
        margin-bottom: 60px;
        line-height: 1.2;
      }

      .testimonials-grid {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(350px, 1fr));
        gap: 30px;
        padding: 0 20px;
      }

      .testimonial-card {
        background: rgba(30, 30, 45, 0.6);
        backdrop-filter: blur(10px);
        border: 2px solid;
        border-image: linear-gradient(135deg, #ff6b6b, #ff8e53, #feca57) 1;
        border-radius: 20px;
        padding: 35px 30px;
        position: relative;
        transition: transform 0.3s ease, box-shadow 0.3s ease;
      }

      .testimonial-card::before {
        content: "";
        position: absolute;
        inset: -2px;
        border-radius: 20px;
        padding: 2px;
        background: linear-gradient(135deg, #ff6b6b, #ff8e53, #feca57);
        -webkit-mask: linear-gradient(#fff 0 0) content-box,
          linear-gradient(#fff 0 0);
        mask: linear-gradient(#fff 0 0) content-box, linear-gradient(#fff 0 0);
        -webkit-mask-composite: xor;
        mask-composite: exclude;
        opacity: 0.7;
      }

      .testimonial-card:hover {
        transform: translateY(-5px);
        box-shadow: 0 20px 40px rgba(255, 107, 107, 0.2);
      }

      .stars {
        display: flex;
        gap: 4px;
        margin-bottom: 20px;
      }

      .star {
        font-size: 20px;
        color: #ffd700;
      }

      .star.empty {
        color: #4a4a5e;
      }

      .testimonial-text {
        color: #e0e0e0;
        font-size: 17px;
        line-height: 1.7;
        margin-bottom: 30px;
        min-height: 120px;
      }

      .customer-info {
        display: flex;
        align-items: center;
        justify-content: space-between;
        margin-top: auto;
      }

      .customer-name {
        color: white;
        font-size: 18px;
        font-weight: 600;
      }

      .verified-badge {
        display: flex;
        align-items: center;
        gap: 6px;
        background: rgba(76, 175, 80, 0.15);
        padding: 5px 12px;
        border-radius: 20px;
        border: 1px solid rgba(76, 175, 80, 0.3);
      }

      .verified-icon {
        width: 14px;
        height: 14px;
        background: #4caf50;
        border-radius: 50%;
        display: flex;
        align-items: center;
        justify-content: center;
        color: white;
        font-size: 10px;
        font-weight: bold;
      }

      .verified-text {
        color: #4caf50;
        font-size: 11px;
        font-weight: 600;
        text-transform: uppercase;
        letter-spacing: 0.5px;
      }

      @media (max-width: 768px) {
        .testimonials-grid {
          grid-template-columns: 1fr;
          padding: 0;
        }

        .testimonial-card {
          padding: 25px 20px;
        }

        .section-title {
          margin-bottom: 40px;
        }
      }

      @media (min-width: 1200px) {
        .testimonials-grid {
          grid-template-columns: repeat(3, 1fr);
        }
      }

      .google-auth-btn {
        display: flex;
        align-items: center;
        justify-content: center;
        width: 100%;
        padding: 12px 16px;
        background: white;
        border: 1px solid #dadce0;
        border-radius: 8px;
        color: #3c4043;
        font-size: 14px;
        font-weight: 500;
        cursor: pointer;
        transition: background-color 0.2s, box-shadow 0.2s;
      }

      .google-auth-btn:hover {
        background-color: #f8f9fa;
        box-shadow: 0 1px 2px 0 rgba(60, 64, 67, 0.3);
      }
      .style-option {
        display: flex;
        flex-direction: column;
        align-items: center;
        justify-content: center;
        padding: 1rem;
        background: rgba(71, 85, 105, 0.3);
        border: 2px solid rgba(147, 51, 234, 0.3);
        border-radius: 0.75rem;
        color: #e9d5ff;
        transition: all 0.3s ease;
        cursor: pointer;
        min-height: 80px;
      }

      .style-option:hover {
        background: rgba(147, 51, 234, 0.2);
        border-color: rgba(147, 51, 234, 0.6);
        transform: translateY(-2px);
      }

      .style-option.active {
        background: linear-gradient(
          135deg,
          rgba(147, 51, 234, 0.4),
          rgba(236, 72, 153, 0.4)
        );
        border-color: #9333ea;
        color: white;
        box-shadow: 0 4px 15px rgba(147, 51, 234, 0.3);
      }

      .style-option i {
        font-size: 1.5rem;
        margin-bottom: 0.5rem;
      }

      .style-option span {
        font-size: 0.875rem;
        text-align: center;
      }

      @media (max-width: 768px) {
        .style-option {
          padding: 0.75rem;
          min-height: 70px;
        }

        .style-option i {
          font-size: 1.25rem;
        }

        .style-option span {
          font-size: 0.75rem;
        }
      }

      .pack-results-viewer {
        width: 100%;
        max-width: 600px;
        margin: 0 auto;
      }

      .pack-thumb {
        border: 2px solid transparent;
        border-radius: 0.5rem;
        overflow: hidden;
        transition: all 0.3s ease;
        opacity: 0.7;
      }

      .pack-thumb:hover {
        opacity: 1;
        transform: scale(1.1);
      }

      .pack-thumb.active {
        border-color: #9333ea;
        opacity: 1;
      }

      .pack-progress-dot {
        transition: all 0.3s ease;
      }
    </style>
    <script
      src="https://analytics.ahrefs.com/analytics.js"
      data-key="nbbMIaMmoBy8I696zAoHgw"
      async
    ></script>
    <!-- Google tag (gtag.js) -->
    <script
      async
      src="https://www.googletagmanager.com/gtag/js?id=G-78RSLH46CX"
    ></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag() {
        dataLayer.push(arguments);
      }
      gtag("js", new Date());

      gtag("config", "G-78RSLH46CX");
    </script>
    <script src="https://js.stripe.com/v3"></script>
    <script src="/config.js"></script>
  </head>
  <body
    class="bg-gradient-to-br from-purple-900 via-slate-900 to-indigo-900 min-h-screen text-white overflow-x-hidden"
  >
    <!-- Animated Background Blobs -->
    <div class="fixed inset-0 overflow-hidden pointer-events-none">
      <div class="blob w-96 h-96 bg-purple-600 -top-48 -left-48"></div>
      <div
        class="blob w-96 h-96 bg-indigo-600 top-1/2 -right-48"
        style="animation-delay: 5s"
      ></div>
      <div
        class="blob w-96 h-96 bg-pink-600 -bottom-48 left-1/3"
        style="animation-delay: 10s"
      ></div>
    </div>

    <!-- Navigation -->
    <nav
      class="relative z-10 px-6 py-4 lg:px-12"
      role="navigation"
      aria-label="Navegación principal"
    >
      <div class="max-w-7xl mx-auto flex justify-between items-center">
        <!-- Left: Brand -->
        <div class="flex items-center space-x-2">
          <i
            class="fas fa-cube text-3xl text-purple-400"
            aria-hidden="true"
          ></i>
          <span class="text-2xl font-bold gradient-text">Toyrender</span>
        </div>

        <!-- Right: Credits + Mini Nav + Auth -->
        <div class="flex items-center gap-3">
          <!-- Credits -->
          <button
            id="creditsBtn"
            class="px-4 py-2 bg-purple-600/30 backdrop-blur-sm rounded-lg border border-purple-500/50 hover:bg-purple-600/50 transition-all"
            aria-label="Ver créditos disponibles"
          >
            <i class="fas fa-coins mr-2" aria-hidden="true"></i>
            <span id="creditsCount">0</span>
            <span id="creditsLabel">Créditos</span>
          </button>

          <!-- Tiny Nav (shows from sm and up) -->
          <nav
            class="hidden sm:flex items-center gap-2 text-sm text-purple-200/90"
            aria-label="Enlaces rápidos"
          >
            <a
              href="/es/gallery"
              class="px-3 py-1 rounded-md hover:text-white hover:bg-white/10 focus:outline-none focus:ring-2 focus:ring-purple-500"
              >Galería de Figuras</a
            >
            <a
              href="/es/fotos-citas-galeria/"
              class="px-3 py-1 rounded-md hover:text-white hover:bg-white/10 focus:outline-none focus:ring-2 focus:ring-purple-500"
              >Galería Fotos para Citas</a
            >
            <a
              href="/es/dating-photos"
              class="px-4 py-2 bg-gradient-to-r from-pink-600 to-red-600 rounded-lg hover:from-pink-700 hover:to-red-700 transition-all transform hover:scale-105 flex items-center"
            >
              <i class="fas fa-heart mr-2"></i>
              <span>Fotos para Citas</span>
            </a>
            <a
              href="/es/blog"
              class="px-3 py-1 rounded-md hover:text-white hover:bg-white/10 focus:outline-none focus:ring-2 focus:ring-purple-500"
              >Blog</a
            >
            <a
              href="/es/faq"
              class="px-3 py-1 rounded-md hover:text-white hover:bg-white/10 focus:outline-none focus:ring-2 focus:ring-purple-500"
              >Preguntas Frecuentes</a
            >
            <a
              href="#pricing-title"
              class="px-3 py-1 rounded-md hover:text-white hover:bg-white/10 focus:outline-none focus:ring-2 focus:ring-purple-500"
              >Precios</a
            >
          </nav>

          <!-- Auth -->
          <button
            id="signInBtn"
            class="px-4 py-2 bg-gradient-to-r from-purple-600 to-pink-600 rounded-lg hover:from-purple-700 hover:to-pink-700 transition-all transform hover:scale-105"
            aria-label="Inicia sesión en tu cuenta"
          >
            <i class="fas fa-user-circle mr-2" aria-hidden="true"></i>
            <span id="authBtnText">Iniciar Sesión</span>
          </button>

          <button
            id="logoutBtn"
            class="hidden px-4 py-2 bg-slate-700 rounded-lg hover:bg-slate-600 transition-all"
            aria-label="Cerrar sesión"
          >
            <i class="fas fa-right-from-bracket mr-2"></i
            ><span>Cerrar Sesión</span>
          </button>
        </div>
      </div>
    </nav>

    <!-- Main Content -->
    <main
      class="relative z-10 max-w-7xl mx-auto px-6 lg:px-12 py-12"
      role="main"
    >
      <!-- Hero Section -->
      <section class="text-center mb-16" aria-labelledby="hero-title">
        <h1 id="hero-title" class="text-5xl lg:text-7xl font-bold mb-6">
          <span>Transfórmate en una</span>
          <span class="gradient-text">Figura Coleccionable</span>
        </h1>
        <p class="text-xl text-purple-200 mb-8 max-w-3xl mx-auto">
          Impulsado por los últimos modelos de imagen de IA, convertimos tus
          fotos en impresionantes diseños de figuras a escala 1:7 o increíbles
          retratos de IA en segundos. ¡Perfecto para coleccionistas, regalos o
          simplemente por diversión!
        </p>
        <div
          class="flex flex-wrap justify-center gap-4 mb-8"
          role="list"
          aria-label="Características principales"
        >
          <div
            class="px-6 py-3 bg-purple-800/30 backdrop-blur-sm rounded-full border border-purple-500/50"
            role="listitem"
          >
            <i class="fas fa-bolt mr-2 text-yellow-400" aria-hidden="true"></i
            ><span>Generación Instantánea</span>
          </div>
          <div
            class="px-6 py-3 bg-purple-800/30 backdrop-blur-sm rounded-full border border-purple-500/50"
            role="listitem"
          >
            <i class="fas fa-magic mr-2 text-purple-400" aria-hidden="true"></i
            ><span>Diseño con IA</span>
          </div>
          <div
            class="px-6 py-3 bg-purple-800/30 backdrop-blur-sm rounded-full border border-purple-500/50"
            role="listitem"
          >
            <i
              class="fas fa-download mr-2 text-green-400"
              aria-hidden="true"
            ></i
            ><span>Descarga en Alta Resolución</span>
          </div>
        </div>
      </section>

      <!-- Upload Section -->
      <section class="max-w-4xl mx-auto" aria-labelledby="upload-title">
        <div
          class="bg-slate-800/50 backdrop-blur-xl rounded-3xl p-8 lg:p-12 border border-purple-500/30 pulse-glow"
        >
          <div
            id="uploadArea"
            class="border-3 border-dashed border-purple-500/50 rounded-2xl p-12 text-center hover:border-purple-400 transition-all cursor-pointer bg-purple-900/20 hover:bg-purple-900/30"
            role="button"
            tabindex="0"
            aria-label="Área para subir foto - haz clic o arrastra y suelta para subir"
          >
            <input
              type="file"
              id="fileInput"
              accept="image/*"
              class="hidden"
              aria-label="Seleccionar archivo de imagen"
            />
            <div class="float-animation inline-block mb-6">
              <i
                class="fas fa-camera text-6xl text-purple-400"
                aria-hidden="true"
              ></i>
            </div>
            <h3 id="upload-title" class="text-2xl font-bold mb-4">
              Sube Tu Foto
            </h3>
            <p class="text-purple-300 mb-6">
              Arrastra y suelta tu foto aquí o haz clic para buscar
            </p>
            <button
              class="px-8 py-4 bg-gradient-to-r from-purple-600 to-pink-600 rounded-xl text-lg font-semibold hover:from-purple-700 hover:to-pink-700 transition-all transform hover:scale-105 shadow-xl"
              aria-label="Elegir foto para subir"
            >
              <i class="fas fa-upload mr-2" aria-hidden="true"></i
              ><span>Elegir Foto</span>
            </button>
            <p class="text-sm text-purple-400 mt-4">
              Soporta JPG, PNG hasta 10MB
            </p>
          </div>

          <!-- Preview Section (Hidden by default) -->
          <div id="previewSection" class="hidden">
            <div class="grid lg:grid-cols-2 gap-8">
              <div>
                <h4 class="text-lg font-semibold mb-3 text-purple-300">
                  Foto Original
                </h4>
                <div class="rounded-xl overflow-hidden bg-black/30">
                  <img
                    id="originalPreview"
                    src=""
                    alt="Foto original subida por el usuario"
                    class="max-w-full max-h-full object-contain"
                  />
                </div>
              </div>
              <div>
                <h4 class="text-lg font-semibold mb-3 text-purple-300">
                  Imagen Generada
                </h4>
                <div
                  id="resultContainer"
                  class="rounded-xl overflow-hidden bg-black/30 h-64 flex items-center justify-center"
                >
                  <div id="loadingSpinner" class="hidden">
                    <i
                      class="fas fa-spinner fa-spin text-4xl text-purple-400"
                    ></i>
                    <p class="mt-4 text-purple-300">Creando tu imagen...</p>
                  </div>
                  <img
                    id="resultPreview"
                    src=""
                    alt="Resultado del diseño de figura generado por IA"
                    class="w-full h-64 object-cover hidden"
                  />
                </div>
              </div>
            </div>
            <div class="mt-8 flex gap-4 justify-center">
              <button
                id="generateBtn"
                class="px-8 py-4 bg-gradient-to-r from-purple-600 to-pink-600 rounded-xl text-lg font-semibold hover:from-purple-700 hover:to-pink-700 transition-all transform hover:scale-105 disabled:opacity-50 disabled:cursor-not-allowed"
              >
                <i class="fas fa-magic mr-2"></i><span>Generar Imagen(es)</span>
              </button>
              <button
                id="downloadBtn"
                class="hidden px-8 py-4 bg-green-600 rounded-xl text-lg font-semibold hover:bg-green-700 transition-all transform hover:scale-105"
              >
                <i class="fas fa-download mr-2"></i><span>Descargar</span>
              </button>
              <button
                id="resetBtn"
                class="px-8 py-4 bg-slate-700 rounded-xl text-lg font-semibold hover:bg-slate-600 transition-all"
              >
                <i class="fas fa-redo mr-2"></i><span>Probar Otra</span>
              </button>
            </div>
          </div>
        </div>
      </section>

      <div id="styleSelectionSection" class="hidden max-w-4xl mx-auto mt-8">
        <div
          class="bg-slate-800/50 backdrop-blur-xl rounded-3xl p-8 border border-purple-500/30"
        >
          <h3 class="text-2xl font-bold mb-2 text-center">Elige Tu Estilo</h3>
          <p class="text-purple-300 text-center mb-6">
            Selecciona cómo quieres que se genere tu imagen
          </p>

          <!-- Style Categories -->
          <div class="space-y-6">
            <!-- Figurine Styles -->
            <div>
              <h4 class="text-lg font-semibold mb-3 text-purple-300">
                <i class="fas fa-cube mr-2"></i>Estilos de Figura
              </h4>
              <div class="grid grid-cols-2 md:grid-cols-5 gap-3">
                <button class="style-option active" data-style="figurine1">
                  <i class="fas fa-coffee"></i>
                  <span>Estilo de Vida</span>
                </button>
                <button class="style-option" data-style="figurine2">
                  <i class="fas fa-desktop"></i>
                  <span>Exhibición Escritorio</span>
                </button>
                <button class="style-option" data-style="figurine3">
                  <i class="fas fa-flask"></i>
                  <span>Taller de Creación</span>
                </button>
                <button class="style-option" data-style="figurine4">
                  <i class="fas fa-building-columns"></i>
                  <span>Calidad de Museo</span>
                </button>
                <button class="style-option" data-style="figurine5">
                  <i class="fas fa-store"></i>
                  <span>Escaparate</span>
                </button>
                <button class="style-option" data-style="figurine6">
                  <i class="fas fa-th-large"></i>
                  <span>Vitrina de Exhibición</span>
                </button>
                <button class="style-option" data-style="figurine7">
                  <i class="fas fa-video"></i>
                  <span>Escena de Unboxing</span>
                </button>
                <button class="style-option" data-style="figurine8">
                  <i class="fas fa-palette"></i>
                  <span>Prueba de Color</span>
                </button>
                <button class="style-option" data-style="figurine9">
                  <i class="fas fa-drafting-compass"></i>
                  <span>Mesa de Arquitecto</span>
                </button>
                <button class="style-option" data-style="figurine10">
                  <i class="fas fa-broadcast-tower"></i>
                  <span>Estudio de Transmisión</span>
                </button>
              </div>
            </div>

            <!-- Dating Photo Styles -->
            <div>
              <h4 class="text-lg font-semibold mb-3 text-purple-300">
                <i class="fas fa-heart mr-2"></i>Estilos de Fotos para Citas
              </h4>
              <div class="grid grid-cols-3 gap-3">
                <button class="style-option" data-style="dating1">
                  <i class="fas fa-bed"></i>
                  <span>Brillo Matutino</span>
                </button>
                <button class="style-option" data-style="dating2">
                  <i class="fas fa-smile-wink"></i>
                  <span>Encanto Juguetón</span>
                </button>
                <button class="style-option" data-style="dating3">
                  <i class="fas fa-gem"></i>
                  <span>Elegancia Nocturna</span>
                </button>
                <button class="style-option" data-style="dating4">
                  <i class="fas fa-sun"></i>
                  <span>Verano Despreocupado</span>
                </button>
                <button class="style-option" data-style="dating5">
                  <i class="fas fa-spa"></i>
                  <span>Sensualidad Artística</span>
                </button>
                <button class="style-option" data-style="dating6">
                  <i class="fas fa-moon"></i>
                  <span>Confianza Íntima</span>
                </button>
              </div>

              <div
                class="mt-4 p-4 bg-gradient-to-r from-pink-900/30 to-red-900/30 rounded-xl border border-pink-500/30"
              >
                <button
                  id="dating9PackBtn"
                  class="w-full style-option"
                  data-style="dating-pack"
                >
                  <div class="flex items-center justify-center gap-3">
                    <i class="fas fa-fire-flame-curved text-2xl"></i>
                    <div>
                      <span class="block text-base font-bold"
                        >Paquete de Fotos para Citas</span
                      >
                      <span class="block text-xs text-purple-300 mt-1"
                        >Genera los 6 estilos para citas a la vez (usa 6
                        créditos)</span
                      >
                    </div>
                    <span
                      class="px-3 py-1 bg-pink-600/50 rounded-full text-sm font-bold"
                      >MEJOR OFERTA</span
                    >
                  </div>
                </button>
              </div>
            </div>

            <!-- Business Headshot Styles -->
            <div>
              <h4 class="text-lg font-semibold mb-3 text-purple-300">
                <i class="fas fa-briefcase mr-2"></i>Estilos de Retrato
                Profesional
              </h4>
              <div class="grid grid-cols-3 gap-3">
                <button class="style-option" data-style="business1">
                  <i class="fas fa-user-tie"></i>
                  <span>Profesional Corp.</span>
                </button>
                <button class="style-option" data-style="business2">
                  <i class="fas fa-chart-line"></i>
                  <span>Ejecutivo</span>
                </button>
                <button class="style-option" data-style="business3">
                  <i class="fas fa-handshake"></i>
                  <span>Cercano</span>
                </button>
              </div>
            </div>
          </div>

          <!-- Continue Button -->
          <div class="flex justify-center mt-8">
            <button
              id="continueToPreview"
              class="px-8 py-4 bg-gradient-to-r from-purple-600 to-pink-600 rounded-xl text-lg font-semibold hover:from-purple-700 hover:to-pink-700 transition-all transform hover:scale-105"
            >
              <i class="fas fa-arrow-right mr-2"></i>Continuar
            </button>
          </div>
        </div>
      </div>

      <!-- Testimonials Examples-->
      <section id="testimonials" class="py-12 relative">
        <h2 class="text-2xl font-semibold mb-4 px-6">
          Mira lo que Otros Han Creado
        </h2>

        <!-- arrows -->
        <button
          type="button"
          class="hidden md:flex absolute left-2 top-1/2 -translate-y-1/2 z-20 h-10 w-10 items-center justify-center rounded-full bg-black/40 hover:bg-black/60 text-white"
          data-track-left
          aria-label="Desplazar testimonios a la izquierda"
        >
          ‹
        </button>
        <button
          type="button"
          class="hidden md:flex absolute right-2 top-1/2 -translate-y-1/2 z-20 h-10 w-10 items-center justify-center rounded-full bg-black/40 hover:bg-black/60 text-white"
          data-track-right
          aria-label="Desplazar testimonios a la derecha"
        >
          ›
        </button>

        <!-- swipe/drag hint -->
        <div
          class="pointer-events-none absolute right-4 top-0 z-20 mt-2 px-3 py-1 rounded-full text-xs font-medium bg-black/60 text-white opacity-90 md:hidden"
          data-swipe-hint
        >
          Desliza →
        </div>
        <div
          class="pointer-events-none absolute right-4 top-0 z-20 mt-2 px-3 py-1 rounded-full text-xs font-medium bg-black/60 text-white opacity-90 hidden md:block"
          data-drag-hint
        >
          Arrastra ↔︎
        </div>

        <!-- gradient edges to suggest overflow -->
        <div
          class="pointer-events-none absolute inset-y-0 left-0 w-12 z-10 bg-gradient-to-r from-[rgba(0,0,0,0.25)] to-transparent"
        ></div>
        <div
          class="pointer-events-none absolute inset-y-0 right-0 w-12 z-10 bg-gradient-to-l from-[rgba(0,0,0,0.25)] to-transparent"
        ></div>

        <div
          class="testimonial-track relative flex gap-4 overflow-x-auto snap-x snap-mandatory px-6 pb-3 touch-pan-x select-none cursor-grab active:cursor-grabbing no-scrollbar"
          data-drag-scroll
          role="region"
          aria-label="Testimonios de clientes: arrastra o desliza para desplazar"
        >
          <!-- Card 1 -->
          <article
            class="snap-start shrink-0 w-80 md:w-96 rounded-2xl p-4 shadow-md bg-white/5 border border-white/10 backdrop-blur"
          >
            <img
              src="/images/Example1.jpg"
              alt="Ejemplo de figura de cliente 1"
              class="w-full aspect-square object-cover rounded-xl"
            />
            <blockquote class="mt-3 text-sm opacity-90">
              “¡Calidad increíble! Convertí mi foto con mi abuela en una figura
              que se ve simplemente genial. ¡A mi familia le encanta!”
            </blockquote>
            <div class="mt-3 text-xs opacity-70">— Sarah M.</div>
          </article>

          <!-- Card 2 -->
          <article
            class="snap-start shrink-0 w-80 md:w-96 rounded-2xl p-4 shadow-md bg-white/5 border border-white/10 backdrop-blur"
          >
            <img
              src="/images/Example2.jpg"
              alt="Ejemplo de figura de cliente 2"
              class="w-full aspect-square object-cover rounded-xl"
            />
            <blockquote class="mt-3 text-sm opacity-90">
              “¡Perfecto para nuestro aniversario! Los recuerdos de verano eran
              exactamente lo que buscaba. ¡Y la generación fue súper rápida!”
            </blockquote>
            <div class="mt-3 text-xs opacity-70">— Mike T.</div>
          </article>

          <!-- Card 3 -->
          <article
            class="snap-start shrink-0 w-80 md:w-96 rounded-2xl p-4 shadow-md bg-white/5 border border-white/10 backdrop-blur"
          >
            <img
              src="/images/Example3.jpg"
              alt="Ejemplo de figura de cliente 3"
              class="w-full aspect-square object-cover rounded-xl"
            />
            <blockquote class="mt-3 text-sm opacity-90">
              “Usé esto para renovar mi perfil de LinkedIn. ¡La figura de
              negocios le da a mi perfil un toque único y memorable!”
            </blockquote>
            <div class="mt-3 text-xs opacity-70">— Jennifer L.</div>
          </article>

          <!-- Card 4 -->
          <article
            class="snap-start shrink-0 w-80 md:w-96 rounded-2xl p-4 shadow-md bg-white/5 border border-white/10 backdrop-blur"
          >
            <img
              src="/images/Example4.jpg"
              alt="Ejemplo de figura de cliente 4"
              class="w-full aspect-square object-cover rounded-xl"
            />
            <blockquote class="mt-3 text-sm opacity-90">
              “¡El mejor regalo de cumpleaños! A mi esposa le encantó el diseño
              de la figura. ¡Ahora está enmarcada en nuestra sala de estar!”
            </blockquote>
            <div class="mt-3 text-xs opacity-70">— David K.</div>
          </article>

          <!-- Card 5 -->
          <article
            class="snap-start shrink-0 w-80 md:w-96 rounded-2xl p-4 shadow-md bg-white/5 border border-white/10 backdrop-blur"
          >
            <img
              src="/images/Example5.jpg"
              alt="Ejemplo de figura de cliente 5"
              class="w-full aspect-square object-cover rounded-xl"
            />
            <blockquote class="mt-3 text-sm opacity-90">
              “Creé un conjunto de figuras mías en forma para mi novia. ¡Fue
              inmediatamente a una imprenta 3D con la imagen! Gran calidad de
              salida.”
            </blockquote>
            <div class="mt-3 text-xs opacity-70">— Robert H.</div>
          </article>

          <!-- Card 6 -->
          <article
            class="snap-start shrink-0 w-80 md:w-96 rounded-2xl p-4 shadow-md bg-white/5 border border-white/10 backdrop-blur"
          >
            <img
              src="/images/Example6.jpg"
              alt="Imagen de ejemplo de figura de matrimonio"
              class="w-full aspect-square object-cover rounded-xl"
            />
            <blockquote class="mt-3 text-sm opacity-90">
              “¡Nuestras figuras de la foto de boda quedaron increíbles! ¡Valió
              cada céntimo!”
            </blockquote>
            <div class="mt-3 text-xs opacity-70">— Emily R.</div>
          </article>

          <!-- Card 7 -->
          <article
            class="snap-start shrink-0 w-80 md:w-96 rounded-2xl p-4 shadow-md bg-white/5 border border-white/10 backdrop-blur"
          >
            <img
              src="/images/Example7.jpg"
              alt="Ejemplo de figura de bailaora de flamenco"
              class="w-full aspect-square object-cover rounded-xl"
            />
            <blockquote class="mt-3 text-sm opacity-90">
              “¡Olé! ¡Viva el Flamenco y las Figuras!”
            </blockquote>
            <div class="mt-3 text-xs opacity-70">— María L.</div>
          </article>

          <!-- Card 8 -->
          <article
            class="snap-start shrink-0 w-80 md:w-96 rounded-2xl p-4 shadow-md bg-white/5 border border-white/10 backdrop-blur"
          >
            <img
              src="/images/Example8.jpg"
              alt="Ejemplo de figura de mujer de fiesta en bikini"
              class="w-full aspect-square object-cover rounded-xl"
            />
            <blockquote class="mt-3 text-sm opacity-90">
              “¡Increíble foto mía en bikini! ¡La usé en Tinder y Bumble!”
            </blockquote>
            <div class="mt-3 text-xs opacity-70">— Jenny A.</div>
          </article>
        </div>
        <!-- Gallery CTA Button -->
        <div class="w-full flex justify-center mt-6 pb-2">
          <div class="flex flex-col sm:flex-row gap-4">
            <a
              href="/es/gallery"
              class="px-6 py-3 bg-gradient-to-r from-purple-600 to-pink-600 rounded-full font-semibold text-sm tracking-wide hover:from-purple-700 hover:to-pink-700 transition-colors shadow-lg focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-pink-400 focus:ring-offset-slate-900"
              aria-label="Ver más ejemplos de figuras en la galería"
            >
              Más Ejemplos de Figuras →
            </a>
            <a
              href="/es/fotos-citas-galeria/"
              class="px-6 py-3 bg-gradient-to-r from-pink-600 to-red-600 rounded-full font-semibold text-sm tracking-wide hover:from-pink-700 hover:to-red-700 transition-colors shadow-lg focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-pink-400 focus:ring-offset-slate-900"
              aria-label="Ver galería de ejemplos de fotos para citas"
            >
              Ver Galería de Fotos para Citas →
            </a>
          </div>
        </div>
      </section>

      <!-- Dating Photos CTA Section -->
      <section class="mt-20 text-center max-w-4xl mx-auto">
        <div
          class="bg-gradient-to-br from-pink-900/50 to-red-900/50 backdrop-blur-xl rounded-3xl p-8 lg:p-12 border border-pink-500/30"
        >
          <div class="flex justify-center mb-6">
            <div class="p-4 bg-pink-600/20 rounded-full">
              <i class="fas fa-heart text-5xl text-pink-400"></i>
            </div>
          </div>
          <h2 class="text-3xl lg:text-4xl font-bold mb-4">
            <span class="gradient-text">Sube de Nivel en tus Citas</span>
          </h2>
          <p class="text-xl text-purple-200 mb-8 max-w-2xl mx-auto">
            Transforma tu perfil de citas con fotos generadas por IA que
            consiguen 'matches'. Imágenes de calidad profesional optimizadas
            para Tinder, Bumble y Hinge.
          </p>
          <div class="flex flex-wrap justify-center gap-4 mb-8">
            <div
              class="px-4 py-2 bg-pink-800/30 backdrop-blur-sm rounded-full border border-pink-500/50"
            >
              <i class="fas fa-fire mr-2 text-orange-400"></i>
              <span>Optimizado para Tinder</span>
            </div>
            <div
              class="px-4 py-2 bg-pink-800/30 backdrop-blur-sm rounded-full border border-pink-500/50"
            >
              <i class="fas fa-bee mr-2 text-yellow-400"></i>
              <span>Listo para Bumble</span>
            </div>
            <div
              class="px-4 py-2 bg-pink-800/30 backdrop-blur-sm rounded-full border border-pink-500/50"
            >
              <i class="fas fa-link mr-2 text-blue-400"></i>
              <span>Perfecto para Hinge</span>
            </div>
          </div>
          <a
            href="/es/dating-photos.html"
            class="inline-flex items-center px-10 py-4 bg-gradient-to-r from-pink-600 to-red-600 rounded-xl text-lg font-semibold hover:from-pink-700 hover:to-red-700 transition-all transform hover:scale-105 shadow-xl"
          >
            <i class="fas fa-camera mr-2"></i>
            <span>Crea Tus Fotos para Citas Ahora</span>
            <i class="fas fa-arrow-right ml-2"></i>
          </a>
          <p class="mt-6 text-sm text-purple-300">
            <i class="fas fa-check-circle mr-2 text-green-400"></i>
            Múltiples estilos • Alta resolución • Generación instantánea
          </p>
        </div>
      </section>

      <!-- Pricing Section -->
      <section class="mt-20 text-center" aria-labelledby="pricing-title">
        <h2 id="pricing-title" class="text-3xl font-bold mb-12">
          Precios Simples
        </h2>
        <div
          class="max-w-2xl mx-auto grid md:grid-cols-2 gap-8"
          role="list"
          aria-label="Planes de precios"
        >
          <article
            class="bg-slate-800/50 backdrop-blur-xl rounded-2xl p-8 border border-purple-500/30 flex flex-col"
            role="listitem"
          >
            <h3 class="text-2xl font-bold mb-4">Prueba Gratuita</h3>
            <p class="text-4xl font-bold mb-4">$0</p>
            <ul
              class="space-y-3 mb-8 text-left flex-grow"
              role="list"
              aria-label="Características de la prueba gratuita"
            >
              <li role="listitem">
                <i
                  class="fas fa-check text-green-400 mr-2"
                  aria-hidden="true"
                ></i
                ><span>2 Generaciones Gratis</span>
              </li>
              <li role="listitem">
                <i
                  class="fas fa-check text-green-400 mr-2"
                  aria-hidden="true"
                ></i
                ><span>Descargas en Alta Resolución</span>
              </li>
              <li role="listitem">
                <i
                  class="fas fa-check text-green-400 mr-2"
                  aria-hidden="true"
                ></i
                ><span>Imágenes con Marca de Agua</span>
              </li>
            </ul>
            <button
              class="w-full py-3 bg-slate-700 rounded-lg hover:bg-slate-600 transition-all mt-auto"
              aria-label="Comenzar con la prueba gratuita"
            >
              Comenzar
            </button>
          </article>
          <article
            class="bg-gradient-to-br from-purple-800/50 to-pink-800/50 backdrop-blur-xl rounded-2xl p-8 border border-purple-400/50 transform scale-105 flex flex-col"
            role="listitem"
          >
            <div
              class="bg-yellow-500 text-black text-sm font-bold px-3 py-1 rounded-full inline-block mb-4"
            >
              POPULAR
            </div>
            <h3 class="text-2xl font-bold mb-4">Paquete Pro</h3>
            <p class="text-4xl font-bold mb-4">$7.99</p>
            <ul
              class="space-y-3 mb-8 text-left flex-grow"
              role="list"
              aria-label="Características del paquete pro"
            >
              <li role="listitem">
                <i
                  class="fas fa-check text-green-400 mr-2"
                  aria-hidden="true"
                ></i
                ><span>10 Generaciones de Figuras</span>
              </li>
              <li role="listitem">
                <i
                  class="fas fa-check text-green-400 mr-2"
                  aria-hidden="true"
                ></i
                ><span>Procesamiento Prioritario</span>
              </li>
              <li role="listitem">
                <i
                  class="fas fa-check text-green-400 mr-2"
                  aria-hidden="true"
                ></i
                ><span>Múltiples Estilos</span>
              </li>
              <li role="listitem">
                <i
                  class="fas fa-check text-green-400 mr-2"
                  aria-hidden="true"
                ></i
                ><span>Licencia de Uso Comercial</span>
              </li>
            </ul>
            <button
              id="buyCreditsBtn"
              class="w-full py-3 bg-gradient-to-r from-purple-600 to-pink-600 rounded-lg hover:from-purple-700 hover:to-pink-700 transition-all transform hover:scale-105 mt-auto"
              aria-label="Comprar créditos del paquete pro"
            >
              Comprar Créditos
            </button>
          </article>
        </div>
      </section>
    </main>

    <!-- Payment Modal (Hidden by default) -->
    <div
      id="paymentModal"
      class="hidden fixed inset-0 bg-black/70 backdrop-blur-sm z-50 flex items-center justify-center p-6"
    >
      <div
        class="bg-slate-800 rounded-2xl p-8 max-w-md w-full border border-purple-500/30"
      >
        <h3 class="text-2xl font-bold mb-6">Completa Tu Compra</h3>
        <div class="bg-purple-900/30 rounded-lg p-4 mb-6">
          <p class="text-sm text-purple-300 mb-2">Estás comprando:</p>
          <p class="text-xl font-bold">10 Créditos de Figura - $7.99</p>
        </div>
        <form id="paymentForm">
          <div class="mb-4">
            <label class="block text-sm font-medium mb-2"
              >Número de Tarjeta</label
            >
            <input
              type="text"
              placeholder="1234 5678 9012 3456"
              class="w-full px-4 py-3 bg-slate-700 rounded-lg focus:outline-none focus:ring-2 focus:ring-purple-500"
            />
          </div>
          <div class="grid grid-cols-2 gap-4 mb-4">
            <div>
              <label class="block text-sm font-medium mb-2">Vencimiento</label>
              <input
                type="text"
                placeholder="MM/AA"
                class="w-full px-4 py-3 bg-slate-700 rounded-lg focus:outline-none focus:ring-2 focus:ring-purple-500"
              />
            </div>
            <div>
              <label class="block text-sm font-medium mb-2">CVV</label>
              <input
                type="text"
                placeholder="123"
                class="w-full px-4 py-3 bg-slate-700 rounded-lg focus:outline-none focus:ring-2 focus:ring-purple-500"
              />
            </div>
          </div>
          <div class="flex gap-4">
            <button
              type="submit"
              class="flex-1 py-3 bg-gradient-to-r from-purple-600 to-pink-600 rounded-lg hover:from-purple-700 hover:to-pink-700 transition-all"
            >
              Pagar $7.99
            </button>
            <button
              type="button"
              id="cancelPayment"
              class="flex-1 py-3 bg-slate-700 rounded-lg hover:bg-slate-600 transition-all"
            >
              Cancelar
            </button>
          </div>
        </form>
        <p class="text-xs text-purple-400 mt-4 text-center">
          <i class="fas fa-lock mr-1"></i
          ><span>Pago seguro impulsado por Stripe</span>
        </p>
      </div>
    </div>

    <!-- Auth Modal (Sign In / Register) -->
    <!-- Add this to your index.html in the auth modal section (replace the existing authModal div around line 2800) -->

    <!-- Auth Modal (Sign In / Register) -->
    <div
      id="authModal"
      class="hidden fixed inset-0 bg-black/70 backdrop-blur-sm z-50 flex items-center justify-center p-6"
    >
      <div
        class="bg-slate-800 rounded-2xl p-8 max-w-md w-full border border-purple-500/30"
      >
        <h3 class="text-2xl font-bold mb-6" id="authTitle">Iniciar sesión</h3>

        <!-- Google Sign-in Button -->
        <button
          id="googleSignInBtn"
          type="button"
          class="google-auth-btn mb-4"
          onclick="window.location.href='/auth/google'"
        >
          <svg
            width="18"
            height="18"
            viewBox="0 0 18 18"
            style="margin-right: 8px"
          >
            <path
              fill="#4285F4"
              d="M17.64 9.2c0-.637-.057-1.251-.164-1.84H9v3.481h4.844c-.209 1.125-.843 2.078-1.796 2.717v2.258h2.908c1.702-1.567 2.684-3.875 2.684-6.615z"
            />
            <path
              fill="#34A853"
              d="M9 18c2.43 0 4.467-.806 5.956-2.18l-2.908-2.259c-.806.54-1.837.86-3.048.86-2.344 0-4.328-1.584-5.036-3.711H.957v2.332C2.438 15.983 5.482 18 9 18z"
            />
            <path
              fill="#FBBC05"
              d="M3.964 10.71c-.18-.54-.282-1.117-.282-1.71s.102-1.17.282-1.71V4.958H.957C.347 6.173 0 7.548 0 9s.348 2.827.957 4.042l3.007-2.332z"
            />
            <path
              fill="#EA4335"
              d="M9 3.58c1.321 0 2.508.454 3.44 1.345l2.582-2.58C13.463.891 11.426 0 9 0 5.482 0 2.438 2.017.957 4.958L3.964 7.29C4.672 5.163 6.656 3.58 9 3.58z"
            />
          </svg>
          Iniciar sesión con Google
        </button>

        <!-- Divider -->
        <div class="relative my-6">
          <div class="absolute inset-0 flex items-center">
            <div class="w-full border-t border-slate-600"></div>
          </div>
          <div class="relative flex justify-center text-sm">
            <span class="px-4 bg-slate-800 text-slate-400"
              >O continuar con correo electrónico</span
            >
          </div>
        </div>

        <form id="authForm" class="space-y-4">
          <div>
            <label class="block text-sm font-medium mb-2"
              >Correo Electrónico</label
            >
            <input
              id="authEmail"
              type="email"
              required
              class="w-full px-4 py-3 bg-slate-700 rounded-lg focus:outline-none focus:ring-2 focus:ring-purple-500"
            />
          </div>
          <div>
            <label class="block text-sm font-medium mb-2">Contraseña</label>
            <input
              id="authPassword"
              type="password"
              required
              minlength="6"
              class="w-full px-4 py-3 bg-slate-700 rounded-lg focus:outline-none focus:ring-2 focus:ring-purple-500"
            />
          </div>

          <div class="flex gap-3">
            <button
              id="authSubmit"
              type="submit"
              class="flex-1 py-3 bg-gradient-to-r from-purple-600 to-pink-600 rounded-lg hover:from-purple-700 hover:to-pink-700 transition-all"
            >
              Continuar
            </button>
            <button
              type="button"
              id="authCancel"
              class="flex-1 py-3 bg-slate-700 rounded-lg hover:bg-slate-600 transition-all"
            >
              Cancelar
            </button>
          </div>
        </form>

        <p class="text-sm text-purple-300 mt-4">
          <span id="authToggleText">¿Eres nuevo aquí?</span>
          <button id="authToggleBtn" class="underline hover:text-purple-200">
            Crear una cuenta
          </button>
        </p>

        <!-- Privacy note -->
        <p class="text-xs text-slate-500 mt-4 text-center">
          Al continuar, aceptas nuestros Términos de Servicio y Política de
          Privacidad
        </p>
      </div>
    </div>

    <!-- Update the JavaScript section to handle Google auth callbacks -->
    <script>
      // Add this to your existing JavaScript section, after the auth modal code

      // Check for Google auth success/error on page load
      window.addEventListener("DOMContentLoaded", async () => {
        const urlParams = new URLSearchParams(window.location.search);

        // Handle Google auth callbacks
        if (urlParams.get("auth_status") === "success") {
          await refreshSession();
          toast("¡Has iniciado sesión con Google correctamente!");
          // Clean up URL
          window.history.replaceState(
            {},
            document.title,
            window.location.pathname
          );
        } else if (urlParams.get("auth_error") === "google_failed") {
          toast(
            "El inicio de sesión con Google falló. Por favor, inténtalo de nuevo."
          );
          // Clean up URL
          window.history.replaceState(
            {},
            document.title,
            window.location.pathname
          );
        }

        // Handle Stripe checkout cancellation
        if (urlParams.get("checkout_status") === "cancel") {
          toast("Compra cancelada.");
          window.history.replaceState(
            {},
            document.title,
            window.location.pathname
          );
        }
      });

      // Update the updateAuthUI function to show auth method
      function updateAuthUI() {
        const total = totalCredits();
        $("#creditsCount").textContent = total;
        $("#creditsLabel").textContent = "Créditos";

        if (sessionUser) {
          // Check if Google user (you might want to add this info from backend)
          const displayText =
            sessionUser.authMethod === "google"
              ? `${sessionUser.email} (Google)`
              : sessionUser.email;

          $("#authBtnText").textContent = displayText;
          $("#logoutBtn").classList.remove("hidden");
          $("#signInBtn").classList.add("bg-slate-700", "hover:bg-slate-600");
          $("#signInBtn").classList.remove(
            "bg-gradient-to-r",
            "from-purple-600",
            "to-pink-600",
            "hover:from-purple-700",
            "hover:to-pink-700"
          );
        } else {
          $("#authBtnText").textContent = "Iniciar Sesión";
          $("#logoutBtn").classList.add("hidden");
          $("#signInBtn").classList.remove(
            "bg-slate-700",
            "hover:bg-slate-600"
          );
          $("#signInBtn").classList.add(
            "bg-gradient-to-r",
            "from-purple-600",
            "to-pink-600",
            "hover:from-purple-700",
            "hover:to-pink-700"
          );
        }

        // Visual state if out of credits
        const creditsBtn = $("#creditsBtn");
        if (total <= 0) {
          creditsBtn.classList.add("bg-red-600/30", "border-red-500/50");
          creditsBtn.classList.remove(
            "bg-purple-600/30",
            "border-purple-500/50"
          );
        } else {
          creditsBtn.classList.remove("bg-red-600/30", "border-red-500/50");
          creditsBtn.classList.add("bg-purple-600/30", "border-purple-500/50");
        }
      }

      // Update the credits display to show Google users differently
      $("#creditsBtn").addEventListener("click", () => {
        if (!sessionUser) {
          openAuth("login");
          return;
        }
        const c = credits || {};
        const free = Number(c.free_remaining || 0);
        const paid = Number(c.paid_remaining || 0);
        const total = totalCredits();
        const authType =
          sessionUser.authMethod === "google" ? " (Cuenta de Google)" : "";

        toast(
          `Créditos${authType} — Total: ${total}${
            free || paid ? ` (gratis: ${free}, pagados: ${paid})` : ""
          }`
        );
      });
    </script>

    <!-- How it works-->
    <!-- Indexable Content Section -->
    <section
      id="how-it-works"
      class="relative z-10 max-w-7xl mx-auto px-6 lg:px-12 mt-16"
    >
      <h2 class="text-3xl lg:text-4xl font-bold mb-6">
        <span class="gradient-text">Cómo Funciona Toyrender</span> — De Foto a
        Figura Coleccionable
      </h2>
      <p class="text-purple-200 max-w-3xl">
        Convierte cualquier retrato nítido en un concepto de figura elegante en
        segundos. Ya sea que te guste el cosplay, hacer regalos, necesites fotos
        impresionantes para citas o simplemente quieras un avatar único, nuestra
        IA - el último Modelo de Imagen de IA de Google, Nano Banana - renderiza
        un diseño de alta resolución que parece listo para exhibir.
      </p>

      <!-- How It Works -->
      <section
        id="learn"
        class="relative z-10 max-w-7xl mx-auto px-6 lg:px-12 mt-16"
      >
        <div class="text-center">
          <h2 class="text-3xl lg:text-4xl font-bold mb-4">
            <span class="gradient-text">Cómo Funciona</span> en 3 Pasos
            Sencillos
          </h2>
          <p class="text-purple-200 max-w-3xl mx-auto">
            Convierte cualquier retrato nítido en un concepto de figura elegante
            en segundos. Nuestro proceso está diseñado para ser rápido, fácil y
            divertido.
          </p>
        </div>

        <!-- Horizontal Step-by-Step Guide -->
        <div class="relative mt-12 grid grid-cols-1 md:grid-cols-3 gap-8">
          <!-- Arrow connecting Step 1 and 2 -->
          <div
            class="hidden md:block absolute top-1/2 left-1/3 transform -translate-x-1/2 -translate-y-1/2 -mt-16 text-purple-500/50"
          >
            <i class="fas fa-arrow-right text-4xl"></i>
          </div>
          <!-- Arrow connecting Step 2 and 3 -->
          <div
            class="hidden md:block absolute top-1/2 right-1/3 transform translate-x-1/2 -translate-y-1/2 -mt-16 text-purple-500/50"
          >
            <i class="fas fa-arrow-right text-4xl"></i>
          </div>

          <!-- Step 1 -->
          <div
            class="bg-slate-800/50 border border-purple-500/30 rounded-xl p-6 flex flex-col items-center text-center"
          >
            <div
              class="flex items-center justify-center w-16 h-16 mb-4 bg-purple-600 rounded-full text-2xl font-bold ring-4 ring-purple-600/30"
            >
              1
            </div>
            <h3 class="text-xl font-semibold mb-2">Sube la Foto</h3>
            <p class="text-purple-300 text-sm mb-4">
              Elige una foto nítida y de frente. Los archivos JPG o PNG
              funcionan mejor.
            </p>
            <img
              src="/images/PortraitExampleStep1.jpg"
              alt="Sube una foto de retrato nítida"
              class="rounded-lg w-full bg-black/20"
            />
          </div>

          <!-- Step 2 -->
          <div
            class="bg-slate-800/50 border border-purple-500/30 rounded-xl p-6 flex flex-col items-center text-center"
          >
            <div
              class="flex items-center justify-center w-16 h-16 mb-4 bg-purple-600 rounded-full text-2xl font-bold ring-4 ring-purple-600/30"
            >
              2
            </div>
            <h3 class="text-xl font-semibold mb-2">Genera el Diseño</h3>
            <p class="text-purple-300 text-sm mb-4">
              Nuestra IA se pone a trabajar, transformando tu imagen en un
              concepto de figura.
            </p>
            <img
              src="/images/PortraitExampleStep3.jpg"
              alt="IA generando el diseño de la figura"
              class="rounded-lg w-full bg-black/20"
            />
          </div>

          <!-- Step 3 -->
          <div
            class="bg-slate-800/50 border border-purple-500/30 rounded-xl p-6 flex flex-col items-center text-center"
          >
            <div
              class="flex items-center justify-center w-16 h-16 mb-4 bg-purple-600 rounded-full text-2xl font-bold ring-4 ring-purple-600/30"
            >
              3
            </div>
            <h3 class="text-xl font-semibold mb-2">Descarga el Resultado</h3>
            <p class="text-purple-300 text-sm mb-4">
              Guarda tu imagen de alta resolución para uso personal o comercial.
            </p>
            <img
              src="/images/PortraitExampleStep2.jpeg"
              alt="Descargando la imagen final de alta resolución"
              class="rounded-lg w-full bg-black/20"
            />
          </div>
        </div>

        <!-- "Styles & Use Cases" and "Licensing" sections would follow here -->
      </section>

      <!-- Styles & Use Cases -->
      <section
        id="styles"
        class="relative z-10 max-w-7xl mx-auto px-6 lg:px-12 mt-16"
      >
        <header class="mb-6">
          <h2 class="text-3xl lg:text-4xl font-bold">
            <span class="gradient-text">Estilos y Casos de Uso</span> — Ideas
            para Probar
          </h2>
          <p class="text-purple-200 max-w-3xl mt-2">
            Explora temas populares y formas prácticas de usar tu concepto de
            figura de IA. Haz clic en un estilo, genera tu vista previa y luego
            <a href="#pricing-title" class="underline hover:text-purple-300"
              >descárgala en alta resolución</a
            >.
          </p>
        </header>

        <!-- Use Case Cards -->
        <div class="grid sm:grid-cols-2 lg:grid-cols-3 gap-6 mt-8">
          <!-- Cosplay -->
          <article
            class="bg-slate-800/50 border border-purple-500/30 rounded-xl overflow-hidden"
          >
            <img
              src="/images/CosplayExample.jpg"
              alt="Estilos de figuras de IA para cosplay como héroe de anime, ninja y mecha"
              class="w-full h-auto object-contain"
              loading="lazy"
              decoding="async"
              width="640"
              height="384"
            />
            <div class="p-5">
              <h3 class="text-xl font-semibold mb-2">
                Figura de cosplay a partir de una foto
              </h3>
              <p class="text-purple-200 text-sm">
                Convierte tu retrato en un <strong>héroe de anime</strong>, un
                sigiloso <strong>ninja</strong> o un imponente
                <strong>mecha</strong>. Ideal para insignias de convenciones,
                arte de perfil o pósters.
              </p>
            </div>
          </article>

          <!-- Graduation -->
          <article
            class="bg-slate-800/50 border border-purple-500/30 rounded-xl overflow-hidden"
          >
            <img
              src="/images/GraduationExample.jpg"
              alt="Concepto de figura de IA con tema de graduación con birrete y toga"
              class="w-full h-auto object-contain"
              loading="lazy"
              decoding="async"
              width="640"
              height="384"
            />
            <div class="p-5">
              <h3 class="text-xl font-semibold mb-2">
                Concepto de figura de graduación
              </h3>
              <p class="text-purple-200 text-sm">
                Celebra hitos con una figura con birrete y toga. Perfecto para
                anuncios, tarjetas de agradecimiento e impresiones de recuerdo.
              </p>
            </div>
          </article>

          <!-- Business / LinkedIn -->
          <article
            class="bg-slate-800/50 border border-purple-500/30 rounded-xl overflow-hidden"
          >
            <img
              src="/images/LinkedinBusinessExample.jpg"
              alt="Avatar de negocios o LinkedIn diseñado como una figura profesional"
              class="w-full h-auto object-contain"
              loading="lazy"
              decoding="async"
              width="640"
              height="384"
            />
            <div class="p-5">
              <h3 class="text-xl font-semibold mb-2">
                Avatar para negocios / LinkedIn
              </h3>
              <p class="text-purple-200 text-sm">
                Un avatar de figura pulido y profesional para perfiles,
                biografías de ponentes, presentaciones y páginas de equipo.
              </p>
            </div>
          </article>

          <!-- Streamer / Gamer -->
          <article
            class="bg-slate-800/50 border border-purple-500/30 rounded-xl overflow-hidden"
          >
            <img
              src="/images/StreamerExample.jpg"
              alt="Concepto de figura para arte de canal de streamer o gamer"
              class="w-full h-auto object-contain"
              loading="lazy"
              decoding="async"
              width="640"
              height="384"
            />
            <div class="p-5">
              <h3 class="text-xl font-semibold mb-2">
                Arte de canal para streamer / gamer
              </h3>
              <p class="text-purple-200 text-sm">
                Crea arte de canal, emoticonos y banners llamativos con un
                concepto de figura temático que coincida con tu estilo.
              </p>
            </div>
          </article>

          <!-- Gift Ideas -->
          <article
            class="bg-slate-800/50 border border-purple-500/30 rounded-xl overflow-hidden"
          >
            <img
              src="/images/GiftIdeasExample.jpg"
              alt="Ideas de regalo como aniversarios, cumpleaños, bodas usando conceptos de figuras de IA"
              class="w-full h-auto object-contain"
              loading="lazy"
              decoding="async"
              width="640"
              height="384"
            />
            <div class="p-5">
              <h3 class="text-xl font-semibold mb-2">Ideas de regalo</h3>
              <p class="text-purple-200 text-sm">
                Imágenes pensadas para <strong>aniversarios</strong>,
                <strong>cumpleaños</strong> y <strong>bodas</strong>. Imprime,
                enmarca o comparte digitalmente.
              </p>
            </div>
          </article>

          <!-- 3D Printing References -->
          <article
            class="bg-slate-800/50 border border-purple-500/30 rounded-xl overflow-hidden"
          >
            <img
              src="/images/3DPrinterExample.jpg"
              alt="Concepto de referencia para impresión 3D derivado de una imagen de figura de IA"
              class="w-full h-auto object-contain"
              loading="lazy"
              decoding="async"
              width="640"
              height="384"
            />
            <div class="p-5">
              <h3 class="text-xl font-semibold mb-2">
                Referencias para impresión 3D
              </h3>
              <p class="text-purple-200 text-sm">
                Entregamos <strong>imágenes</strong> de alta resolución (no
                archivos STL). Usa el arte como referencia para que un artista
                3D o un servicio de impresión modele tu pieza.
              </p>
            </div>
          </article>
        </div>

        <!-- Testimonials-->

        <div class="testimonials-section">
          <h2 class="section-title">
            Clientes hablando sobre las imágenes de sus figuras
          </h2>

          <div class="testimonials-grid">
            <div class="testimonial-card">
              <div class="stars">
                <span class="star">★</span>
                <span class="star">★</span>
                <span class="star">★</span>
                <span class="star">★</span>
                <span class="star">★</span>
              </div>
              <p class="testimonial-text">
                "¡Toyrender es absolutamente increíble! Transformé fotos de mi
                familia en figuras coleccionables que parecen profesionales.
                Como diseñador, lo uso para prototipar diseños de personajes
                antes de encargar modelos 3D. ¡Un antes y un después!"
              </p>
              <div class="customer-info">
                <span class="customer-name">Marcus Chen</span>
                <div class="verified-badge">
                  <div class="verified-icon">✓</div>
                  <span class="verified-text">Compra Verificada</span>
                </div>
              </div>
            </div>

            <div class="testimonial-card">
              <div class="stars">
                <span class="star">★</span>
                <span class="star">★</span>
                <span class="star">★</span>
                <span class="star">★</span>
                <span class="star">★</span>
              </div>
              <p class="testimonial-text">
                "¡La mejor idea de regalo! Creé figuras de mi novio y yo en
                diferentes temas: superhéroe, medieval, ciberpunk. La calidad
                nos dejó boquiabiertos. Ahora todos nuestros amigos quieren las
                suyas. ¡Vale cada céntimo!"
              </p>
              <div class="customer-info">
                <span class="customer-name">Sofía Martínez</span>
                <div class="verified-badge">
                  <div class="verified-icon">✓</div>
                  <span class="verified-text">Compra Verificada</span>
                </div>
              </div>
            </div>

            <div class="testimonial-card">
              <div class="stars">
                <span class="star">★</span>
                <span class="star">★</span>
                <span class="star">★</span>
                <span class="star">★</span>
                <span class="star empty">★</span>
              </div>
              <p class="testimonial-text">
                "Buena calidad = grandes resultados. Al principio tuve problemas
                con la iluminación de mis fotos, pero una vez que seguí los
                consejos, las figuras salieron impresionantes. La IA es
                sorprendentemente precisa con los rasgos faciales. ¡El equipo de
                soporte fue muy útil!"
              </p>
              <div class="customer-info">
                <span class="customer-name">Alex Thompson</span>
                <div class="verified-badge">
                  <div class="verified-icon">✓</div>
                  <span class="verified-text">Compra Verificada</span>
                </div>
              </div>
            </div>
          </div>
        </div>

        <!-- Quality Tips -->
        <div class="mt-12">
          <h3 class="text-2xl font-semibold mb-3">Consejos de Calidad</h3>
          <div class="grid md:grid-cols-2 gap-6">
            <div
              class="bg-slate-800/50 border border-green-500/30 rounded-xl p-6"
            >
              <h4 class="font-semibold mb-2">
                Haz esto para obtener los mejores resultados
              </h4>
              <ul class="list-disc list-inside text-purple-200 space-y-1">
                <li>
                  Buena iluminación (natural o interior suave), evita sombras
                  duras.
                </li>
                <li>
                  Cámara a la distancia de un brazo; mantén tu cara centrada y
                  nítida.
                </li>
                <li>Rostro completamente visible; fondo neutro o simple.</li>
                <li>Sube un JPG/PNG nítido de hasta 10&nbsp;MB.</li>
              </ul>
            </div>
            <div
              class="bg-slate-800/50 border border-red-500/30 rounded-xl p-6"
            >
              <h4 class="font-semibold mb-2">Qué evitar</h4>
              <ul class="list-disc list-inside text-purple-200 space-y-1">
                <li>
                  Contraluz (ventana detrás de ti) y habitaciones oscuras.
                </li>
                <li>Desenfoque de movimiento o filtros/efectos de belleza.</li>
                <li>Fondos recargados que ocultan tu silueta.</li>
                <li>Fotos con niños pequeños (actualmente no permitido).</li>
              </ul>
            </div>
          </div>
          <p class="text-purple-200 mt-6">
            ¿Eres nuevo aquí? Mira
            <a href="#how-it-works" class="underline hover:text-purple-300"
              >cómo funciona</a
            >
            o ve a los
            <a href="#pricing-title" class="underline hover:text-purple-300"
              >precios</a
            >.
          </p>
        </div>
      </section>

      <!-- Licensing & Privacy -->
      <div class="mt-12">
        <h3 class="text-2xl font-semibold mb-4">Licencia y Privacidad</h3>
        <p class="text-purple-200">
          <strong>Propiedad:</strong> Eres dueño de los resultados que generas.
          El Paquete Pro incluye una licencia de uso comercial; los resultados
          de la Prueba Gratuita son para uso personal y no comercial.
        </p>
        <p class="text-purple-200 mt-3">
          <strong>Derechos y restricciones:</strong> Por favor, evita contenido
          que infrinja los derechos de terceros (p. ej., logotipos, disfraces de
          marca) o que viole nuestros Términos. Para menores, solo un padre o
          tutor legal puede subir fotos.
        </p>
        <p class="text-purple-200 mt-3">
          <strong>Privacidad:</strong> Tus fotos se procesan para crear el
          render y se manejan de acuerdo con nuestra
          <a href="/es/privacy.html" class="underline hover:text-purple-300"
            >Política de Privacidad</a
          >. No compartimos públicamente las subidas. Evita enviar imágenes
          sensibles.
        </p>
        <p class="text-purple-200 mt-3">
          ¿Tienes preguntas? Consulta nuestras
          <a href="/es/faq" class="underline hover:text-purple-300"
            >Preguntas Frecuentes</a
          >
          o
          <a href="/es/contact" class="underline hover:text-purple-300"
            >contáctanos</a
          >.
        </p>
      </div>
    </section>

    <!-- FAQ Section-->
    <section
      id="faq"
      class="mt-24 max-w-4xl mx-auto"
      aria-labelledby="faq-title"
    >
      <h2 id="faq-title" class="text-3xl font-bold mb-8">
        Preguntas Frecuentes
      </h2>

      <div class="space-y-4">
        <details
          class="group bg-slate-800/50 border border-purple-500/30 rounded-xl p-5"
        >
          <summary class="flex cursor-pointer items-center justify-between">
            <span class="text-lg font-semibold"
              >¿Soy dueño del diseño de la figura generada?</span
            >
            <span
              class="ml-4 transition-transform group-open:rotate-180"
              aria-hidden="true"
              >⌄</span
            >
          </summary>
          <div class="mt-3 text-purple-200">
            Sí. Con el Paquete Pro recibes una licencia de uso comercial para
            tus creaciones. Los resultados de la Prueba Gratuita son para uso
            personal y no comercial.
          </div>
        </details>

        <details
          class="group bg-slate-800/50 border border-purple-500/30 rounded-xl p-5"
        >
          <summary class="flex cursor-pointer items-center justify-between">
            <span class="text-lg font-semibold"
              >¿Cuánto tarda la generación?</span
            >
            <span
              class="ml-4 transition-transform group-open:rotate-180"
              aria-hidden="true"
              >⌄</span
            >
          </summary>
          <div class="mt-3 text-purple-200">
            Normalmente menos de un minuto; durante periodos de alta demanda
            puede tardar un poco más. Verás un estado en tiempo real mientras
            creamos tu figura.
          </div>
        </details>

        <details
          class="group bg-slate-800/50 border border-purple-500/30 rounded-xl p-5"
        >
          <summary class="flex cursor-pointer items-center justify-between">
            <span class="text-lg font-semibold"
              >¿Qué formatos y tamaños de imagen se admiten?</span
            >
            <span
              class="ml-4 transition-transform group-open:rotate-180"
              aria-hidden="true"
              >⌄</span
            >
          </summary>
          <div class="mt-3 text-purple-200">
            JPG y PNG de hasta 10&nbsp;MB funcionan mejor. Para obtener los
            mejores resultados, sube una foto nítida y bien iluminada con tu
            rostro visible.
          </div>
        </details>

        <details
          class="group bg-slate-800/50 border border-purple-500/30 rounded-xl p-5"
        >
          <summary class="flex cursor-pointer items-center justify-between">
            <span class="text-lg font-semibold"
              >¿Qué recibo después de la generación?</span
            >
            <span
              class="ml-4 transition-transform group-open:rotate-180"
              aria-hidden="true"
              >⌄</span
            >
          </summary>
          <div class="mt-3 text-purple-200">
            Una vista previa en alta resolución del diseño de tu figura con una
            opción de descarga. No enviamos figuras físicas por el momento.
          </div>
        </details>

        <details
          class="group bg-slate-800/50 border border-purple-500/30 rounded-xl p-5"
        >
          <summary class="flex cursor-pointer items-center justify-between">
            <span class="text-lg font-semibold"
              >¿Puedo elegir estilos o temas?</span
            >
            <span
              class="ml-4 transition-transform group-open:rotate-180"
              aria-hidden="true"
              >⌄</span
            >
          </summary>
          <div class="mt-3 text-purple-200">
            Sí, elige entre estilos preestablecidos o añade tu propio prompt (p.
            ej., “héroe de anime”, “explorador espacial”, “atuendo de
            graduación”, “ciberpunk”). Renderizaremos tu foto en ese tema.
          </div>
        </details>

        <details
          class="group bg-slate-800/50 border border-purple-500/30 rounded-xl p-5"
        >
          <summary class="flex cursor-pointer items-center justify-between">
            <span class="text-lg font-semibold">¿Son privadas mis fotos?</span>
            <span
              class="ml-4 transition-transform group-open:rotate-180"
              aria-hidden="true"
              >⌄</span
            >
          </summary>
          <div class="mt-3 text-purple-200">
            Nunca compartimos públicamente tus subidas. Las fotos se utilizan
            para crear tu resultado de acuerdo con nuestra Política de
            Privacidad. Por favor, evita subir imágenes sensibles.
          </div>
        </details>

        <details
          class="group bg-slate-800/50 border border-purple-500/30 rounded-xl p-5"
        >
          <summary class="flex cursor-pointer items-center justify-between">
            <span class="text-lg font-semibold"
              >¿Puedo usar las creaciones comercialmente?</span
            >
            <span
              class="ml-4 transition-transform group-open:rotate-180"
              aria-hidden="true"
              >⌄</span
            >
          </summary>
          <div class="mt-3 text-purple-200">
            Sí, con la licencia del Paquete Pro. Por favor, no utilices las
            creaciones de una manera que infrinja los derechos de terceros (p.
            ej., logotipos, disfraces de marca) o suplante a otros.
          </div>
        </details>

        <details
          class="group bg-slate-800/50 border border-purple-500/30 rounded-xl p-5"
        >
          <summary class="flex cursor-pointer items-center justify-between">
            <span class="text-lg font-semibold"
              >¿Expiran los créditos? ¿Qué pasa si algo sale mal?</span
            >
            <span
              class="ml-4 transition-transform group-open:rotate-180"
              aria-hidden="true"
              >⌄</span
            >
          </summary>
          <div class="mt-3 text-purple-200">
            Los créditos están vinculados a tu cuenta. Si tienes algún problema
            con una generación, contacta con soporte y te ayudaremos a
            solucionarlo.
          </div>
        </details>

        <details
          class="group bg-slate-800/50 border border-purple-500/30 rounded-xl p-5"
        >
          <summary class="flex cursor-pointer items-center justify-between">
            <span class="text-lg font-semibold"
              >¿Puedo imprimir el resultado en 3D?</span
            >
            <span
              class="ml-4 transition-transform group-open:rotate-180"
              aria-hidden="true"
              >⌄</span
            >
          </summary>
          <div class="mt-3 text-purple-200">
            Actualmente proporcionamos imágenes de alta resolución (no archivos
            STL). Puedes usar la imagen como referencia para un artista o
            impresora 3D.
          </div>
        </details>

        <details
          class="group bg-slate-800/50 border border-purple-500/30 rounded-xl p-5"
        >
          <summary class="flex cursor-pointer items-center justify-between">
            <span class="text-lg font-semibold"
              >¿Puedo subir fotos de niños o de varias personas?</span
            >
            <span
              class="ml-4 transition-transform group-open:rotate-180"
              aria-hidden="true"
              >⌄</span
            >
          </summary>
          <div class="mt-4 text-purple-300">
            Actualmente no es posible con niños pequeños debido a las
            restricciones del Modelo de IA de Google, Nano Banana. Los grupos de
            personas no son un problema.
          </div>
        </details>

        <details
          class="group bg-slate-800/50 border border-purple-500/30 rounded-xl p-5"
        >
          <summary class="flex cursor-pointer items-center justify-between">
            <span class="text-lg font-semibold"
              >¿Hay restricciones de contenido?</span
            >
            <span
              class="ml-4 transition-transform group-open:rotate-180"
              aria-hidden="true"
              >⌄</span
            >
          </summary>
          <div class="mt-3 text-purple-200">
            El Modelo de IA no permite desnudez, contenido de odio o ilegal, ni
            tampoco niños. No subas imágenes o prompts que violen derechos o
            nuestros Términos.
          </div>
        </details>
      </div>
    </section>

    <!-- Footer -->
    <footer
      class="relative z-10 mt-20 px-6 py-12 lg:px-12 border-t border-purple-800/30"
      role="contentinfo"
    >
      <div class="max-w-7xl mx-auto text-center">
        <div class="flex items-center justify-center space-x-2 mb-6">
          <i
            class="fas fa-cube text-2xl text-purple-400"
            aria-hidden="true"
          ></i>
          <span class="text-xl font-bold gradient-text">Toyrender</span>
        </div>
        <p class="text-purple-300 mb-6">
          © 2025 Toyrender.com. Todos los derechos reservados.
        </p>
        <nav
          class="flex justify-center space-x-6 text-purple-400"
          role="navigation"
          aria-label="Navegación del pie de página"
        >
          <a href="/es/gallery" class="hover:text-purple-300 transition-colors"
            >Galería de Figuras</a
          >
          <a
            href="/es/ai-background-remover"
            class="hover:text-purple-300 transition-colors"
            >Eliminador de Fondos IA</a
          >
          <a
            href="/es/fotos-citas-galeria/"
            class="hover:text-purple-300 transition-colors"
            >Galería Fotos para Citas</a
          >
          <a href="/es/blog" class="hover:text-purple-300 transition-colors"
            >Blog</a
          >
          <a href="/es/terms" class="hover:text-purple-300 transition-colors"
            >Términos</a
          >
          <a href="/es/privacy" class="hover:text-purple-300 transition-colors"
            >Privacidad</a
          >
          <a href="/es/contact" class="hover:text-purple-300 transition-colors"
            >Contacto</a
          >
          <a href="/es/faq" class="hover:text-purple-300 transition-colors"
            >Preguntas Frecuentes</a
          >
        </nav>
      </div>
    </footer>

    <script>
      /* ----------------------- Helpers ----------------------- */
      const $ = (sel) => document.querySelector(sel);
      const fetchJSON = async (url, opts = {}) => {
        const res = await fetch(url, { credentials: "include", ...opts });
        let data = null;
        try {
          data = await res.json();
        } catch {}
        if (!res.ok) {
          const msg =
            (data && (data.error || data.message)) ||
            res.statusText ||
            "La solicitud falló";
          const err = new Error(msg);
          err.status = res.status;
          err.data = data;
          throw err;
        }
        return data;
      };
      function toast(msg) {
        alert(msg);
      }

      let selectedStyle = "figurine1";

      // Variable to track if we're doing a pack generation
      let isPackGeneration = false;
      let packResults = [];
      let currentPackIndex = 0;

      // Updated style prompts mapping - 19 total options (10 figurine, 6 dating, 3 business)
      const stylePrompts = {
        // 10 Figurine Styles
        figurine1:
          "Create a 1/7-scale figurine of the person in a coffee-table lifestyle shoot. The figure stands on a round transparent acrylic base (no text) on a terrazzo tabletop. Soft morning light, plants and a book stack in the background. The packaging with flat 2D art sits casually next to it. Editorial, magazine-style composition.",

        figurine2:
          "Create a 1/7 scale commercialized figurine of the characters in the picture, in a realistic style, in a real environment. The figurine is placed on a computer desk. The figurine has a round transparent acrylic base, with no text on the base. The content on the computer screen is a 3D modeling process of this figurine. Next to the computer screen is a toy packaging box, designed in a style reminiscent of high-quality collectible figures, printed with original artwork. The packaging features two-dimensional flat illustrations.",

        figurine3:
          "Create a 1/7-scale figurine of the person in a resin-printing cleanup area. Ultrasonic cleaner, isopropyl bottles, nitrile gloves. On the monitor: support removal preview. Box with flat 2D art on a shelf in the back.",

        figurine4:
          "Create a 1/7-scale figurine of the person on a museum registration table. Cotton gloves, acid-free tissue, accession tag (blank). A small acrylic vitrine nearby. Wall behind features large flat concept illustrations (no text).",

        figurine5:
          "Create a 1/7-scale figurine of the person in a boutique retail window. Elevated matte plinth, reflected city lights at dusk, antitheft wire barely visible. Stacked boxed units with flat 2D art in a tidy pyramid.",

        figurine6:
          "Create a 1/7-scale figurine pf the person in a collector's Detolf cabinet. LED strips top and bottom, other figures blurred on neighboring shelves. One packaging box with flat 2D art sits centered behind.",

        figurine7:
          "A vibrant, nostalgic photograph of a 1/7-scale stylized collectible figurine of the person, standing heroically atop a meticulously crafted, working miniature arcade cabinet from the 1980s. The figurine is positioned on its round transparent acrylic base (no text). The arcade cabinet's screen flickers with bright, pixelated retro game graphics, casting a dynamic, colorful glow onto the figurine and the surrounding area. The setting is a dimly lit, authentic retro arcade environment, with faint reflections of other cabinet screens visible in the background. Scattered around the base of the arcade cabinet are a few vintage arcade tokens and a half-eaten bag of classic candy. A specially designed, retro-themed packaging box, featuring bold, era-appropriate flat 2D art, leans casually against the side of the arcade machine, blending seamlessly with the nostalgic aesthetic. The composition is dynamic, energetic, and rich with period detail, evoking pure 80s/90s nostalgia.",

        figurine8:
          "Create a 1/7-scale figurine on a color-checker backdrop. Include swatch cards, gray card, and a spectrophotometer. Monitor shows node-based look-dev graph of the figurine materials. Packaging stands upright to the right.",

        figurine9: `Prompt: A dramatic, hyperrealistic photograph of a pristine 1/7-scale rare collectible figurine (preserving fur color/markings), presented under focused, museum-style spot lighting in an exclusive auction house preview. The figurine stands on its round transparent acrylic base (no text) atop a dark, polished mahogany display table. Surrounding it are other blurred, high-value collectibles in glass cases, and a subtle velvet rope demarcation. A crisp, minimalist auction catalog, open to the figurine's entry (no legible text), lies nearby. In the deep, soft-focused background, discerning collectors in elegant attire are subtly visible. The lighting is sophisticated and theatrical, emphasizing exclusivity and the figurine's prestige.\nNegatives: "extra limbs, duplicate heads, text, watermark, brand logos, cheap display, messy background, blurred figurine, harsh reflections."\nOptions: "A small, engraved brass lot number tag (digital/printable)", "Subtle, shimmering light reflecting off the figurine's surface."`,

        dating1: `Prompt: A professional, hyperrealistic photograph capturing the person (preserving hair color/style, eye color), lounging intimately on luxurious, slightly rumpled white silk sheets. Her body is artfully draped and partially covered by a soft, oversized white button-down shirt or silk robe, revealing a bare shoulder or leg. She gazes softly towards the camera with a tender, inviting, and slightly playful expression, as if just waking up. Soft, warm, diffused morning sunlight streams through a sheer window, creating a luminous, ethereal glow and gentle highlights on her skin. A single, long-stemmed red rose lies casually on the pillow nearby. The composition is clean, airy, and deeply intimate, evoking a feeling of romantic connection and sensuality, with a shallow depth-of-field.\nNegatives: "extra limbs, duplicate heads, text, watermark, brand logos, messy or dirty sheets, harsh or artificial lighting, aggressive or stressed expression, explicit nudity, unrealistic proportions, visible tattoos (unless specified)."\nOptions: "Woman wearing underwear", "A personalized, handwritten 'love note' (blurred text) casually folded on the bedside table", "A steaming cup of gourmet coffee on a nearby minimalist nightstand."`,

        dating2: `Prompt: An adorable and heartwarming photograph of the person (preserving hair color/style, eye color), with a sweet, playful smile and a hint of charm, playfully peeking over the top of a fluffy, oversized comforter in a brightly lit, cozy bedroom. She is dressed in comfortable yet charming loungewear (e.g., silk camisole, soft knit top). Her eyes sparkle with warmth and affection as she looks directly at the camera. Soft, warm, diffused natural light fills the room, creating an inviting and comfortable atmosphere. Scattered lightly on the comforter are a few delicate rose petals. The background is a tastefully blurred, homey bedroom, perhaps with a sunbeam on a nearby wall. The image conveys affection, tenderness, and a charming playfulness, perfect for a social media share or a personal gift. Negatives: "extra limbs, duplicate heads, text, watermark, brand logos, messy background (beyond soft comfort), harsh lighting, anxious or aggressive expression, unrealistic proportions, visible tattoos (unless specified)." Options: Woman gently blowing a kiss towards the camera (blurred motion); a personalized, small framed photo (blurred image) on a nearby nightstand; a stack of favorite books and a warm beverage nearby.`,

        dating3: `Prompt: A professional, hyperrealistic photograph of the person (preserving hair color/style, eye color), captured in a moment of elegant preparation for an evening out. She is seated or standing gracefully at a luxurious vanity table or in a chic dressing area, perhaps delicately applying lipstick or adjusting a piece of fine jewelry. She wears a sophisticated silk robe or a form-fitting, elegant dress that subtly accentuates her. Her gaze is confident and alluring, meeting her reflection in a softly lit mirror or looking thoughtfully towards the camera. The background features blurred, upscale decor like shimmering perfume bottles, delicate floral arrangements, and rich textures. Soft, warm, indirect lighting (like a vanity light or evening lamp) creates a luxurious glow and intimate highlights, evoking anticipation, with a shallow depth-of-field. Negatives: "extra limbs, duplicate heads, text, watermark, brand logos, messy or cluttered vanity, harsh or unflattering lighting, aggressive or crude pose, unrealistic proportions, visible tattoos (unless specified)." Options: Woman holding a delicate clutch purse; a subtle reflection of a cityscape at dusk in the background mirror; a personalized, elegant note card (blurred text) lying on the vanity.`,

        dating4: `Prompt: An energetic and enchanting photograph of the person (preserving hair color/style, eye color), captured in a moment of playful, lighthearted motion, perhaps twirling gently, tossing her hair back with a laugh, or playfully reaching out towards the camera. She is dressed in a light, flowing summer dress or a soft, denim-and-lace ensemble that moves with her, hinting at her form. The setting is a vibrant, sun-drenched outdoor location, like a blooming garden, a pristine beach with gentle waves, or a cheerful, airy patio. Bright, natural daylight creates sparkling highlights and a joyous, carefree atmosphere. Her expression is genuinely happy, with a flirty smile and sparkling eyes. The background is beautifully blurred, adding to the dynamic and inviting feel, with subtle motion blur on her hair or dress to emphasize movement.\nNegatives: "extra limbs, duplicate heads, text, watermark, brand logos, stiff pose, harsh shadows, explicit nudity, aggressive or crude gestures, unrealistic proportions, visible tattoos (unless specified)."\nOptions: "Woman holding a delicate wildflower bouquet," "Subtle sun flare effect in the background," "A tiny, barely visible anklet or bracelet accessory."`,

        dating5: `Prompt: A sensual and artistic photograph of the person (preserving hair color/style, eye color), captured in an intimate moment of self-reflection or gentle touch. She is sitting or kneeling gracefully, perhaps with her back partially turned, subtly revealing the curve of her back, shoulder, or the delicate line of her neck. Her hair is artfully styled to highlight these areas, perhaps partially undone or swept to one side. She is dressed in a soft, luxurious silk slip or a delicate, unfastened robe. The setting is minimalist and elegant, like a high-end bedroom or a spa-like bathroom, with a large, antique-style mirror in the soft-focused background or as a framing element. Soft, ambient lighting creates gentle contrasts and emphasizes skin texture. The mood is one of serene introspection, quiet beauty, and sophisticated sensuality, with a shallow depth-of-field.\nNegatives: "extra limbs, duplicate heads, text, watermark, brand logos, cluttered background, harsh lighting, aggressive or crude pose, unrealistic proportions, visible tattoos (unless specified)."\nOptions: "A delicate string of pearls or a simple necklace resting on her back," "Subtle steam effect in a bathroom setting," "A single, flickering candle creating a warm glow."`,

        dating6: `Prompt: An intimately captivating, hyperrealistic photograph of a woman (preserving hair color/style, eye color), seated casually yet gracefully on the edge of a bed, dressed in an oversized, soft cotton shirt or a man's unbuttoned dress shirt, subtly revealing a bare shoulder, a glimpse of her back, or the graceful line of her leg. Her hair is beautifully disheveled, as if just woken, and she turns her head slightly towards the camera with a confident, slightly mischievous, and warmly inviting smile. One hand might be playfully running through her hair or resting on her thigh. The luxurious bedding (silk or high-thread-count cotton) is slightly rumpled around her. The scene is bathed in soft, warm, diffused morning light, creating a dreamy, intimate glow. The background is a tastefully blurred bedroom, emphasizing comfort and personal space. The mood is one of relaxed sensuality, approachable charm, and confident vulnerability, with a shallow depth-of-field.\nNegatives: "extra limbs, duplicate heads, text, watermark, brand logos, messy or dirty bedding, harsh or cold lighting, aggressive or crude pose,unrealistic proportions, visible tattoos (unless specified)."\nOptions: "Woman wearing a delicate, minimalist necklace," "A personalized, sleek mug of coffee on a nearby nightstand," "A glimpse of a luxurious robe casually draped over a chair."`,

        // Business Headshot Styles
        business1:
          "Corporate professional headshot. Formal business attire, confident direct gaze, neutral office background, perfect lighting. LinkedIn-optimized portrait. Clean, trustworthy appearance ideal for corporate profiles and professional networking.",

        business2:
          "Executive leadership headshot. Premium suit, authoritative yet approachable expression, modern office or cityscape background. Power pose with crossed arms or thoughtful gesture. High-end photography style for C-suite and senior management profiles.",

        business3:
          "Approachable business headshot. Business casual attire, warm genuine smile, bright modern workspace background. Friendly and collaborative vibe. Perfect for consultants, freelancers, and client-facing professionals on LinkedIn and company websites.",
      };

      // Initialize style selection
      function initStyleSelection() {
        // Handle style option clicks
        document.querySelectorAll(".style-option").forEach((button) => {
          button.addEventListener("click", function () {
            // Remove active from all buttons
            document
              .querySelectorAll(".style-option")
              .forEach((btn) => btn.classList.remove("active"));
            // Add active to clicked button
            this.classList.add("active");
            // Update selected style
            selectedStyle = this.dataset.style;
          });
        });

        document
          .getElementById("dating9PackBtn")
          ?.addEventListener("click", function () {
            // Remove active from all buttons
            document
              .querySelectorAll(".style-option")
              .forEach((btn) => btn.classList.remove("active"));
            // Add active to pack button
            this.classList.add("active");
            selectedStyle = "dating-pack";
            isPackGeneration = true;
          });

        // Handle continue button
        const continueBtn = document.getElementById("continueToPreview");
        if (continueBtn) {
          continueBtn.addEventListener("click", function () {
            document
              .getElementById("styleSelectionSection")
              .classList.add("hidden");
            previewSection.classList.remove("hidden");
          });
        }
      }

      /* ----------------------- Auth & Credits UI ----------------------- */
      let sessionUser = null;
      let credits = {
        free_remaining: 0,
        paid_remaining: 0,
        free_renew_utc: null,
      };

      async function refreshSession() {
        try {
          const r = await fetchJSON("/auth/me");
          sessionUser = r.user;
          credits = r.credits || { remaining: 0 };
        } catch {
          sessionUser = null;
          credits = {
            free_remaining: 0,
            paid_remaining: 0,
            free_renew_utc: null,
          };
        }
        updateAuthUI();
      }

      function totalCredits() {
        const c = credits || {};
        // support all shapes: {remaining} OR {free_remaining, paid_remaining}
        if (typeof c.remaining === "number") return c.remaining;
        const free = Number(c.free_remaining || 0);
        const paid = Number(c.paid_remaining || 0);
        return free + paid;
      }

      // (Removed duplicate updateAuthUI definition; primary version earlier includes Google account labeling)

      /* ----------------------- Auth modal logic ----------------------- */
      const authModal = $("#authModal");
      const authTitle = $("#authTitle");
      const authForm = $("#authForm");
      const authEmail = $("#authEmail");
      const authPass = $("#authPassword");
      const authToggleBtn = $("#authToggleBtn");
      const authToggleText = $("#authToggleText");
      const authCancel = $("#authCancel");

      let authMode = "login"; // or "register"

      function openAuth(mode = "login") {
        authMode = mode;
        authTitle.textContent =
          mode === "login" ? "Iniciar sesión" : "Crear cuenta";
        authToggleText.textContent =
          mode === "login" ? "¿Eres nuevo aquí?" : "¿Ya tienes una cuenta?";
        authToggleBtn.textContent =
          mode === "login" ? "Crear una cuenta" : "Iniciar sesión";
        authEmail.value = "";
        authPass.value = "";
        authModal.classList.remove("hidden");
      }
      function closeAuth() {
        authModal.classList.add("hidden");
      }

      $("#signInBtn").addEventListener("click", () => openAuth("login"));
      $("#logoutBtn").addEventListener("click", async () => {
        try {
          await fetchJSON("/auth/logout", { method: "POST" });
        } catch {}
        await refreshSession();
        toast("Sesión cerrada");
      });
      authCancel.addEventListener("click", closeAuth);
      authModal.addEventListener("click", (e) => {
        if (e.target === authModal) closeAuth();
      });
      authToggleBtn.addEventListener("click", () =>
        openAuth(authMode === "login" ? "register" : "login")
      );

      authForm.addEventListener("submit", async (e) => {
        e.preventDefault();
        const payload = {
          email: authEmail.value.trim(),
          password: authPass.value,
        };
        if (!payload.email || !payload.password) return;

        try {
          if (authMode === "login") {
            await fetchJSON("/auth/login", {
              method: "POST",
              headers: { "Content-Type": "application/json" },
              body: JSON.stringify(payload),
            });
            toast("¡Bienvenido de nuevo!");
          } else {
            await fetchJSON("/auth/register", {
              method: "POST",
              headers: { "Content-Type": "application/json" },
              body: JSON.stringify(payload),
            });
            toast("Cuenta creada.");
          }
          closeAuth();
          await refreshSession();
        } catch (err) {
          toast(err.message || "La autenticación falló");
        }
      });

      /* ----------------------- Upload & Generate ----------------------- */
      const uploadArea = $("#uploadArea");
      const fileInput = $("#fileInput");
      const previewSection = $("#previewSection");
      const originalPreview = $("#originalPreview");
      let resultPreview = $("#resultPreview");
      let loadingSpinner = $("#loadingSpinner");
      const generateBtn = $("#generateBtn");
      const downloadBtn = $("#downloadBtn");
      const resetBtn = $("#resetBtn");

      let currentFile = null;

      uploadArea.addEventListener("click", () => fileInput.click());
      uploadArea.addEventListener("dragover", (e) => {
        e.preventDefault();
        uploadArea.classList.add("border-purple-400", "bg-purple-900/40");
      });
      uploadArea.addEventListener("dragleave", () => {
        uploadArea.classList.remove("border-purple-400", "bg-purple-900/40");
      });
      uploadArea.addEventListener("drop", (e) => {
        e.preventDefault();
        uploadArea.classList.remove("border-purple-400", "bg-purple-900/40");
        const files = e.dataTransfer.files;
        if (files.length > 0) handleFile(files[0]);
      });
      fileInput.addEventListener("change", (e) => {
        if (e.target.files.length > 0) handleFile(e.target.files[0]);
      });

      function handleFile(file) {
        if (!file.type.startsWith("image/")) {
          toast("Por favor, sube un archivo de imagen.");
          return;
        }
        if (file.size > 10 * 1024 * 1024) {
          toast("El tamaño del archivo debe ser inferior a 10MB.");
          return;
        }
        currentFile = file;
        const reader = new FileReader();
        reader.onload = (e) => {
          originalPreview.src = e.target.result;
          uploadArea.classList.add("hidden");
          const styleSection = document.getElementById("styleSelectionSection");
          if (styleSection) styleSection.classList.remove("hidden");
          previewSection.classList.add("hidden");
        };
        reader.readAsDataURL(file);
      }

      // Generate button handler (restored wrapper)

      generateBtn.addEventListener("click", async () => {
        if (!currentFile) {
          toast("Por favor, elige un archivo primero.");
          return;
        }
        if (!sessionUser) {
          openAuth("login");
          return;
        }

        // Check credits based on selection
        const requiredCredits = selectedStyle === "dating-pack" ? 6 : 1;
        if (totalCredits() < requiredCredits) {
          toast(
            `No tienes suficientes créditos. Necesitas ${requiredCredits} créditos para esta opción.`
          );
          return;
        }

        if (selectedStyle === "dating-pack") {
          // Generate pack of 6 dating photos
          await generateDatingPack();
        } else {
          // Regular single generation
          await generateSingle();
        }
      });

      // Add the missing generateSingle function
      async function generateSingle() {
        // Loading UI
        generateBtn.disabled = true;
        resetBtn.disabled = true;
        loadingSpinner.classList.remove("hidden");
        resultPreview.classList.add("hidden");
        downloadBtn.classList.add("hidden");

        const formData = new FormData();
        formData.append("photo", currentFile);

        // Use the selected style's prompt
        const prompt = stylePrompts[selectedStyle];
        if (!prompt) {
          toast(
            "El estilo seleccionado aún no está disponible. Por favor, elige otro."
          );
          loadingSpinner.classList.add("hidden");
          generateBtn.disabled = false;
          resetBtn.disabled = false;
          return;
        }
        formData.append("prompt", prompt);

        try {
          const res = await fetch("/api/generate", {
            method: "POST",
            body: formData,
            credentials: "include",
          });

          const data = await res.json().catch(() => ({}));

          if (!res.ok) {
            if (res.status === 401) {
              openAuth("login");
              throw new Error("Por favor, inicia sesión.");
            }
            if (res.status === 402) {
              await refreshSession();
              throw new Error(data.message || "Sin créditos.");
            }
            if (res.status === 413) {
              throw new Error("Archivo demasiado grande.");
            }
            if (res.status === 429) {
              throw new Error(
                data.error ||
                  "Límite de peticiones alcanzado o imagen duplicada."
              );
            }
            throw new Error(data.error || `HTTP ${res.status}`);
          }

          // Success
          if (data.imageUrl) {
            resultPreview.src = data.imageUrl;
            resultPreview.classList.remove("hidden");
            downloadBtn.classList.remove("hidden");
            // Track which style was used (check if gtag exists)
            if (typeof gtag !== "undefined") {
              gtag("event", "generate_success", {
                style: selectedStyle,
                category: selectedStyle.startsWith("figurine")
                  ? "figurine"
                  : selectedStyle.startsWith("dating")
                  ? "dating"
                  : "business",
              });
            }
          }
          await refreshSession();
        } catch (err) {
          console.error(err);
          toast(err.message || "La generación falló");
        } finally {
          loadingSpinner.classList.add("hidden");
          generateBtn.disabled = false;
          resetBtn.disabled = false;
        }
      }

      // (Removed duplicate generation logic block)

      downloadBtn.addEventListener("click", () => {
        const link = document.createElement("a");
        link.href = resultPreview.src;
        link.download = "toyrender-figura.png";
        link.click();
      });

      function getStyleName(style) {
        const names = {
          dating1: "Brillo Matutino",
          dating2: "Encanto Juguetón",
          dating3: "Elegancia Nocturna",
          dating4: "Verano Despreocupado",
          dating5: "Sensualidad Artística",
          dating6: "Confianza Íntima",
        };
        return names[style] || style;
      }

      resetBtn.addEventListener("click", () => {
        uploadArea.classList.remove("hidden");
        previewSection.classList.add("hidden");
        document
          .getElementById("styleSelectionSection")
          .classList.add("hidden");

        // Remove pack results container if it exists
        const packContainer = document.getElementById("packResultsContainer");
        if (packContainer) {
          packContainer.remove();
        }

        fileInput.value = "";
        currentFile = null;
        originalPreview.src = "";
        resultPreview.src = "";

        // Reset pack state
        isPackGeneration = false;
        packResults = [];
        currentPackIndex = 0;

        // Reset style selection to figurine1
        selectedStyle = "figurine1";
        document.querySelectorAll(".style-option").forEach((button) => {
          button.classList.remove("active");
          if (button.dataset.style === "figurine1") {
            button.classList.add("active");
          }
        });
      });

      async function generateDatingPack() {
        const datingStyles = [
          "dating1",
          "dating2",
          "dating3",
          "dating4",
          "dating5",
          "dating6",
        ];
        packResults = [];

        // Update UI for pack generation
        generateBtn.disabled = true;
        resetBtn.disabled = true;
        loadingSpinner.classList.remove("hidden");
        resultPreview.classList.add("hidden");
        downloadBtn.classList.add("hidden");

        // Add pack progress indicator
        const progressDiv = document.createElement("div");
        progressDiv.id = "packProgress";
        progressDiv.className = "text-center mt-4";
        progressDiv.innerHTML = `
              <p class="text-purple-300 mb-2">Generando Paquete de Fotos para Citas...</p>
              <div class="flex justify-center gap-2">
                ${datingStyles
                  .map(
                    (_, i) =>
                      `<div class="w-8 h-8 rounded-full bg-slate-700 pack-progress-dot" data-index="${i}"></div>`
                  )
                  .join("")}
              </div>
              <p class="text-sm text-purple-400 mt-2">Esto usará 6 créditos en total</p>
            `;
        loadingSpinner.appendChild(progressDiv);

        try {
          // Generate each style
          for (let i = 0; i < datingStyles.length; i++) {
            const style = datingStyles[i];
            const dot = progressDiv.querySelector(`[data-index="${i}"]`);
            dot.classList.add("bg-yellow-500", "animate-pulse");

            const formData = new FormData();
            formData.append("photo", currentFile);
            // Use the actual prompt for each style, not the style name
            formData.append("prompt", stylePrompts[style]);

            const res = await fetch("/api/generate", {
              method: "POST",
              body: formData,
              credentials: "include",
            });

            const data = await res.json().catch(() => ({}));

            if (res.ok && data.imageUrl) {
              packResults.push({
                style: style,
                url: data.imageUrl,
                name: getStyleName(style),
              });
              dot.classList.remove("bg-yellow-500", "animate-pulse");
              dot.classList.add("bg-green-500");
            } else {
              dot.classList.remove("bg-yellow-500", "animate-pulse");
              dot.classList.add("bg-red-500");
              // Log error but continue with other generations
              console.error(
                `Failed to generate ${style}:`,
                data.error || res.statusText
              );
            }
          }

          // Show pack results viewer
          if (packResults.length > 0) {
            showPackResults();
          } else {
            toast(
              "La generación del paquete falló. Por favor, inténtalo de nuevo."
            );
          }
          await refreshSession();
        } catch (err) {
          console.error(err);
          toast(err.message || "La generación del paquete falló");
        } finally {
          loadingSpinner.classList.add("hidden");
          generateBtn.disabled = false;
          resetBtn.disabled = false;
          progressDiv?.remove();
        }
      }

      // COMPLETE REPLACEMENT - This goes in your showPackResults() function

      // Replace your showPackResults() function with this version that matches heights:

      function showPackResults() {
        if (packResults.length === 0) return;

        // Hide spinner and single image elements
        loadingSpinner.classList.add("hidden");
        resultPreview.classList.add("hidden");
        downloadBtn.classList.add("hidden");
        generateBtn.classList.add("hidden");

        // Get the result container
        const resultContainer = document.getElementById("resultContainer");

        // Get the height of the original preview container for matching
        const originalContainer = originalPreview.parentElement;
        const originalHeight = originalContainer.offsetHeight;

        // Set matching height and remove the h-64 class
        resultContainer.classList.remove("h-64");
        resultContainer.className =
          "rounded-xl overflow-hidden bg-black/30 flex flex-col";
        resultContainer.style.height = originalHeight + "px";

        // Build the pack viewer with flex layout to fill the height
        resultContainer.innerHTML = `
    <div class="flex flex-col h-full p-4">
      <!-- Title -->
      <div class="text-center mb-2 flex-shrink-0">
        <h4 class="text-purple-300 font-semibold">Tu Paquete de Fotos para Citas</h4>
        <p class="text-xs text-purple-400">6 fotos generadas</p>
      </div>
      
      <!-- Main Image - flex-grow to fill available space -->
      <div class="flex-grow flex items-center justify-center mb-2 min-h-0">
        <img id="packMainImage" 
             src="${packResults[0].url}" 
             alt="${packResults[0].name}"
             class="max-w-full max-h-full object-contain rounded-lg">
      </div>
      
      <!-- Image Name -->
      <div class="text-center mb-2 flex-shrink-0">
        <span id="packImageName" class="text-sm text-purple-300">${
          packResults[0].name
        }</span>
      </div>
      
      <!-- Thumbnails -->
      <div class="grid grid-cols-6 gap-1 flex-shrink-0">
        ${packResults
          .map(
            (r, i) => `
          <button onclick="switchPackImage(${i})" 
                  class="border-2 ${
                    i === 0 ? "border-purple-500" : "border-transparent"
                  } rounded overflow-hidden hover:border-purple-400 transition-colors"
                  data-index="${i}">
            <img src="${r.url}" alt="${i + 1}" class="w-full h-10 object-cover">
          </button>
        `
          )
          .join("")}
      </div>
    </div>
  `;

        // Remove existing pack buttons if any
        const existingButtons = document.getElementById("packDownloadButtons");
        if (existingButtons) existingButtons.remove();

        // Create download buttons
        const packButtons = document.createElement("div");
        packButtons.id = "packDownloadButtons";
        packButtons.className = "flex gap-4 justify-center";
        packButtons.innerHTML = `
    <button onclick="downloadCurrentImage()" 
            class="px-8 py-4 bg-green-600 rounded-xl text-lg font-semibold hover:bg-green-700 transition-all">
      <i class="fas fa-download mr-2"></i>Descargar Actual
    </button>
    <button onclick="downloadAllImages()" 
            class="px-8 py-4 bg-gradient-to-r from-purple-600 to-pink-600 rounded-xl text-lg font-semibold hover:from-purple-700 hover:to-pink-700 transition-all">
      <i class="fas fa-download mr-2"></i>Descargar Todas (6)
    </button>
  `;

        generateBtn.parentElement.insertBefore(packButtons, resetBtn);
      }

      // Update the switch function to use Tailwind classes
      window.switchPackImage = function (index) {
        currentPackIndex = index;

        document.querySelectorAll("[data-index]").forEach((btn, i) => {
          if (i === index) {
            btn.classList.add("border-purple-500");
            btn.classList.remove("border-transparent");
          } else {
            btn.classList.remove("border-purple-500");
            btn.classList.add("border-transparent");
          }
        });

        document.getElementById("packMainImage").src = packResults[index].url;
        document.getElementById("packImageName").textContent =
          packResults[index].name;
      };

      window.downloadCurrentImage = function () {
        const current = packResults[currentPackIndex];
        const a = document.createElement("a");
        a.href = current.url;
        a.download = `foto-cita-${currentPackIndex + 1}.png`;
        a.click();
      };

      window.downloadAllImages = async function () {
        for (let i = 0; i < packResults.length; i++) {
          const a = document.createElement("a");
          a.href = packResults[i].url;
          a.download = `foto-cita-${i + 1}.png`;
          a.click();
          await new Promise((r) => setTimeout(r, 300));
        }
      };

      resetBtn.addEventListener("click", () => {
        // Reset file input and current file
        fileInput.value = "";
        currentFile = null;
        originalPreview.src = "";

        // Hide preview section and style selection
        previewSection.classList.add("hidden");
        const styleSection = document.getElementById("styleSelectionSection");
        if (styleSection) {
          styleSection.classList.add("hidden");
        }

        // Show upload area
        uploadArea.classList.remove("hidden");

        // Remove pack download buttons if they exist
        const packButtons = document.getElementById("packDownloadButtons");
        if (packButtons) {
          packButtons.remove();
        }

        // IMPORTANT: Restore the result container to its original state
        const resultContainer = document.getElementById("resultContainer");
        resultContainer.className =
          "rounded-xl overflow-hidden bg-black/30 h-64 flex items-center justify-center";
        resultContainer.style.height = ""; // Clear any inline height
        resultContainer.innerHTML = `
    <div id="loadingSpinner" class="hidden">
      <i class="fas fa-spinner fa-spin text-4xl text-purple-400"></i>
      <p class="mt-4 text-purple-300">Creando tu imagen...</p>
    </div>
    <img id="resultPreview" src="" alt="Resultado del diseño de figura generado por IA" 
         class="w-full h-64 object-cover hidden" />
  `;

        // CRITICAL: Re-get references to the newly created elements
        loadingSpinner = document.getElementById("loadingSpinner");
        resultPreview = document.getElementById("resultPreview");

        // Reset button states
        generateBtn.classList.remove("hidden");
        generateBtn.disabled = false;
        downloadBtn.classList.add("hidden");

        // Reset pack state
        isPackGeneration = false;
        packResults = [];
        currentPackIndex = 0;

        // Reset style selection to default
        selectedStyle = "figurine1";
        document.querySelectorAll(".style-option").forEach((button) => {
          button.classList.remove("active");
          if (button.dataset.style === "figurine1") {
            button.classList.add("active");
          }
        });
      });

      /* ----------------------- Init ----------------------- */
      // Initialize on DOM load
      document.addEventListener("DOMContentLoaded", function () {
        initStyleSelection();
      });
      refreshSession();

      /* ----------------- Testimonials drag code ----------------- */
      (() => {
        const friction = 0.92;
        const wheelBoost = 0.9;

        document.querySelectorAll("[data-drag-scroll]").forEach((el) => {
          el.style.userSelect = "none";
          el.style.touchAction = "pan-x";

          let isDown = false,
            startX = 0,
            startLeft = 0;
          let lastX = 0,
            velocity = 0,
            rafId = 0;

          const stopMomentum = () => {
            if (rafId) cancelAnimationFrame(rafId);
            rafId = 0;
          };
          const momentum = () => {
            stopMomentum();
            const step = () => {
              el.scrollLeft -= velocity;
              velocity *= friction;
              if (Math.abs(velocity) > 0.5) rafId = requestAnimationFrame(step);
            };
            rafId = requestAnimationFrame(step);
          };

          el.addEventListener("pointerdown", (e) => {
            isDown = true;
            el.setPointerCapture?.(e.pointerId);
            startX = e.clientX;
            startLeft = el.scrollLeft;
            lastX = e.clientX;
            velocity = 0;
            stopMomentum();
            el.classList.add("dragging");
          });

          el.addEventListener("pointermove", (e) => {
            if (!isDown) return;
            const dx = e.clientX - startX;
            el.scrollLeft = startLeft - dx;
            velocity = e.clientX - lastX;
            lastX = e.clientX;
          });

          const endDrag = (e) => {
            if (!isDown) return;
            isDown = false;
            el.releasePointerCapture?.(e.pointerId);
            el.classList.remove("dragging");
            momentum();
          };
          el.addEventListener("pointerup", endDrag);
          el.addEventListener("pointercancel", endDrag);
          el.addEventListener("pointerleave", () => {
            if (isDown) endDrag({});
          });

          el.addEventListener(
            "wheel",
            (e) => {
              if (Math.abs(e.deltaY) > Math.abs(e.deltaX)) {
                el.scrollLeft += e.deltaY * wheelBoost;
                e.preventDefault();
              }
            },
            { passive: false }
          );

          el.tabIndex = 0;
          el.addEventListener("keydown", (e) => {
            if (e.key === "ArrowRight")
              el.scrollBy({ left: el.clientWidth * 0.9, behavior: "smooth" });
            if (e.key === "ArrowLeft")
              el.scrollBy({ left: -el.clientWidth * 0.9, behavior: "smooth" });
          });
        });
      })();

      // autoscroll
      /* ----------------- Testimonials auto-scroll (seamless loop) ----------------- */

      // === AUTOPLAY testimonials (seamless + robust) ===
      (() => {
        const track = document.querySelector(
          ".testimonial-track[data-drag-scroll]"
        );
        if (!track) return;

        // Optional speed via data-auto-speed="0.6" (px per frame). Default ~0.5.
        const speed = parseFloat(track.dataset.autoSpeed) || 0.5;

        // Duplicate children once so we can loop seamlessly (idempotent).
        if (!track.__duplicated) {
          const kids = Array.from(track.children);
          const frag = document.createDocumentFragment();
          kids.forEach((k) => {
            const clone = k.cloneNode(true);
            clone.setAttribute("aria-hidden", "true");
            frag.appendChild(clone);
          });
          track.appendChild(frag);
          track.__duplicated = true;
        }

        let halfWidth = 0;
        let playing = true; // force-start (ignore prefers-reduced-motion)

        const measure = () => {
          // Wait for images to layout
          halfWidth = track.scrollWidth / 2;
          // Only autoplay if actual overflow exists
          playing = halfWidth > track.clientWidth + 2;
          track.classList.toggle("auto-scrolling", playing); // disables snap while auto
        };

        // Run measure after load and on resize/layout changes
        const afterLoad = () => {
          measure();
          // A few re-measures while images settle
          setTimeout(measure, 200);
          setTimeout(measure, 600);
          setTimeout(measure, 1200);
        };
        if (document.readyState === "complete") afterLoad();
        else window.addEventListener("load", afterLoad);

        // Keep measuring if container/cards change size
        const ro = new ResizeObserver(measure);
        ro.observe(track);

        // rAF loop
        const step = () => {
          if (playing) {
            let next = track.scrollLeft + speed;
            if (halfWidth > 0 && next >= halfWidth) next -= halfWidth; // seamless wrap
            track.scrollLeft = next;
          }
          requestAnimationFrame(step);
        };
        requestAnimationFrame(step);

        // Pause on user interaction; resume after
        const pause = () => (playing = false);
        const resume = () => {
          measure(); // recompute in case user repositioned
          playing = halfWidth > track.clientWidth + 2;
        };

        ["mouseenter", "pointerdown", "focusin", "touchstart"].forEach((evt) =>
          track.addEventListener(evt, pause, { passive: true })
        );
        [
          "mouseleave",
          "pointerup",
          "focusout",
          "touchend",
          "touchcancel",
        ].forEach((evt) =>
          track.addEventListener(evt, resume, { passive: true })
        );

        // Arrow buttons should also pause
        document
          .querySelector("[data-track-left]")
          ?.addEventListener("click", pause);
        document
          .querySelector("[data-track-right]")
          ?.addEventListener("click", pause);
      })();

      // ---- Stripe init (must come before using `stripe`) ----
      if (!window.Stripe) {
        console.error("Stripe.js failed to load");
      }
      if (!window.STRIPE_PK) {
        console.error("Missing publishable key from /config.js");
      }
      const stripe = Stripe(window.STRIPE_PK);

      // STRIPE INTEGRATION

      document
        .getElementById("buyCreditsBtn")
        .addEventListener("click", async () => {
          try {
            if (!sessionUser) {
              openAuth("login");
              return;
            }
            const data = await fetchJSON("/api/payments/checkout", {
              method: "POST",
            });

            // Prefer the hosted URL (bypasses any Stripe.js issues/ad-blockers)
            if (data?.url) {
              window.location.assign(data.url);
              return;
            }
            // Fallback to Stripe.js
            if (data?.id) {
              const { error } = await stripe.redirectToCheckout({
                sessionId: data.id,
              });
              if (error)
                throw new Error(
                  error.message || "No se pudo iniciar el proceso de pago."
                );
              return;
            }

            throw new Error(
              "No se recibió una URL de pago o un ID de sesión del servidor."
            );
          } catch (e) {
            console.error("Fallo en el proceso de pago:", e);
            toast(e.message || "No se pudo iniciar el proceso de pago.");
          }
        });
    </script>
  </body>
</html>
